{"version":3,"sources":["source-docs/Config.js","source/access/LoginView.js","source/access/UserRepository.js","source/base/Bag.js","source/base/Bindable.js","source/base/Cache.js","source/base/Config.js","source/base/Cookie.js","source/base/Dom.js","source/base/Import.js","source/base/Mixin.js","source/base/Model.js","source/base/Persist.js","source/base/Repository.js","source/base/Router.js","source/base/RuleSet.js","source/base/Tag.js","source/base/Theme.js","source/base/View.js","source/base/ViewList.js","source/form/ButtonField.js","source/form/Field.js","source/form/FieldSet.js","source/form/FileField.js","source/form/Form.js","source/form/HiddenField.js","source/form/HtmlField.js","source/form/RadioField.js","source/form/SelectField.js","source/form/TextareaField.js","source/form/multiField/CreateForm.js","source/form/multiField/Form.js","source/form/multiField/FormWrapper.js","source/form/multiField/SearchForm.js","source/form/multiField/View.js","source/form/multiField/Wrapper.js","source/input/Keyboard.js","source/tag/LazyTag.js","source/tag/PopOutTag.js","source/tag/ScrollTag.js","source/toast/Toast.js","source/toast/ToastAlert.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["Config","title","LoginView","template","event","console","log","preventDefault","window","open","backend","userCheck","clearInterval","onInterval","UserRepository","getCurrentUser","then","response","user","body","id","Router","clearCache","Repository","Toast","instance","pop","ToastAlert","username","publicId","time","View","refresh","prerenderer","navigator","userAgent","match","args","Promise","resolve","request","uri","roles","i","isAdmin","current","callback","bindTo","Object","defineProperty","configurable","writable","value","Bindable","makeBindable","onResponse","meta","currentUser","toId","int","toString","fromId","parseInt","Bag","changeCallback","Symbol","content","Map","list","type","item","Error","error","has","set","ITEM_ADDED","get","ITEM_REMOVED","Array","from","entries","map","entry","enumerable","Ref","Deck","Binding","BindingAll","IsBindable","Executing","Stack","ObjSymbol","Wrapped","object","key","make","Node","Set","IntersectionObserver","isSealed","isExtensible","property","options","bindToAll","Function","delay","wrapDelayCallback","throttle","wrapThrottleCallback","wait","wrapWaitCallback","frame","wrapFrameCallback","idle","wrapIdleCallback","bindIndex","length","push","cleaned","path","parts","split","node","shift","subParts","slice","debind","v","k","t","d","rest","join","concat","bindChain","x","___before","beforeIndex","___before___","___after","afterIndex","___after___","isBound","j","target","substring","___isBindable___","isBindable","stop","descriptor","getOwnPropertyDescriptor","excluded","File","Reflect","deleteProperty","construct","Proxy","unshift","providedArgs","objRef","EventTarget","MutationObserver","PerformanceObserver","ResizeObserver","ret","new","apply","clearObjs","maps","func","os","clearObj","o","keys","owner","pathParts","top","obj","setTimeout","waiter","clearTimeout","p","requestAnimationFrame","req","requestIdleCallback","Cache","expiry","bucket","expiration","Date","getTime","defaultvalue","ConfigData","AppConfig","require","assign","warn","name","data","configBlobs","configBlob","JSON","parse","Cookie","jar","location","href","substr","document","cookie","c","trim","decodeURIComponent","cookieString","encodeURIComponent","traversals","Dom","doc","selector","startNode","endNode","result","started","ended","treeWalker","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","acceptNode","FILTER_SKIP","Element","matches","FILTER_ACCEPT","traversal","nextNode","currentNode","dispatchEvent","mapTags","Import","__proto__","constructor","instances","tag","createElement","setAttribute","ready","accept","reject","addEventListener","attached","parent","head","append","Constructor","MixinList","Mixin","mixins","newClass","mixin","mixObject","getOwnPropertyNames","bind","getOwnPropertySymbols","cls","prototype","prev","meth","mixinTo","allStatic","allInstance","mixable","base","instanceNames","staticNames","prefix","methodName","e","s","a","method","getPrototypeOf","Model","repository","values","cacheKey","publidId","cached","load","consume","store","Persist","source","subBinding","_source","localStorage","getItem","watch","setItem","stringify","removeItem","objects","resourceUri","queryToString","queryOver","extractModel","page","records","record","customFields","api","form","Form","FormWrapper","rawData","model","skeleton","namespace","formData","FormData","ns","encode","_onResponse","add","post","cache","queryString","queryArgs","runningRequests","arg","fullUri","xhr","XMLHttpRequest","responseType","tagCacheSelector","tagCache","querySelector","tagCacheContent","innerText","withCredentials","link","timeout","xhrs","reqPromise","upload","onprogress","progressUp","progressDown","onreadystatechange","OK","readyState","getResponseHeader","items","status","responseText","code","prerendering","appendChild","_http","headers","header","setRequestHeader","send","regex","abort","view","listen","mainView","routeHistory","prevHistoryLength","history","route","pathname","search","hash","query","go","silent","configTitle","replaceState","pushState","Event","HashChangeEvent","forceRefresh","eventStart","CustomEvent","cancelable","detail","routes","URLSearchParams","pair","selected","L1","L2","argName","groups","exec","update","pathparts","isView","root","_result","pause","eventEnd","remove","params","finalArgs","fresh","writeable","RuleSet","rules","wrapped","wrap","nodes","querySelectorAll","globalRules","listener","removeEventListener","element","___cvApplied___","direct","parentView","viewList","Tag","parentNode","sibling","nextSibling","HTMLElement","contains","firstChild","insertBefore","cleanup","r","clear","render","ref","index","proxy","clearBindings","detachEvent","removeChild","Theme","viewMap","templateMap","fallbacks","viewType","whichMap","theme","dontParse","expandBind","moveIndex","___VIEW___","_this","_id","firstNode","lastNode","_onRemove","attach","detach","eventCleanup","viewLists","withViews","tags","intervals","timeouts","frames","ruleSet","preRuleSet","subBindings","subTemplates","removed","preserve","interpolateRegex","rendered","__id","uuid","stopped","paused","now","cancel","wrappedCallback","fired","created","setInterval","isArray","insertPoint","reRender","templateParsed","DocumentFragment","cloneNode","templates","subDoc","createRange","createContextualFragment","createComment","createTextNode","childNodes","rootNode","getRootNode","moveType","toRoot","isConnected","filter","n","nodeType","COMMENT_NODE","child","bubbles","renderComplete","postRender","ELEMENT_NODE","walker","mapInterpolatableTag","mapTemplateTag","mapSlotTag","mapPrendererTag","mapLinkTag","mapAttrTag","mapExpandableTag","mapRefTag","mapOnTag","mapEachTag","mapBindTag","mapIfTag","mapWithTag","existing","getAttribute","expandProperty","removeAttribute","onRemove","sourceTag","bindingView","expandArg","tagCompiler","compileAttrTag","newTag","replaceWith","attrProperty","pairs","attrs","bindProperty","attrib","TEXT_NODE","original","nodeValue","interpolatable","unsafeHtml","unsafeView","propertySplit","transformer","stringTransformer","expand","staticPrefix","staticNode","dynamicNode","unsafeTemplate","onAttach","__toString","innerHTML","staticSuffix","attributes","attribute","bindProperties","segments","longProperty","refAttr","refProp","refClassname","refKey","refClass","stringToClass","___tag___","tagObject","refKeyVal","bindArg","autoChangedEvent","tagName","toLowerCase","checked","option","selectedIndex","textContent","multi","inputListener","files","onDeck","toJSON","file","size","date","lastModified","eventListener","referent","action","eventName","callbackName","eventFlags","argList","replace","eventMethod","_parent","_callBackName","argRefs","outerHTML","eventOptions","includes","passive","capture","once","linkAttr","linkClick","linkClicked","prerenderAttr","withAttr","carryAttr","subTemplate","carryProps","eachAttr","eachProp","asProp","keyProp","ViewList","viewListRemover","debindA","subArgs","debindB","ifProperty","inverted","ifDoc","hasRendered","propertyDebind","initValue","renderDoc","bindableDebind","viewDebind","syncBind","templateName","getTemplate","subView","newRef","oldRef","___ref___","str","crypto","getRandomValues","Uint8Array","remover","callbacks","flat","methods","m","refClasses","refClassSplit","refShortClassname","subProperty","keyProperty","views","willReRender","kk","isNaN","renders","all","finalViews","found","viewArgs","upDebind","downDebind","renderRecurse","ii","splice","leftovers","ButtonField","_onClick","getName","cancels","stopPropagation","formTag","Field","disabled","valueString","ignore","extra","setting","input","multiple","errors","hasChildren","cascadeIfPossible","names","array","FieldSet","fields","renderFields","children","field","FileField","flatValue","_method","classes","_classes","_onSubmit","_onRender","json","chain","subchain","fieldName","MultiField","SelectField","RadioField","HtmlField","HiddenField","TextareaField","contentEditable","newArray","oldArray","exists","_updateFields","displayValue","contenteditable","activeElement","observer","lines","observe","characterData","childList","subtree","selectOptionByValue","optionsList","CreateForm","creating","focus","loading","wrapper","addRecord","_onLoad","_onRequest","_onError","loadForm","resp","onLoad","onSubmit","formElement","toUpperCase","_query","promises","onRequest","onRequestError","requestData","onReq","messages","alert","loaded","total","SearchForm","superTemplate","keyword","addButtonClicked","_fields","dragging","dropping","wrapSubfield","disable","fieldType","createForm","searchForm","createFormReady","setCreateForm","loader","addIcon","draggable","origin","Wrapper","fieldClass","cloneSkeleton","correctNames","superSkeleton","newField","newWrap","enable","level","_object","dragLabel","dropLabel","dragName","dropName","dragIndex","extractIndex","dropIndex","dragField","dropField","dragFields","dragLabels","dropFields","dropLabels","dropBefore","offset","currentFieldSet","currentLabel","label","currentName","currentIndex","newName","changeIndex","changeAttributePrefix","currentFields","currentLabels","oldPrefix","newPrefix","oldName","icon","deleted","backendPath","editRecord","undeleteImage","deleteImage","_titleField","getRecordTitle","Keyboard","maxDecay","listening","codes","LazyTag","classList","afterScroll","lazyStyle","style","offsetTop","offsetLeft","ScrollTag","PopOutTag","poppedOut","moving","hostSelector","popMargin","popSpeed","verticalDuration","horizontalDuration","unpoppedStyle","previousScroll","bodyStyle","bodyScroll","scrollStyle","popTimeout","rect","transformRect","clickListener","Math","sqrt","getBoundingClientRect","distance","left","cut","fromRight","innerWidth","right","fromBottom","innerHeight","bottom","horizontalAverage","vericalAverage","unpop","escapeListener","resizeListener","hostTag","hostRect","y","documentElement","scrollTop","w","width","h","height","___clickListener___","___escapeListener___","___resizeListener___","popLevel","scrollY","getComputedStyle","transform","oX","oY","oW","oH","unpopLevel","scrollTo","visible","offsetBottom","attachListener","addScrollListener","addResizeListener","scrolled","scrolledEvent","___scrollListener___","alerts","inst","decay","running","init","onTimeout","WebSocket","MozWebSocket","br","brunch","ar","_ar","cacheBuster","url","round","indexOf","browser","forceRepaint","reloaders","reload","stylesheet","call","val","forEach","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","src","eval","newScript","async","onload","port","host","server","hostname","connect","connection","onmessage","message","reloader","onerror","close","onclose"],"mappings":"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","file":"docs/curvature.js","sourcesContent":["export const Config = {\n\ttitle: 'Curvature 0.0.61'\n};\n","import { Config         } from 'Config';\r\n\r\nimport { View           } from '../base/View';\r\nimport { Router         } from '../base/Router';\r\nimport { Repository     } from '../base/Repository';\r\n\r\nimport { UserRepository } from './UserRepository';\r\n\r\nimport { Toast      } from '../toast/Toast';\r\nimport { ToastAlert } from '../toast/ToastAlert';\r\n\r\nexport class LoginView extends View{\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.template = `\r\n\t\t\t<a cv-link = \"user\">User</a>\r\n\t\t\t<br />\r\n\t\t\t\r\n\t\t\t<a cv-link = \"user/login\">Login</a>\r\n\t\t\t<br />\r\n\r\n\t\t\t<a cv-link = \"user/register\">Register</a>\r\n\t\t\t<br />\r\n\r\n\t\t\t<a cv-link = \"user/logout\">Logout</a>\r\n\t\t\t<br />\r\n\r\n\t\t\t<input\r\n\t\t\t\ttype  = \"button\"\r\n\t\t\t\tvalue = \"Login via FaceBook\"\r\n\t\t\t \tcv-on = \"click:facebookLogin(event)\"\r\n\t\t\t />\r\n\t\t\t <input\r\n\t\t\t\ttype  = \"button\"\r\n\t\t\t\tvalue = \"Log Out\"\r\n\t\t\t \tcv-on = \"click:logout(event)\"\r\n\t\t\t />\r\n\t\t`;\r\n\t}\r\n\tfacebookLogin(event) {\r\n\t\tconsole.log('fb!')\r\n\t\tevent.preventDefault();\r\n\t\tlet fbWindow = window.open(\r\n\t\t\tConfig.backend\r\n\t\t\t\t+ '/facebookLogin'\r\n\t\t);\r\n\r\n\t\tif(this.userCheck)\r\n\t\t{\r\n\t\t\tthis.clearInterval(this.userCheck);\r\n\t\t}\r\n\r\n\t\tthis.userCheck = this.onInterval(333, () => {\r\n\t\t\tUserRepository.getCurrentUser(true).then((response) => {\r\n\t\t\t\tlet user = response.body;\r\n\t\t\t\tif(!user.id || !user)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.clearInterval(this.userCheck);\r\n\r\n\t\t\t\tRouter.clearCache();\r\n\t\t\t\tRepository.clearCache();\r\n\r\n\t\t\t\tToast.instance().pop(new ToastAlert({\r\n\t\t\t\t\ttitle: 'Logged in as ' + user.username\r\n\t\t\t\t\t, body: 'ID: '  + user.publicId\r\n\t\t\t\t\t, time: 2400\r\n\t\t\t\t}));\r\n\r\n\t\t\t\t// history.go(-1);\r\n\r\n\t\t\t\t// Router.instance().updateView(this, this.routes, true);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tlogout(event) {\r\n\t\tlet logoutWindow = window.open(\r\n\t\t\tConfig.backend\r\n\t\t\t\t+ '/user/logout?page=app%3Fclose%3D1'\r\n\t\t);\r\n\t}\r\n}\r\n\r\n","import { Config     } from 'Config';\nimport { Bindable   } from '../base/Bindable';\nimport { Repository } from '../base/Repository';\n\nexport class UserRepository extends Repository {\n\n\tstatic get uri() { return Config.backend + '/user/'; }\n\n\tstatic getCurrentUser(refresh = null)\n\t{\n\t\tif(window.prerenderer || navigator.userAgent.match(/prerender/i))\n\t\t{\n\t\t\twindow.prerenderer = window.prerenderer || true;\n\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.args.response && refresh === false)\n\t\t{\n\t\t\treturn Promise.resolve(this.args.response);\n\t\t}\n\n\t\treturn this.request(\n\t\t\tthis.uri + 'current'\n\t\t\t, false\n\t\t\t, false\n\t\t).then((response) => {\n\t\t\tif(response.body && response.body.roles)\n\t\t\t{\n\t\t\t\tfor(let i in response.body.roles)\n\t\t\t\t{\n\t\t\t\t\tif(response.body.roles[i].class == 'SeanMorris\\\\Access\\\\Role\\\\Administrator')\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.body.isAdmin = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(response.body && response.body.id)\n\t\t\t{\n\t\t\t\tthis.args.response = response;\n\t\t\t\tthis.args.current  = response.body;\n\t\t\t}\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tstatic login()\n\t{\n\t\treturn this.request(this.uri + '/login');\n\t}\n\n\tstatic logout()\n\t{\n\t\tconst user  = this.args.current;\n\n\t\tdelete this.args.current;\n\n\t\treturn this.request(\n\t\t\tthis.uri + 'logout'\n\t\t\t, false\n\t\t\t, {}\n\t\t\t, false\n\t\t).then(() => {\n\t\t\tthis.args.current = null;\n\t\t\treturn user;\n\t\t});\n\t}\n\n\tstatic onChange(callback)\n\t{\n\t\treturn this.args.bindTo('current', callback);\n\t}\n}\n\nObject.defineProperty(UserRepository, 'args', {\n\tconfigurable: false\n\t, writable:   false\n\t, value:      Bindable.makeBindable({})\n});\n\nRepository.onResponse( response =>{\n\n\tif(response\n\t\t&& response.meta\n\t\t&& 'currentUser' in response.meta\n\t\t&& (!UserRepository.args.current || response.meta.currentUser.id !== UserRepository.args.current.id\n\t\t)\n\t){\n\t\tUserRepository.args.current = response.meta.currentUser;\n\t}\n\n});\n","import { Bindable } from './Bindable';\n\nconst toId   = int => Number(int).toString(36);\nconst fromId = id  => parseInt(id, 36);\n\nexport class Bag\n{\n\tconstructor(changeCallback = undefined)\n\t{\n\t\tthis.meta    = Symbol('meta');\n\t\tthis.content = new Map;\n\t\tthis.list    = Bindable.makeBindable({});\n\t\tthis.current = 0;\n\t\tthis.type    = undefined;\n\n\t\tthis.changeCallback = changeCallback;\n\t}\n\n\tadd(item)\n\t{\n\t\tif(item === undefined || !(item instanceof Object))\n\t\t{\n\t\t\tthrow new Error('Only objects may be added to Bags.');\n\t\t}\n\n\t\tif(this.type && !(item instanceof this.type))\n\t\t{\n\t\t\tconsole.error(this.type, item);\n\n\t\t\tthrow new Error(\n\t\t\t\t`Only objects of type ${this.type} may be added to this Bag.`\n\t\t\t);\n\t\t}\n\n\t\tif(this.content.has(item))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = toId(this.current++);\n\n\t\tthis.content.set(item, id);\n\n\t\tthis.list[id] = item;\n\n\t\tif(this.changeCallback)\n\t\t{\n\t\t\tthis.changeCallback(item, this.meta, Bag.ITEM_ADDED, id);\n\t\t}\n\t}\n\n\tremove(item)\n\t{\n\t\tif(item === undefined || !(item instanceof Object))\n\t\t{\n\t\t\tthrow new Error('Only objects may be removed from Bags.');\n\t\t}\n\n\t\tif(this.type && !(item instanceof this.type))\n\t\t{\n\t\t\tconsole.error(this.type, item);\n\n\t\t\tthrow new Error(\n\t\t\t\t`Only objects of type ${this.type} may be removed from this Bag.`\n\t\t\t);\n\t\t}\n\n\t\tif(!this.content.has(item))\n\t\t{\n\t\t\tif(this.changeCallback)\n\t\t\t{\n\t\t\t\tthis.changeCallback(item, this.meta, 0, undefined);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tconst id = this.content.get(item);\n\n\t\tdelete this.list[id];\n\n\t\tthis.content.delete(item);\n\n\t\tif(this.changeCallback)\n\t\t{\n\t\t\tthis.changeCallback(item, this.meta, Bag.ITEM_REMOVED, id);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\titems()\n\t{\n\t\treturn Array.from(this.content.entries()).map(entry => entry[0]);\n\t}\n}\n\nObject.defineProperty(Bag, 'ITEM_ADDED', {\n\tconfigurable: false\n\t, enumerable: false\n\t, writable:   true\n\t, value:      1\n});\n\nObject.defineProperty(Bag, 'ITEM_REMOVED', {\n\tconfigurable: false\n\t, enumerable: false\n\t, writable:   true\n\t, value:      -1\n});\n","const Ref        = Symbol('ref');\nconst Deck       = Symbol('deck');\nconst Binding    = Symbol('binding');\nconst BindingAll = Symbol('bindingAll');\nconst IsBindable = Symbol('isBindable')\nconst Executing  = Symbol('executing');\nconst Stack      = Symbol('stack');\nconst ObjSymbol  = Symbol('object');\nconst Wrapped    = Symbol('wrapped');\n\nexport class Bindable\n{\n\tstatic isBindable(object)\n\t{\n\t\tif (!object[Binding])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn object[Binding] === Bindable;\n\t}\n\n\tstatic onDeck(object, key)\n\t{\n\t\treturn object[Deck][key] || false;\n\t}\n\n\tstatic ref(object)\n\t{\n\t\treturn object[Ref] || false;\n\t}\n\n\tstatic makeBindable(object)\n\t{\n\t\treturn this.make(object);\n\t}\n\n\tstatic make(object)\n\t{\n\t\tif (!object\n\t\t\t|| !(object instanceof Object)\n\t\t\t|| object instanceof Node\n\t\t\t|| object instanceof Map\n\t\t\t|| object instanceof Set\n\t\t\t|| object instanceof IntersectionObserver\n\t\t\t|| Object.isSealed(object)\n\t\t\t|| !Object.isExtensible(object)\n\t\t) {\n\t\t\t// console.log('Cannot bind to object', object);\n\t\t\treturn object;\n\t\t}\n\n\t\tif(object[Ref])\n\t\t{\n\t\t\t// console.log('Already bound to object', object[Ref]);\n\t\t\treturn object;\n\t\t}\n\n\t\tif(object[Binding])\n\t\t{\n\t\t\treturn object;\n\t\t}\n\n\t\tObject.defineProperty(object, Ref, {\n\t\t\tconfigurable: true\n\t\t\t, enumerable: false\n\t\t\t, writable:   true\n\t\t\t, value:      object\n\t\t});\n\n\t\tObject.defineProperty(object, Deck, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      {}\n\t\t});\n\n\t\tObject.defineProperty(object, Binding, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      {}\n\t\t});\n\n\t\tObject.defineProperty(object, BindingAll, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      []\n\t\t});\n\n\t\tObject.defineProperty(object, IsBindable, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      Bindable\n\t\t});\n\n\t\tObject.defineProperty(object, Executing, {\n\t\t\tenumerable: false,\n\t\t\twritable: true\n\t\t});\n\n\t\tObject.defineProperty(object, Stack, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      []\n\t\t});\n\n\t\tObject.defineProperty(object, '___before___', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      []\n\t\t});\n\n\t\tObject.defineProperty(object, '___after___', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      []\n\t\t});\n\n\t\tObject.defineProperty(object, Wrapped, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      {}\n\t\t});\n\n\t\tconst bindTo = (property, callback = null, options = {}) => {\n\t\t\tlet bindToAll = false;\n\n\t\t\tif(property instanceof Function)\n\t\t\t{\n\t\t\t\toptions   = callback || {};\n\t\t\t\tcallback  = property;\n\t\t\t\tbindToAll = true;\n\t\t\t}\n\n\t\t\tif(options.delay >= 0)\n\t\t\t{\n\t\t\t\tcallback = this.wrapDelayCallback(callback, options.delay);\n\t\t\t}\n\n\t\t\tif(options.throttle >= 0)\n\t\t\t{\n\t\t\t\tcallback = this.wrapThrottleCallback(callback, options.throttle);\n\t\t\t}\n\n\t\t\tif (options.wait >= 0)\n\t\t\t{\n\t\t\t\tcallback = this.wrapWaitCallback(callback, options.wait);\n\t\t\t}\n\n\t\t\tif(options.frame)\n\t\t\t{\n\t\t\t\tcallback = this.wrapFrameCallback(callback, options.frame);\n\t\t\t}\n\n\t\t\tif(options.idle)\n\t\t\t{\n\t\t\t\tcallback = this.wrapIdleCallback(callback);\n\t\t\t}\n\n\t\t\tif(bindToAll)\n\t\t\t{\n\t\t\t\tlet bindIndex = object[BindingAll].length;\n\n\t\t\t\tobject[BindingAll].push(callback);\n\n\t\t\t\tfor (let i in object) {\n\t\t\t\t\tcallback(object[i], i, object, false);\n\t\t\t\t}\n\n\t\t\t\treturn () => {\n\t\t\t\t\tdelete object[BindingAll][bindIndex];\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (!object[Binding][property])\n\t\t\t{\n\t\t\t\tobject[Binding][property] = [];\n\t\t\t}\n\n\t\t\tlet bindIndex = object[Binding][property].length;\n\n\t\t\tobject[Binding][property].push(callback);\n\n\t\t\tcallback(object[property], property, object, false);\n\n\t\t\tlet cleaned = false;\n\n\t\t\treturn () => {\n\n\t\t\t\tif(cleaned)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcleaned = true;\n\n\t\t\t\tif (!object[Binding][property])\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdelete object[Binding][property][bindIndex];\n\n\t\t\t};\n\t\t};\n\n\t\tObject.defineProperty(object, 'bindTo', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      bindTo\n\t\t});\n\n\t\tconst ___before = (callback) => {\n\n\t\t\tconst beforeIndex = object.___before___.length;\n\n\t\t\tobject.___before___.push(callback);\n\n\t\t\tlet cleaned = false;\n\n\t\t\treturn () => {\n\n\t\t\t\tif(cleaned)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcleaned = true;\n\n\t\t\t\tdelete object.___before___[beforeIndex];\n\t\t\t};\n\t\t};\n\n\t\tconst ___after = (callback) => {\n\n\t\t\tconst afterIndex = object.___after___.length;\n\n\t\t\tobject.___after___.push(callback);\n\n\t\t\tlet cleaned = false;\n\n\t\t\treturn () => {\n\n\t\t\t\tif(cleaned)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcleaned = true;\n\n\t\t\t\tdelete object.___after___[afterIndex];\n\t\t\t};\n\t\t};\n\n\t\tObject.defineProperty(object, 'bindChain', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      (path, callback) => {\n\t\t\t\tconst parts    = path.split('.');\n\t\t\t\tconst node     = parts.shift();\n\t\t\t\tconst subParts = parts.slice(0);\n\t\t\t\tlet   debind   = [];\n\n\t\t\t\tdebind.push(object.bindTo(node, (v,k,t,d) => {\n\n\t\t\t\t\tconst rest = subParts.join('.');\n\n\t\t\t\t\tif(subParts.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcallback(v,k,t,d);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(v === undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tv = t[k] = this.makeBindable({});\n\t\t\t\t\t}\n\n\t\t\t\t\tdebind = debind.concat(v.bindChain(rest, callback));\n\t\t\t\t}));\n\n\t\t\t\t// console.log(debind);\n\n\t\t\t\treturn () => debind.map(x=>x());\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(object, '___before', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      ___before\n\t\t});\n\n\t\tObject.defineProperty(object, '___after', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      ___after\n\t\t});\n\n\t\tconst isBound = () => {\n\t\t\tfor (let i in object[BindingAll]) {\n\t\t\t\tif (object[BindingAll][i]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let i in object[Binding]) {\n\t\t\t\tfor (let j in object[Binding][i]) {\n\t\t\t\t\tif (object[Binding][i][j]) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tObject.defineProperty(object, 'isBound', {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   false\n\t\t\t, value:      isBound\n\t\t});\n\n\t\tfor (let i in object) {\n\t\t\tif (object[i]\n\t\t\t\t&& object[i] instanceof Object\n\t\t\t\t&& !object[i] instanceof Node\n\t\t\t\t&& !object[i] instanceof Promise\n\t\t\t) {\n\t\t\t\tobject[i] = Bindable.make(object[i]);\n\t\t\t}\n\t\t}\n\n\t\tconst set = (target, key, value) => {\n\t\t\tif(object[Deck][key] !== undefined && object[Deck][key] === value)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif(typeof key === 'string'\n\t\t\t\t&& key.substring(0,3) === '___'\n\t\t\t\t&& key.slice(-3) === '___'\n\t\t\t){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif(target[key] === value)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif(value && value instanceof Object && !(value instanceof Node))\n\t\t\t{\n\t\t\t\tif(value.___isBindable___ !== Bindable)\n\t\t\t\t{\n\t\t\t\t\tvalue = Bindable.makeBindable(value);\n\n\t\t\t\t\tif(this.isBindable(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tfor(let i in value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(value[i] && value[i] instanceof Object)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue[i] = Bindable.makeBindable(value[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tobject[Deck][key] = value;\n\n\t\t\tfor(let i in object[BindingAll])\n\t\t\t{\n\t\t\t\tif(!object[BindingAll][i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tobject[BindingAll][i](value, key, target, false);\n\t\t\t}\n\n\t\t\tlet stop = false;\n\n\t\t\tif(key in object[Binding])\n\t\t\t{\n\t\t\t\tfor(let i in object[Binding][key])\n\t\t\t\t{\n\t\t\t\t\tif(!object[Binding][key])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!object[Binding][key][i])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (object[Binding][key][i](value, key, target, false, target[key]) === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tstop = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdelete object[Deck][key];\n\n\t\t\tif (!stop)\n\t\t\t{\n\t\t\t\tlet descriptor = Object.getOwnPropertyDescriptor(target, key);\n\n\t\t\t\tlet excluded = (\n\t\t\t\t\ttarget instanceof File\n\t\t\t\t\t&& key == 'lastModifiedDate'\n\t\t\t\t);\n\n\t\t\t\tif(!excluded\n\t\t\t\t\t&& (!descriptor || descriptor.writable)\n\t\t\t\t\t&& target[key] === value\n\t\t\t\t){\n\t\t\t\t\ttarget[key] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Reflect.set(target, key, value);\n\t\t};\n\n\t\tconst deleteProperty = (target, key) => {\n\t\t\tif(!(key in target))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tfor(let i in object[BindingAll])\n\t\t\t{\n\t\t\t\tobject[BindingAll][i](undefined, key, target, true, target[key]);\n\t\t\t}\n\n\t\t\tif(key in object[Binding])\n\t\t\t{\n\t\t\t\tfor(let i in object[Binding][key])\n\t\t\t\t{\n\t\t\t\t\tif(!object[Binding][key][i])\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tobject[Binding][key][i](undefined, key, target, true, target[key]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdelete target[key];\n\n\t\t\treturn true;\n\t\t};\n\n\t\tconst get = (target, key) => {\n\t\t\tif(key === Ref || key === 'isBound' || key === 'bindTo')\n\t\t\t{\n\t\t\t\treturn target[key];\n\t\t\t}\n\n\t\t\tif(target[key] instanceof Function)\n\t\t\t{\n\t\t\t\tif(target[Wrapped][key])\n\t\t\t\t{\n\t\t\t\t\treturn target[Wrapped][key];\n\t\t\t\t}\n\n\t\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\n\t\t\t\tif(descriptor && !descriptor.configurable && !descriptor.writable)\n\t\t\t\t{\n\t\t\t\t\ttarget[Wrapped][key] = target[key];\n\n\t\t\t\t\treturn target[Wrapped][key];\n\t\t\t\t}\n\n\n\t\t\t\ttarget[Wrapped][key] = function(...providedArgs){\n\n\t\t\t\t\ttarget[Executing] = key;\n\n\t\t\t\t\ttarget[Stack].unshift(key);\n\n\t\t\t\t\tfor(let i in target.___before___)\n\t\t\t\t\t{\n\t\t\t\t\t\ttarget.___before___[i](target, key, target[Stack], object, providedArgs);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objRef = (\n\t\t\t\t\t\tobject instanceof Promise\n\t\t\t\t\t\t|| object instanceof EventTarget\n\t\t\t\t\t\t|| object instanceof MutationObserver\n\t\t\t\t\t\t|| object instanceof IntersectionObserver\n\t\t\t\t\t\t|| object instanceof MutationObserver\n\t\t\t\t\t\t|| object instanceof PerformanceObserver\n\t\t\t\t\t\t|| object instanceof ResizeObserver\n\t\t\t\t\t\t|| object instanceof Map\n\t\t\t\t\t\t|| object instanceof Set\n\t\t\t\t\t)\n\t\t\t\t\t\t? object\n\t\t\t\t\t\t: object[Ref];\n\n\t\t\t\t\tconst ret = new.target\n\t\t\t\t\t\t? new target[key](...providedArgs)\n\t\t\t\t\t\t: target[key].apply(objRef || object, providedArgs);\n\n\t\t\t\t\tfor(const i in target.___after___)\n\t\t\t\t\t{\n\t\t\t\t\t\ttarget.___after___[i](target, key, target[Stack], object, providedArgs);\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[Executing] = null;\n\n\t\t\t\t\ttarget[Stack].shift();\n\n\t\t\t\t\treturn ret;\n\t\t\t\t};\n\n\t\t\t\treturn target[Wrapped][key];\n\t\t\t}\n\n\t\t\tif(target[key] instanceof Object && !target[key][Ref])\n\t\t\t{\n\t\t\t\tBindable.make(target[key]);\n\t\t\t}\n\n\t\t\treturn target[key];\n\t\t};\n\n\t\tconst construct = (target, args) => {\n\n\t\t\tconst key = 'constructor';\n\n\t\t\tfor(let i in target.___before___)\n\t\t\t{\n\t\t\t\ttarget.___before___[i](target, key, target[Stack], undefined, args);\n\t\t\t}\n\n\t\t\tconst instance = Bindable.make( new target(...args) );\n\n\t\t\tfor(let i in target.___after___)\n\t\t\t{\n\t\t\t\ttarget.___after___[i](target, key, target[Stack], instance, args);\n\t\t\t}\n\n\t\t\treturn instance;\n\t\t};\n\n\t\tObject.defineProperty(object, Ref, {\n\t\t\tconfigurable: false\n\t\t\t, enumerable: false\n\t\t\t, writable:   true\n\t\t\t, value:      object[Ref]\n\t\t});\n\n\t\tobject[Ref] = new Proxy(object, {\n\t\t\tdeleteProperty, construct, get, set\n\t\t});\n\n\t\treturn object[Ref];\n\t}\n\n\tstatic clearBindings(object) {\n\t\tconst clearObj  = o => Object.keys(o).map(k => delete o[k]);\n\t\tconst maps      = func => (...os) => os.map(func);\n\t\tconst clearObjs = maps(clearObj);\n\n\t\tclearObjs(\n\t\t\tobject[Wrapped]\n\t\t\t, object[Binding]\n\t\t\t, object[BindingAll]\n\t\t\t, object.___after___\n\t\t\t, object.___before___\n\t\t\t// , object[Ref]\n\t\t);\n\n\t\t// object[BindingAll]  = [];\n\t\t// object.___after___  = [];\n\t\t// object.___before___ = [];\n\n\t\t// object[Ref]         = {};\n\t\t// object[Wrapped]     = {};\n\t\t// object[Binding]     = {};\n\t}\n\n\tstatic resolve(object, path, owner = false)\n\t{\n\t\t// console.log(path, object);\n\n\t\tlet node;\n\t\tlet pathParts = path.split('.');\n\t\tlet top       = pathParts[0];\n\n\t\twhile(pathParts.length)\n\t\t{\n\t\t\tif(owner && pathParts.length === 1)\n\t\t\t{\n\t\t\t\tlet obj = this.makeBindable(object);\n\n\t\t\t\treturn [obj, pathParts.shift(), top];\n\t\t\t}\n\n\t\t\tnode = pathParts.shift();\n\n\t\t\tif(!node in object\n\t\t\t\t|| !object[node]\n\t\t\t\t|| !(object[node] instanceof Object)\n\t\t\t){\n\t\t\t\tobject[node] = {};\n\t\t\t}\n\n\t\t\tobject = this.makeBindable(object[node]);\n\t\t}\n\n\t\treturn [this.makeBindable(object), node, top];\n\t}\n\n\tstatic wrapDelayCallback(callback, delay)\n\t{\n\t\t return (v,k,t,d) => {\n\n\t\t\tsetTimeout(()=>callback(v,k,t,d,t[k]), delay);\n\n\t\t};\n\t}\n\n\tstatic wrapThrottleCallback(callback, throttle)\n\t{\n\t\treturn ((callback) => {\n\n\t\t\tlet throttle = false;\n\n\t\t\treturn (v,k,t,d) => {\n\n\t\t\t\tif (throttle)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcallback(v,k,t,d,t[k]);\n\n\t\t\t\tthrottle = true;\n\n\t\t\t\tsetTimeout(()=> {throttle = false}, throttle);\n\n\t\t\t}\n\t\t})(callback);\n\t}\n\n\tstatic wrapWaitCallback(callback, wait)\n\t{\n\t\tlet waiter = false;\n\n\t\treturn (v,k,t,d) => {\n\n\t\t\tif (waiter)\n\t\t\t{\n\t\t\t\tclearTimeout(waiter);\n\t\t\t\twaiter = false;\n\t\t\t}\n\n\t\t\twaiter = setTimeout(()=> callback(v,k,t,d,t[k]), wait);\n\t\t};\n\t}\n\n\tstatic wrapFrameCallback(callback, frames)\n\t{\n\t\treturn (v,k,t,d,p) => {\n\t\t\trequestAnimationFrame(() => callback(v,k,t,d,p));\n\t\t};\n\t}\n\n\tstatic wrapIdleCallback(callback)\n\t{\n\t\treturn (v,k,t,d,p) => {\n\t\t\t// Compatibility for Safari 08/2020\n\t\t\tconst req = window.requestIdleCallback || requestAnimationFrame;\n\t\t\treq(() => callback(v,k,t,d,p));\n\t\t};\n\t}\n}\n","export class Cache\r\n{\r\n\tstatic store(key, value, expiry, bucket = 'standard')\r\n\t{\r\n\t\tlet expiration = 0;\r\n\r\n\t\tif(expiry)\r\n\t\t{\r\n\t\t\texpiration = (expiry * 1000) + (new Date).getTime();\r\n\t\t}\r\n\r\n\t\t// console.log(\r\n\t\t// \t`Caching ${key} until ${expiration} in ${bucket}.`\r\n\t\t// \t, value\r\n\t\t// \t, this.bucket\r\n\t\t// );\r\n\r\n\t\tif(!this.bucket)\r\n\t\t{\r\n\t\t\tthis.bucket = {};\r\n\t\t}\r\n\r\n\t\tif(!this.bucket[bucket])\r\n\t\t{\r\n\t\t\tthis.bucket[bucket]\t= {};\r\n\t\t}\r\n\r\n\t\tthis.bucket[bucket][key] = {expiration, value};\r\n\t}\r\n\r\n\tstatic load(key, defaultvalue = false, bucket = 'standard')\r\n\t{\r\n\t\t// console.log(\r\n\t\t// \t`Checking cache for ${key} in ${bucket}.`\r\n\t\t// \t, this.bucket\r\n\t\t// );\r\n\r\n\t\tif(this.bucket && this.bucket[bucket] && this.bucket[bucket][key])\r\n\t\t{\r\n\t\t\t// console.log(this.bucket[bucket][key].expiration, (new Date).getTime());\r\n\t\t\tif(this.bucket[bucket][key].expiration == 0\r\n\t\t\t\t|| this.bucket[bucket][key].expiration > (new Date).getTime()\r\n\t\t\t){\r\n\t\t\t\treturn this.bucket[bucket][key].value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn defaultvalue;\r\n\t}\r\n}","const ConfigData = {};\n\ntry{\n\tconst AppConfig = require('Config').Config || {};\n\n\tObject.assign(ConfigData, AppConfig);\n} catch(error) {\n\tconsole.warn(error);\n}\n\nexport class Config\n{\n\tstatic get(name)\n\t{\n\t\treturn this.data[name]\n\t}\n\n\tstatic set(name, value)\n\t{\n\t\tthis.data[name] = value;\n\n\t\treturn this;\n\t}\n\n\tstatic dump()\n\t{\n\t\treturn this.data;\n\t}\n\n\tstatic init(...configBlobs)\n\t{\n\t\tfor(const i in configBlobs)\n\t\t{\n\t\t\tconst configBlob = configBlobs[i];\n\n\t\t\tif(typeof configBlob === 'string')\n\t\t\t{\n\t\t\t\tconfigBlob = JSON.parse(configBlob);\n\t\t\t}\n\n\t\t\tfor(const name in configBlob)\n\t\t\t{\n\t\t\t\tconst value = configBlob[name];\n\n\t\t\t\treturn this.data[name] = value;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n}\n\nConfig.data = ConfigData || {};\n","import { Bindable } from './Bindable';\n\nexport class Cookie\n{\n\tstatic set(name, value)\n\t{\n\t\tCookie.jar[name] = value;\n\t}\n\n\tstatic get(name)\n\t{\n\t\treturn Cookie.jar[name];\n\t}\n\n\tstatic delete(name)\n\t{\n\t\tdelete Cookie.jar[name];\n\t}\n};\n\nCookie.jar = Cookie.jar || Bindable.makeBindable({});\n\nif(window.location.href.substr(0,4) !== 'data')\n{\n\tdocument.cookie.split(';').map(c => {\n\t\tlet [key, value] = c.split('=');\n\n\t\ttry\n\t\t{\n\t\t\tvalue = JSON.parse(value);\n\t\t}\n\t\tcatch(error)\n\t\t{\n\t\t\tvalue = value;\n\t\t}\n\n\t\tkey = key.trim();\n\n\t\tCookie.jar[decodeURIComponent(key)] = value;\n\t\t// console.log(Cookie.jar);\n\t});\n\n\tCookie.jar.bindTo((v,k,t,d) => {\n\t\tt[k] = v;\n\n\t\tif(d)\n\t\t{\n\t\t\tt[k] = null;\n\t\t}\n\t\t\n\t\tconst cookieString = `${encodeURIComponent(k)}=${t[k]}`;\n\t\t// console.log(cookieString);\n\t\tdocument.cookie = cookieString;\n\t});\n}\n","let traversals = 0;\n\nexport class Dom\n{\n\tstatic mapTags(doc, selector, callback, startNode, endNode)\n\t{\n\t\tconst result = [];\n\n\t\tlet started = true;\n\n\t\tif(startNode)\n\t\t{\n\t\t\tstarted = false;\n\t\t}\n\n\t\tlet ended = false;\n\n\t\tconst treeWalker = document.createTreeWalker(\n\t\t\tdoc,\n\t\t\tNodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n\t\t\t{\n\t\t\t\tacceptNode: (node, walker) => {\n\n\t\t\t\t\tif(!started)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(node === startNode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstarted = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(endNode && node === endNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tended = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(ended)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(selector)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(node instanceof Element)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(node.matches(selector))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn NodeFilter.FILTER_SKIP;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tconst traversal = traversals++;\n\n\t\twhile(treeWalker.nextNode())\n\t\t{\n\t\t\tresult.push(callback(treeWalker.currentNode, treeWalker));\n\t\t}\n\n\t\treturn result;\n\t}\n\tstatic dispatchEvent(doc, event)\n\t{\n\t\tdoc.dispatchEvent(event);\n\n\t\tDom.mapTags(doc, false, (node) => {\n\t\t\tnode.dispatchEvent(event);\n\t\t});\n\t}\n}\n","export class Import\n{\n\tconstructor(uri)\n\t{\n\t\tconsole.log(this.__proto__.constructor);\n\n\t\tif(this.__proto__.constructor.instances[uri])\n\t\t{\n\t\t\treturn this.__proto__.constructor.instances[uri];\n\t\t}\n\n\t\tthis.uri = uri;\n\n\t\tconst tag = document.createElement('script');\n\n\t\ttag.setAttribute('src', this.uri);\n\n\t\tthis.ready = new Promise((accept, reject) => {\n\n\t\t\ttag.addEventListener('load',  event  => accept(tag));\n\t\t\ttag.addEventListener('error', error => {\n\n\t\t\t\tconsole.error(error);\n\n\t\t\t\treject(error);\n\n\t\t\t});\n\n\t\t});\n\n\t\tthis.tag = tag;\n\t\tthis.attached = false;\n\n\t\tthis.__proto__.constructor.instances[uri] = this;\n\t}\n\n\tattach(parent = null)\n\t{\n\t\tif(this.attached)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparent = parent || document.head;\n\n\t\tparent.append(this.tag);\n\n\t\tthis.attached = true;\n\t}\n}\n\nImport.instances = {};\n","import { Bindable } from './Bindable';\n\nconst Constructor = Symbol('constructor');\nconst MixinList   = Symbol('mixinList');\n\nexport class Mixin\n{\n\tstatic with(...mixins)\n\t{\n\t\tconst constructors = [];\n\n\t\tconst newClass = class{ constructor(...args) {\n\n\t\t\tfor(const mixin of mixins)\n\t\t\t{\n\t\t\t\tif(mixin[ Mixin.constructor ])\n\t\t\t\t{\n\t\t\t\t\tmixin[ Mixin.constructor ].apply(this);\n\t\t\t\t}\n\n\t\t\t\tswitch(typeof mixin)\n\t\t\t\t{\n\t\t\t\t\t// case 'function':\n\t\t\t\t\t// \tthis.mixClass(mixin, newClass);\n\t\t\t\t\t// \tbreak;\n\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tMixin.mixObject(mixin, this);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}};\n\n\t\treturn newClass;\n\t}\n\n\tstatic mixObject(mixin, instance)\n\t{\n\t\tfor(const func of Object.getOwnPropertyNames(mixin))\n\t\t{\n\t\t\tif(typeof mixin[func] === 'function')\n\t\t\t{\n\t\t\t\tinstance[func] = mixin[func].bind(instance);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tinstance[func] = mixin[func];\n\t\t}\n\n\t\tfor(const func of Object.getOwnPropertySymbols(mixin))\n\t\t{\n\t\t\tif(typeof mixin[func] === 'function')\n\t\t\t{\n\t\t\t\tinstance[func] = mixin[func].bind(instance);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tinstance[func] = mixin[func];\n\t\t}\n\t}\n\n\tstatic mixClass(cls, newClass)\n\t{\n\t\tfor(const func of Object.getOwnPropertyNames(cls.prototype))\n\t\t{\n\t\t\tnewClass.prototype[func] = cls.prototype[func].bind(newClass.prototype);\n\t\t}\n\n\t\tfor(const func of Object.getOwnPropertySymbols(cls.prototype))\n\t\t{\n\t\t\tnewClass.prototype[func] = cls.prototype[func].bind(newClass.prototype);\n\t\t}\n\n\t\tfor(const func of Object.getOwnPropertyNames(cls))\n\t\t{\n\t\t\tif(typeof cls[func] !== 'function')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst prev = newClass[func] || false;\n\t\t\tconst meth = cls[func].bind(newClass);\n\n\t\t\tnewClass[func] = (...args) => {\n\t\t\t\tprev && prev(...args);\n\t\t\t\treturn meth(...args);\n\t\t\t};\n\t\t}\n\n\t\tfor(const func of Object.getOwnPropertySymbols(cls))\n\t\t{\n\t\t\tif(typeof cls[func] !== 'function')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst prev = newClass[func] || false;\n\t\t\tconst meth = cls[func].bind(newClass);\n\n\t\t\tnewClass[func] = (...args) => {\n\t\t\t\tprev && prev(...args);\n\t\t\t\treturn meth(...args);\n\t\t\t};\n\t\t}\n\t}\n\n\tstatic mix(mixinTo)\n\t{\n\t\tconst constructors = [];\n\t\tconst allStatic    = {};\n\t\tconst allInstance  = {};\n\n\t\tconst mixable = Bindable.makeBindable(mixinTo);\n\n\t\tfor(\n\t\t\tlet base = this\n\t\t\t; base && base.prototype\n\t\t\t; base = Object.getPrototypeOf(base)\n\t\t){\n\t\t\tconst instanceNames = Object.getOwnPropertyNames(base.prototype);\n\t\t\tconst staticNames   = Object.getOwnPropertyNames(base);\n\n\t\t\tconst prefix = /^(before|after)__(.+)/;\n\n\t\t\tfor(const methodName of staticNames)\n\t\t\t{\n\t\t\t\tconst match = methodName.match(prefix);\n\n\t\t\t\tif(match)\n\t\t\t\t{\n\t\t\t\t\tswitch(match[1])\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\t\tmixable.___before((t,e,s,o,a) => {\n\n\t\t\t\t\t\t\t\tif(e !== match[2])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst method = base[methodName].bind(o);\n\n\t\t\t\t\t\t\t\treturn method(...a);\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\tmixable.___after((t,e,s,o,a) => {\n\n\t\t\t\t\t\t\t\tif(e !== match[2])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst method = base[methodName].bind(o);\n\n\t\t\t\t\t\t\t\treturn method(...a);\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(allStatic[methodName])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(typeof base[methodName] !== 'function')\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tallStatic[methodName] = base[methodName];\n\t\t\t}\n\n\t\t\tfor(const methodName of instanceNames)\n\t\t\t{\n\t\t\t\tconst match = methodName.match(prefix);\n\n\t\t\t\tif(match)\n\t\t\t\t{\n\t\t\t\t\tswitch(match[1])\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\t\tmixable.___before((t,e,s,o,a) => {\n\t\t\t\t\t\t\t\tif(e !== match[2])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst method = base.prototype[methodName].bind(o);\n\n\t\t\t\t\t\t\t\treturn method(...a);\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\tmixable.___after((t,e,s,o,a) => {\n\n\t\t\t\t\t\t\t\tif(e !== match[2])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst method = base.prototype[methodName].bind(o);\n\n\t\t\t\t\t\t\t\treturn method(...a);\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(allInstance[methodName])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(typeof base.prototype[methodName] !== 'function')\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tallInstance[methodName] = base.prototype[methodName];\n\t\t\t}\n\t\t}\n\n\t\tfor(const methodName in allStatic)\n\t\t{\n\t\t\tmixinTo[methodName] = allStatic[methodName].bind(mixinTo);\n\t\t}\n\n\t\tfor(const methodName in allInstance)\n\t\t{\n\t\t\tmixinTo.prototype[methodName] = function(...args){\n\t\t\t\treturn allInstance[methodName].apply(this, args);\n\t\t\t};\n\t\t}\n\n\t\treturn mixable;\n\t}\n}\n\nMixin.constructor = Constructor;\n","import { Cache } from './Cache';\nimport { Bindable   } from './Bindable';\nimport { Repository } from './Repository';\n\nexport class Model\n{\n\tconstructor(repository)\n\t{\n\t\tthis.repository = repository;\n\t}\n\n\tconsume(values)\n\t{\n\t\tfor(let property in values)\n\t\t{\n\t\t\tlet value = values[property];\n\n\t\t\tif(values[property] instanceof Object\n\t\t\t\t&& values[property].class\n\t\t\t\t&& values[property].publicId\n\t\t\t){\n\t\t\t\tlet cacheKey = `${values[property].class}::${values[property].publidId}`;\n\n\t\t\t\tlet cached = Cache.load(cacheKey, false, 'model-type-repo');\n\n\t\t\t\tvalue = Bindable.makeBindable(new Model(this.repository));\n\n\t\t\t\tif(cached)\n\t\t\t\t{\n\t\t\t\t\tvalue = cached;\n\t\t\t\t}\n\n\t\t\t\tvalue.consume(values[property]);\n\n\t\t\t\tCache.store(\n\t\t\t\t\tcacheKey\n\t\t\t\t\t, value\n\t\t\t\t\t, 0\n\t\t\t\t\t, 'model-type-repo'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis[property] = value;\n\t\t}\n\t}\n}\n","import { View }     from './View';\nimport { Bindable } from './Bindable';\n\nexport class Persist\n{\n\tstatic watch(bucket, object)\n\t{\n\t\tlet subBinding = {};\n\t\tlet key        = `Persist::[${bucket}]`;\n\n\t\tlet _source = localStorage.getItem(key);\n\t\tlet source;\n\n\t\tobject = Bindable.makeBindable(object);\n\n\t\tlet debind = object.bindTo((v,k,t,d,p)=>{\n\t\t\tif(subBinding[k])\n\t\t\t{\n\t\t\t\tif(v !== p)\n\t\t\t\t{\n\t\t\t\t\twhile(subBinding[k].length)\n\t\t\t\t\t{\n\t\t\t\t\t\tsubBinding[k].pop()();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsubBinding[k] = [];\n\t\t\t}\n\n\t\t\tif(typeof v === 'object')\n\t\t\t{\n\t\t\t\tsubBinding[k].push(Persist.watch(`${bucket}::${k}`, v));\n\t\t\t}\n\n\t\t\tlocalStorage.setItem(key, JSON.stringify(object));\n\n\t\t}, {delay: 0});\n\n\t\tif(source = JSON.parse(_source))\n\t\t{\n\t\t\tfor(let i in source)\n\t\t\t{\n\t\t\t\tobject[i] = source[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn ()=>{\n\t\t\tdebind()\n\t\t\tfor(let i in subBinding)\n\t\t\t{\n\t\t\t\twhile(subBinding[i].length)\n\t\t\t\t{\n\t\t\t\t\tsubBinding[i].pop()();\n\t\t\t\t}\n\t\t\t}\n\t\t\tlocalStorage.removeItem(key);\n\t\t};\n\t}\n}\n","import { Bindable    } from './Bindable';\nimport { Router      } from './Router';\nimport { Cache       } from './Cache';\nimport { Model       } from './Model';\nimport { Bag         } from './Bag';\n\nimport { Form        } from '../form/Form';\nimport { FormWrapper } from '../form/multiField/FormWrapper';\n\nvar objects = {};\n\nexport class Repository\n{\n\tconstructor(uri)\n\t{\n\t\tthis.uri = uri;\n\t}\n\n\tget(id, refresh = false, args = {})\n\t{\n\t\tlet resourceUri = this.uri + '/' + id;\n\n\t\tlet cached = Cache.load(\n\t\t\tresourceUri + Router.queryToString(\n\t\t\t\tRouter.queryOver(args)\n\t\t\t\t, true\n\t\t\t)\n\t\t\t, false\n\t\t\t, 'model-uri-repo'\n\t\t);\n\n\t\tif(!refresh && cached)\n\t\t{\n\t\t\treturn Promise.resolve(cached);\n\t\t}\n\n\t\treturn Repository.request(resourceUri, args).then((response) => {\n\t\t\treturn this.extractModel(response.body);\n\t\t});\n\t}\n\n\tpage(page = 0, args)\n\t{\n\t\treturn Repository.request(this.uri, args).then((response) => {\n\t\t\tlet records = [];\n\n\t\t\tfor(let i in response.body)\n\t\t\t{\n\t\t\t\tlet record = response.body[i];\n\n\t\t\t\trecords.push(this.extractModel(record));\n\t\t\t}\n\n\t\t\tresponse.body = records;\n\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tedit(publicId = null, data = null, customFields = {})\n\t{\n\t\tlet resourceUri = this.uri + '/create';\n\n\t\tif(publicId)\n\t\t{\n\t\t\tresourceUri = this.uri + '/' + publicId + '/edit';\n\t\t}\n\n\t\t// console.log(resourceUri);\n\n\t\tif(!data)\n\t\t{\n\t\t\treturn Repository.request(resourceUri).then((response) => {\n\t\t\t\tlet form  = new Form(response.meta.form, customFields);\n\t\t\t\t// let model = this.extractModel(response.body);\n\n\t\t\t\treturn new FormWrapper(form, resourceUri, 'POST', customFields);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Repository.request(\n\t\t\t\tresourceUri\n\t\t\t\t, {api: 'json'}\n\t\t\t\t, data\n\t\t\t).then((response) => {\n\t\t\t\treturn response.body;\n\t\t\t});\n\t\t}\n\t}\n\n\textractModel(rawData)\n\t{\n\t\tlet model = Bindable.makeBindable(new Model(this));\n\n\t\tmodel.consume(rawData);\n\n\t\tlet resourceUri = this.uri + '/' + model.publicId;\n\n\t\t// Cache.store(\n\t\t// \tresourceUri\n\t\t// \t, model\n\t\t// \t, 10\n\t\t// \t, 'model-uri-repo'\n\t\t// );\n\n\t\tif(model.class)\n\t\t{\n\t\t\tlet cacheKey = `${model.class}::${model.publidId}`;\n\n\t\t\tlet cached = Cache.load(cacheKey, false, 'model-type-repo');\n\n\t\t\t// if(cached)\n\t\t\t// {\n\t\t\t// \tcached.consume(rawData);\n\t\t\t// \treturn cached;\n\t\t\t// }\n\n\t\t\t// Cache.store(\n\t\t\t// \tcacheKey\n\t\t\t// \t, model\n\t\t\t// \t, 10\n\t\t\t// \t, 'model-type-repo'\n\t\t\t// );\n\t\t}\n\n\t\treturn model;\n\t}\n\n\t// static get xhrs(){\n\t// \treturn this.xhrs = this.xhrs || [];\n\t// }\n\n\tstatic loadPage(args = {}, refresh = false) {\n\t\treturn this.request(this.uri, args).then((response) => {\n\t\t\treturn response;\n\t\t\t// return response.map((skeleton) => new Model(skeleton));\n\t\t});\n\t}\n\tstatic domCache(uri, content)\n\t{\n\t\t// console.log(uri, content);\n\t}\n\tstatic load(id, refresh = false) {\n\t\tthis.objects           = this.objects           || {};\n\t\tthis.objects[this.uri] = this.objects[this.uri] || {};\n\n\t\tif(this.objects[this.uri][id]) {\n\t\t\treturn Promise.resolve(this.objects[this.uri][id]);\n\t\t}\n\n\t\treturn this.request(this.uri + '/' + id).then((response) => {\n\t\t\t// let model = new Model(response);\n\t\t\t// return this.objects[this.uri][id] = model;\n\t\t});\n\t}\n\tstatic form(id = null) {\n\t\tlet uri = this.uri + '/' + 'create';\n\t\tif(id) {\n\t\t\turi = this.uri + '/' + id + '/edit';\n\t\t}\n\t\treturn this.request(uri).then((skeleton) => {\n\t\t\treturn skeleton;\n\t\t});\n\t}\n\tstatic clearCache() {\n\t\tif(this.objects && this.objects[this.uri]) {\n\t\t\tthis.objects[this.uri] = {};\n\t\t}\n\t}\n\n\tstatic encode(obj, namespace = null, formData = null)\n\t{\n\t\tif(!formData)\n\t\t{\n\t\t\tformData = new FormData();\n\t\t}\n\n\t\tfor(let i in obj)\n\t\t{\n\t\t\tlet ns = i;\n\n\t\t\tif(namespace)\n\t\t\t{\n\t\t\t\tns = `${namespace}[${ns}]`;\n\t\t\t}\n\n\t\t\tif(obj[i] && typeof obj[i] !== 'object')\n\t\t\t{\n\t\t\t\tformData.append(ns, obj[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.encode(obj[i], ns, formData);\n\t\t\t}\n\t\t}\n\n\t\treturn formData;\n\t}\n\n\tstatic onResponse(callback)\n\t{\n\t\tif(!this._onResponse)\n\t\t{\n\t\t\tthis._onResponse = new Bag;\n\t\t}\n\n\t\treturn this._onResponse.add(callback);\n\t}\n\n\tstatic request(uri, args = null, post = null, cache = true, options = {}) {\n\t\tlet type        = 'GET';\n\t\tlet queryString = '';\n\t\tlet formData    = null;\n\t\tlet queryArgs   = {};\n\n\t\tif(args) {\n\t\t\tqueryArgs = args;\n\t\t}\n\n\t\tif(!this._onResponse)\n\t\t{\n\t\t\tthis._onResponse = new Bag;\n\t\t}\n\n\t\tif(!this.runningRequests)\n\t\t{\n\t\t\tthis.runningRequests = {};\n\t\t}\n\n\t\tqueryArgs.api = queryArgs.api || 'json';\n\n\t\tqueryString = Object.keys(queryArgs).map((arg) => {\n\t\t\treturn encodeURIComponent(arg)\n\t\t\t+ '='\n\t\t\t+ encodeURIComponent(queryArgs[arg])\n\t\t}).join('&');\n\n\t\tlet fullUri    = uri;\n\t\t// let postString = '';\n\t\tfullUri = uri + '?' + queryString;\n\n\t\tif(!post && this.runningRequests[fullUri]) {\n\t\t\treturn this.runningRequests[fullUri];\n\t\t}\n\n\t\tif(post) {\n\t\t\tcache = false;\n\t\t\ttype = 'POST';\n\t\t\tif(post instanceof FormData)\n\t\t\t{\n\t\t\t\tformData = post;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tformData = this.encode(post);\n\t\t\t}\n\t\t\t// postString = Object.keys(post).map((arg) => {\n\t\t\t// \treturn encodeURIComponent(arg)\n\t\t\t// \t+ '='\n\t\t\t// \t+ encodeURIComponent(post[arg])\n\t\t\t// }).join('&');\n\t\t}\n\n\t\tlet xhr = new XMLHttpRequest();\n\n\t\tif('responseType' in options)\n\t\t{\n\t\t\txhr.responseType = options.responseType;\n\t\t}\n\n\t\tif(!post && cache && this.cache && this.cache[fullUri]) {\n\t\t\treturn Promise.resolve(this.cache[fullUri]);\n\t\t}\n\n\t\tlet tagCacheSelector = 'script[data-uri=\"'\n\t\t\t+ fullUri\n\t\t\t+ '\"]';\n\n\t\tlet tagCache = document.querySelector(tagCacheSelector);\n\n\t\tif(!post && cache && tagCache) {\n\t\t\tlet tagCacheContent = JSON.parse(tagCache.innerText);\n\n\t\t\treturn Promise.resolve(tagCacheContent);\n\t\t}\n\n\t\txhr.withCredentials = ('withCredentials' in options)\n\t\t\t? options.withCredentials\n\t\t\t: true;\n\n\t\tlet link = document.createElement(\"a\");\n    \tlink.href = fullUri;\n\n    \tif(!post) {\n\t\t\txhr.timeout        = options.timeout || 15000;\n\t\t\tthis.xhrs[fullUri] = xhr;\n\t\t}\n\n\t\tlet reqPromise = new Promise(((resolve, reject) => {\n\t\t\tif(post) {\n\t\t\t\tif('progressUp' in options) {\n\t\t\t\t\txhr.upload.onprogress = options.progressUp;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif('progressDown' in options) {\n\t\t\t\txhr.onprogress = options.progressDown;\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = () => {\n\t\t\t\tlet DONE = 4;\n\t\t\t\tlet OK = 200;\n\n\t\t\t\tlet response;\n\n\t\t\t\tif (xhr.readyState === DONE) {\n\n\t\t\t\t\tdelete this.xhrs[fullUri];\n\t\t\t\t\tdelete this.runningRequests[fullUri];\n\n\t\t\t\t\tif(!this.cache) {\n\t\t\t\t\t\tthis.cache = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(xhr.getResponseHeader(\"Content-Type\") == 'application/json'\n\t\t\t\t\t\t|| xhr.getResponseHeader(\"Content-Type\") == 'application/json; charset=utf-8'\n\t\t\t\t\t\t|| xhr.getResponseHeader(\"Content-Type\") == 'text/json'\n\t\t\t\t\t\t|| xhr.getResponseHeader(\"Content-Type\") == 'text/json; charset=utf-8'\n\t\t\t\t\t) {\n\t\t\t\t\t\tresponse = JSON.parse(xhr.responseText)\n\t\t\t\t\t\tif(response && response.code == 0) {\n\t\t\t\t\t\t\t// Repository.lastResponse = response;\n\n\t\t\t\t\t\t\tif(!post && cache) {\n\t\t\t\t\t\t\t\t// this.cache[fullUri] = response;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet tagCache = document.querySelector(\n\t\t\t\t\t\t\t\t'script[data-uri=\"'\n\t\t\t\t\t\t\t\t+ fullUri\n\t\t\t\t\t\t\t\t+ '\"]'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tlet prerendering = window.prerenderer || navigator.userAgent.match(/prerender/i);\n\n\t\t\t\t\t\t\tif(prerendering)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\twindow.prerenderer = window.prerenderer || true;\n\n\t\t\t\t\t\t\t\tif(!tagCache)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttagCache  = document.createElement('script');\n\t\t\t\t\t\t\t\t\ttagCache.type = 'text/json';\n\t\t\t\t\t\t\t\t\ttagCache.setAttribute('data-hack', 'application/ld+json-NOT!');\n\t\t\t\t\t\t\t\t\ttagCache.setAttribute('data-uri', fullUri);\n\t\t\t\t\t\t\t\t\tdocument.head.appendChild(tagCache);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// console.log(JSON.stringify(response));\n\n\t\t\t\t\t\t\t\ttagCache.innerText = JSON.stringify(response);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet onResponse = this._onResponse.items();\n\n\t\t\t\t\t\t\tfor(let i in onResponse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tonResponse[i](response, true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresponse._http = xhr.status;\n\n\t\t\t\t\t\t\tif (xhr.status === OK) {\n\t\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treject(response);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif(!post && cache) {\n\t\t\t\t\t\t\t\t// this.cache[fullUri] = response;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet onResponse = this._onResponse.items();\n\n\t\t\t\t\t\t\tfor(let i in onResponse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tonResponse[i](response, true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treject(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Repository.lastResponse = xhr.responseText;\n\n\t\t\t\t\t\tif(!post && cache) {\n\t\t\t\t\t\t\t// this.cache[fullUri] = xhr.responseText;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet onResponse = this._onResponse.items();\n\n\t\t\t\t\t\tfor(let i in onResponse)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonResponse[i](xhr, true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (xhr.status === OK) {\n\t\t\t\t\t\t\tresolve(xhr);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treject(xhr);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.open(type, fullUri, true);\n\n\t\t\tif(options.headers)\n\t\t\t{\n\t\t\t\tfor(const header in options.headers)\n\t\t\t\t{\n\t\t\t\t\txhr.setRequestHeader(header, options.headers[header]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.send(formData);\n\t\t}));\n\n\t\tif(!post) {\n\t\t\tthis.runningRequests[fullUri] = reqPromise;\n\t\t}\n\n\t\treturn reqPromise;\n\t}\n\tstatic cancel(regex = /^.$/) {\n\t\tfor(var i in this.xhrs) {\n\t\t\tif(!this.xhrs[i]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i.match(regex))\n\t\t\t{\n\t\t\t\tthis.xhrs[i].abort();\n\t\t\t\tdelete this.xhrs[i];\n\t\t\t}\n\t\t}\n\t\t// this.xhrs = [];\n\t}\n}\n\nRepository.xhrs = [];\n\n// Repository.lastResponse = null;\n","import { View  }  from './View';\nimport { Cache }  from './Cache';\nimport { Config } from './Config';\n\nexport class Router {\n\tstatic wait(view, event = 'DOMContentLoaded', node = document)\n\t{\n\t\tnode.addEventListener(event, () => {\n\t\t\tthis.listen(view);\n\t\t});\n\t}\n\tstatic listen(mainView)\n\t{\n\t\tlet routeHistory      = [location.toString()];\n\t\tlet prevHistoryLength = history.length;\n\n\t\tlet route = location.pathname + location.search;\n\n\t\tif(location.hash)\n\t\t{\n\t\t\troute += location.hash;\n\t\t}\n\n\t\tObject.assign(Router.query, Router.queryOver({}));\n\n\t\twindow.addEventListener('popstate', (event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif(routeHistory.length && prevHistoryLength == history.length)\n\t\t\t{\n\t\t\t\tif(location.toString() == routeHistory[routeHistory.length - 2])\n\t\t\t\t{\n\t\t\t\t\trouteHistory.pop();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\trouteHistory.push(location.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trouteHistory.push(location.toString());\n\t\t\t\tprevHistoryLength = history.length;\n\t\t\t}\n\n\t\t\tthis.match(location.pathname, mainView);\n\n\t\t\tfor(const i in this.query)\n\t\t\t{\n\t\t\t\tdelete this.query[i];\n\t\t\t}\n\n\t\t\tObject.assign(Router.query, Router.queryOver({}));\n\t\t});\n\n\t\tthis.go(route);\n\t}\n\tstatic go(route, silent)\n\t{\n\t\tconst configTitle = Config.get('title');\n\n\t\tif(configTitle)\n\t\t{\n\t\t\tdocument.title = configTitle;\n\t\t}\n\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\tif(silent === 2)\n\t\t\t\t{\n\t\t\t\t\thistory.replaceState(null, null, route)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thistory.pushState(null, null, route)\n\t\t\t\t}\n\n\t\t\t\tif(!silent)\n\t\t\t\t{\n\t\t\t\t\tif(silent === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.path = null;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.dispatchEvent(new Event('popstate'))\n\n\t\t\t\t\tif(route.substring(0,1) === '#')\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.dispatchEvent(new HashChangeEvent(\n\t\t\t\t\t\t\t'hashchange'\n\t\t\t\t\t\t));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(const i in this.query)\n\t\t\t\t{\n\t\t\t\t\tdelete this.query[i];\n\t\t\t\t}\n\n\t\t\t\tObject.assign(Router.query, Router.queryOver({}));\n\t\t\t}\n\t\t\t, 0\n\t\t);\n\t}\n\n\tstatic match(path, view, forceRefresh = false)\n\t{\n\t\tif(this.path === path && !forceRefresh)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet eventStart = new CustomEvent('cvRouteStart', {\n\t\t\tcancelable: true\n\t\t\t, detail:   {result, path, view}\n\t\t});\n\n\t\tlet current = view.args.content;\n\t\tlet routes  = view.routes;\n\n\t\tthis.path   = path;\n\t\t// this.query  = {};\n\n\t\tfor(const i in this.query)\n\t\t{\n\t\t\tdelete this.query[i];\n\t\t}\n\n\t\tlet query   = new URLSearchParams(location.search);\n\n\t\tthis.queryString = location.search;\n\n\t\tfor(let pair of query) {\n\t\t\tthis.query[ pair[0] ] = pair[1];\n\t\t}\n\n\t\tlet args = {}, selected = false, result = '';\n\n\t\tpath = path.substr(1).split('/');\n\n\t\tfor(let i in this.query)\n\t\t{\n\t\t\targs[i] = this.query[i];\n\t\t}\n\n\t\tL1: for(let i in routes)\n\t\t{\n\t\t\tlet route = i.split('/');\n\n\t\t\tif(route.length < path.length && route[route.length-1] !== '*')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tL2: for(let j in route)\n\t\t\t{\n\t\t\t\tif(route[j].substr(0, 1) == '%') {\n\t\t\t\t\tlet argName = null;\n\t\t\t\t\tlet groups  = /^%(\\w+)\\??/.exec(route[j]);\n\t\t\t\t\tif(groups && groups[1]) {\n\t\t\t\t\t\targName = groups[1];\n\t\t\t\t\t}\n\t\t\t\t\tif(!argName) {\n\t\t\t\t\t\tthrow new Error(`${route[j]} is not a valid argument segment in route \"${i}\"`);\n\t\t\t\t\t}\n\t\t\t\t\tif(!path[j]) {\n\t\t\t\t\t\tif(route[j].substr(route[j].length - 1, 1) == '?') {\n\t\t\t\t\t\t\targs[ argName ] = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcontinue L1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\targs[ argName ] = path[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(route[j] !== '*' && path[j] !== route[j]) {\n\t\t\t\t\tcontinue L1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!forceRefresh\n\t\t\t\t&& current\n\t\t\t\t&& (routes[i] instanceof Object)\n\t\t\t\t&& (current instanceof routes[i])\n\t\t\t\t&& !(routes[i] instanceof Promise)\n\t\t\t\t&& current.update(args)\n\t\t\t) {\n\t\t\t\tview.args.content = current;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tselected = i;\n\t\t\tresult   = routes[i];\n\n\t\t\tif(route[route.length-1] === '*')\n\t\t\t{\n\t\t\t\targs.pathparts = path.slice(route.length - 1);\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\n\n\t\tdocument.dispatchEvent(eventStart);\n\n\t\tif(selected in routes\n\t\t\t&& routes[selected] instanceof Object\n\t\t\t&& routes[selected].isView\n\t\t\t&& routes[selected].isView()\n\t\t){\n\t\t\tresult = new routes[selected](args);\n\n\t\t\tresult.root = ()=>view;\n\t\t}\n\t\telse if(routes[selected] instanceof Function)\n\t\t{\n\t\t\tresult = '';\n\n\t\t\tconst _result = routes[selected](args);\n\n\t\t\tif(_result instanceof Promise)\n\t\t\t{\n\t\t\t\tresult = false;\n\n\t\t\t\t_result.then(x=>{\n\t\t\t\t\tthis.update(view, path, x);\n\t\t\t\t}).catch(x=>{\n\t\t\t\t\tthis.update(view, path, x);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = _result;\n\t\t\t}\n\t\t}\n\t\telse if(routes[selected] instanceof Promise)\n\t\t{\n\t\t\tresult = false;\n\n\t\t\troutes[selected].then(x => {\n\t\t\t\tthis.update(view, path, x);\n\t\t\t}).catch(x=>{\n\t\t\t\tthis.update(view, path, x);\n\t\t\t});\n\t\t}\n\t\telse if(routes[selected] instanceof Object)\n\t\t{\n\t\t\tresult = new routes[selected](args);\n\t\t}\n\t\telse if(typeof routes[selected] == 'string')\n\t\t{\n\t\t\tresult = routes[selected];\n\t\t}\n\n\t\tthis.update(view, path, result);\n\n\t\t// if(view.args.content instanceof View)\n\t\t// {\n\t\t// \t// view.args.content.pause(true);\n\t\t// \tview.args.content.remove();\n\t\t// }\n\n\t\t// if(result !== false)\n\t\t// {\n\t\t// \tif(document.dispatchEvent(event))\n\t\t// \t{\n\t\t// \t\tview.args.content = result;\n\t\t// \t}\n\t\t// }\n\n\t\tif(result instanceof View)\n\t\t{\n\t\t\tresult.pause(false);\n\n\t\t\tresult.update(args, forceRefresh);\n\t\t}\n\n\t\treturn selected !== false;\n\t}\n\n\tstatic update(view, path, result)\n\t{\n\t\tlet event = new CustomEvent('cvRoute', {\n\t\t\tcancelable: true\n\t\t\t, detail:   {result, path, view}\n\t\t});\n\n\t\tlet eventEnd = new CustomEvent('cvRouteEnd', {\n\t\t\tcancelable: true\n\t\t\t, detail:   {result, path, view}\n\t\t});\n\n\t\tif(result !== false)\n\t\t{\n\t\t\tif(view.args.content instanceof View)\n\t\t\t{\n\t\t\t\t// view.args.content.pause(true);\n\t\t\t\tview.args.content.remove();\n\t\t\t}\n\n\t\t\tif(document.dispatchEvent(event))\n\t\t\t{\n\t\t\t\tview.args.content = result;\n\t\t\t}\n\n\t\t\tdocument.dispatchEvent(eventEnd);\n\t\t}\n\t}\n\tstatic clearCache() {\n\t\t// this.cache = {};\n\t}\n\tstatic queryOver(args = {})\n\t{\n\t\tlet params    = new URLSearchParams(location.search);\n\t\tlet finalArgs = {};\n\t\tlet query     = [];\n\n\t\tfor(let pair of params) {\n\t\t\tquery[ pair[0] ] = pair[1];\n\t\t}\n\n\t\tfor(let i in query)\n\t\t{\n\t\t\tfinalArgs[i] = query[i];\n\t\t}\n\n\t\tfor(let i in args)\n\t\t{\n\t\t\tfinalArgs[i] = args[i];\n\t\t}\n\n\t\tdelete finalArgs['api'];\n\n\t\treturn finalArgs;\n\t}\n\n\tstatic queryToString(args = {}, fresh = false)\n\t{\n\t\tlet parts = [], finalArgs = args;\n\n\t\tif(!fresh)\n\t\t{\n\t\t\tfinalArgs = this.queryOver(args);\n\t\t}\n\n\t\tfor(let i in finalArgs)\n\t\t{\n\t\t\tif(finalArgs[i] === '')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparts.push(i + '=' + encodeURIComponent(finalArgs[i]));\n\t\t}\n\n\t\treturn parts.join('&');\n\t}\n\n\tstatic setQuery(name, value, silent)\n\t{\n\t\tconst args = this.queryOver();\n\n\t\targs[name] = value;\n\n\t\tif(value === undefined)\n\t\t{\n\t\t\tdelete args[name];\n\t\t}\n\n\t\tconst queryString = this.queryToString(args, true);\n\n\t\tthis.go(\n\t\t\tlocation.pathname + ( queryString\n\t\t\t\t? '?' + queryString\n\t\t\t\t: ''\n\t\t\t)\n\t\t\t, silent\n\t\t);\n\t}\n}\n\nObject.defineProperty(Router, 'query', {\n\tconfigurable: false\n\t, writeable: false\n\t, value: {}\n});\n","import { Dom  } from './Dom';\nimport { Tag  } from './Tag';\nimport { View } from './View';\n\nexport class RuleSet\n{\n\tstatic add(selector, callback)\n\t{\n\t\tthis.globalRules = this.globalRules\n\t\t\t|| {};\n\t\tthis.globalRules[selector] = this.globalRules[selector]\n\t\t\t|| [];\n\n\t\tthis.globalRules[selector].push(callback);\n\n\t\treturn this;\n\t}\n\n\tstatic apply(doc = document, view = null)\n\t{\n\t\tfor(let selector in this.globalRules)\n\t\t{\n\t\t\tfor(let i in this.globalRules[selector])\n\t\t\t{\n\t\t\t\tconst callback = this.globalRules[selector][i];\n\t\t\t\tconst wrapped  = this.wrap(doc, callback, view);\n\t\t\t\tconst nodes    = doc.querySelectorAll(selector);\n\n\t\t\t\tfor(let node of nodes)\n\t\t\t\t{\n\t\t\t\t\twrapped(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tadd(selector, callback)\n\t{\n\t\tthis.rules = this.rules || {};\n\t\tthis.rules[selector] = this.rules[selector] || [];\n\n\t\tthis.rules[selector].push(callback);\n\n\t\treturn this;\n\t}\n\n\tapply(doc = document, view = null)\n\t{\n\t\tRuleSet.apply(doc, view);\n\n\t\tfor(let selector in this.rules)\n\t\t{\n\t\t\tfor(let i in this.rules[selector])\n\t\t\t{\n\t\t\t\tconst callback = this.rules[selector][i];\n\t\t\t\tconst wrapped  = RuleSet.wrap(doc, callback, view);\n\t\t\t\tconst nodes    = doc.querySelectorAll(selector);\n\n\t\t\t\tfor(let node of nodes)\n\t\t\t\t{\n\t\t\t\t\twrapped(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic wait(event = 'DOMContentLoaded', node = document)\n\t{\n\t\tlet listener = ((event, node) => () => {\n\t\t\tnode.removeEventListener(event, listener);\n\t\t\treturn this.apply();\n\t\t})(event, node);\n\n\t\tnode.addEventListener(event, listener);\n\t}\n\n\tstatic wrap(doc, callback, view = null)\n\t{\n\t\tif(callback instanceof View\n\t\t\t|| (callback\n\t\t\t\t&& callback.prototype\n\t\t\t\t&& callback.prototype instanceof View\n\t\t\t)\n\t\t){\n\t\t\tcallback = ((callback)=>()=>callback)(callback);\n\t\t}\n\n\t\treturn (element) => {\n\t\t\tif(typeof element.___cvApplied___ === 'undefined')\n\t\t\t{\n\t\t\t\tObject.defineProperty(\n\t\t\t\t\telement\n\t\t\t\t\t, '___cvApplied___'\n\t\t\t\t\t, {\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twritable: false,\n\t\t\t\t\t\tvalue: []\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfor(let i in element.___cvApplied___)\n\t\t\t{\n\t\t\t\tif(callback == element.___cvApplied___[i])\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet direct, parentView;\n\n\t\t\tif(view)\n\t\t\t{\n\t\t\t\tdirect = parentView = view;\n\n\t\t\t\tif(view.viewList)\n\t\t\t\t{\n\t\t\t\t\tparentView = view.viewList.parent;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tag     = new Tag(element, parentView, null, undefined, direct);\n\n\t\t\tconst parent  = tag.element.parentNode;\n\t\t\tconst sibling = tag.element.nextSibling;\n\n\t\t\tlet result    = callback(tag);\n\n\t\t\tif(result !== false)\n\t\t\t{\n\t\t\t\telement.___cvApplied___.push(callback);\n\t\t\t}\n\n\t\t\tif(result instanceof HTMLElement)\n\t\t\t{\n\t\t\t\tresult = new Tag(result);\n\t\t\t}\n\n\t\t\tif(result instanceof Tag)\n\t\t\t{\n\t\t\t\tif(!result.element.contains(tag.element))\n\t\t\t\t{\n\t\t\t\t\twhile(tag.element.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.element.appendChild(tag.element.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\ttag.remove();\n\t\t\t\t}\n\n\t\t\t\tif(sibling)\n\t\t\t\t{\n\t\t\t\t\tparent.insertBefore(result.element, sibling);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparent.appendChild(result.element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(result\n\t\t\t\t&& result.prototype\n\t\t\t\t&& (result.prototype instanceof View)\n\t\t\t){\n\t\t\t\tresult = new result();\n\t\t\t}\n\n\t\t\tif(result instanceof View)\n\t\t\t{\n\t\t\t\tif(view)\n\t\t\t\t{\n\t\t\t\t\tview.cleanup.push(((r)=>()=>{\n\t\t\t\t\t\tr.remove();\n\t\t\t\t\t})(result));\n\n\t\t\t\t\tresult.parent = view;\n\n\t\t\t\t\tview.cleanup.push(\n\t\t\t\t\t\tview.args.bindTo((v, k,t)=>{\n\t\t\t\t\t\t\tt[k] = v;\n\t\t\t\t\t\t\tresult.args[k] = v;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tview.cleanup.push(\n\t\t\t\t\t\tresult.args.bindTo((v, k, t, d)=>{\n\t\t\t\t\t\t\tt[k] = v;\n\t\t\t\t\t\t\tview.args[k] = v;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\ttag.clear();\n\t\t\t\tresult.render(tag.element);\n\t\t\t}\n\t\t};\n\t}\n}\n","import { Bindable } from './Bindable';\r\nexport class Tag\r\n{\r\n\tconstructor(element, parent, ref, index, direct)\r\n\t{\r\n\t\tthis.element = Bindable.makeBindable(element);\r\n\t\tthis.parent  = parent;\r\n\t\tthis.direct  = direct;\r\n\t\tthis.ref     = ref;\r\n\t\tthis.index   = index;\r\n\r\n\t\tthis.cleanup = [];\r\n\r\n\t\tthis.proxy   = Bindable.makeBindable(this);\r\n\r\n\t\t// this.detachListener = (event) => {\r\n\t\t// \treturn;\r\n\r\n\t\t// \tif(event.target != this.element)\r\n\t\t// \t{\r\n\t\t// \t\treturn;\r\n\t\t// \t}\r\n\t\t// \tif(event.path[event.path.length -1] !== window)\r\n\t\t// \t{\r\n\t\t// \t\treturn;\r\n\t\t// \t}\r\n\r\n\t\t// \tthis.element.removeEventListener('cvDomDetached', this.detachListener);\r\n\r\n\t\t// \tthis.remove();\r\n\t\t// };\r\n\r\n\t\t// this.element.addEventListener('cvDomDetached', this.detachListener);\r\n\r\n\t\t// return this.proxy;\r\n\t}\r\n\tremove()\r\n\t{\r\n\t\tBindable.clearBindings(this);\r\n\r\n\t\tlet cleanup;\r\n\r\n\t\twhile(cleanup = this.cleanup.shift())\r\n\t\t{\r\n\t\t\tcleanup();\r\n\t\t}\r\n\r\n\t\tthis.clear();\r\n\r\n\t\tif(!this.element)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet detachEvent = new Event('cvDomDetached');\r\n\r\n\t\tthis.element.dispatchEvent(detachEvent);\r\n\t\tthis.element.remove();\r\n\r\n\t\tthis.element = this.ref = this.parent = null;\r\n\t}\r\n\tclear()\r\n\t{\r\n\t\tif(!this.element)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet detachEvent = new Event('cvDomDetached');\r\n\r\n\t\twhile(this.element.firstChild)\r\n\t\t{\r\n\t\t\tthis.element.firstChild.dispatchEvent(detachEvent);\r\n\t\t\tthis.element.removeChild(this.element.firstChild);\r\n\t\t}\r\n\t}\r\n\tpause(paused = true)\r\n\t{\r\n\r\n\t}\r\n}\r\n","export class Theme\n{\n\tstatic get(key = '')\n\t{\n\t\tif(!this.instances)\n\t\t{\n\t\t\tthis.instances = {};\n\t\t}\n\n\t\tif(!this.instances[key])\n\t\t{\n\t\t\tthis.instances[key] = new this(key);\n\t\t}\n\n\t\treturn this.instances[key];\n\t}\n\n\tconstructor(key)\n\t{\n\t\tthis.key         = key;\n\t\tthis.viewMap     = new Map();\n\t\tthis.templateMap = new Map();\n\t\tthis.fallbacks   = [];\n\t}\n\n\tsetFallback(...fallbacks)\n\t{\n\t\tthis.fallbacks.push(...fallbacks);\n\n\t\treturn this;\n\t}\n\n\tsetView(type, viewType)\n\t{\n\t\tthis.viewMap.set(type, viewType);\n\n\t\treturn this;\n\t}\n\n\tgetView(object)\n\t{\n\t\treturn this.resolve(object, 'viewMap');\n\t}\n\n\tsetTemplate(type, viewType)\n\t{\n\t\tthis.viewMap.set(type, viewType);\n\n\t\treturn this;\n\t}\n\n\tgetTemplate(object)\n\t{\n\t\treturn this.resolve(object, 'templateMap');\n\t}\n\n\tresolve(object, whichMap)\n\t{\n\t\tconst type = object.constructor;\n\t\tconst map  = this[whichMap];\n\n\t\tif(map.has(type))\n\t\t{\n\t\t\treturn map.get(type);\n\t\t}\n\n\t\tlet result = false;\n\n\t\tfor(const [key, value] of map)\n\t\t{\n\t\t\tif(type.prototype instanceof key)\n\t\t\t{\n\t\t\t\tresult = value;\n\t\t\t}\n\t\t}\n\n\t\tif(!result)\n\t\t{\n\t\t\tfor(const theme of this.fallbacks)\n\t\t\t{\n\t\t\t\tif(result = theme.resolve(object, whichMap))\n\t\t\t\t{\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(result)\n\t\t{\n\t\t\tmap.set(type, result);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","import { Bindable } from './Bindable';\nimport { ViewList } from './ViewList';\nimport { Router   } from './Router';\nimport { Dom      } from './Dom';\nimport { Tag      } from './Tag';\nimport { Bag      } from './Bag';\nimport { RuleSet  } from './RuleSet';\n\nconst dontParse  = Symbol('dontParse');\nconst expandBind = Symbol('expandBind');\n\nlet moveIndex = 0;\n\nexport class View\n{\n\tget _id()\n\t{\n\t\tif (!this.__id)\n\t\t{\n\t\t\tObject.defineProperty(this, '__id', {\n\t\t\t\tconfigurable: false\n\t\t\t\t, writable:   false\n\t\t\t\t, value:      this.uuid()\n\t\t\t});\n\t\t}\n\n\t\treturn this.__id;\n\t}\n\n\tstatic from(template, args = {}, parent = null)\n\t{\n\t\tconst view = new this(args, parent);\n\n\t\tview.template = template;\n\n\t\treturn view;\n\t}\n\n\tconstructor(args = {}, mainView = null)\n\t{\n\t\tObject.defineProperty(this, '___VIEW___', {\n\t\t\tenumerable: false,\n\t\t\twritable:    true\n\t\t});\n\n\t\tthis.___VIEW___ = View;\n\n\t\tObject.defineProperty(this, 'args', {\n\t\t\tconfigurable: false\n\t\t\t, writable:   false\n\t\t\t, value:      Bindable.make(args)\n\t\t});\n\n\t\tconst _this = this;\n\n\t\tif(!this.args._id)\n\t\t{\n\t\t\tObject.defineProperty(this.args, '_id', {\n\t\t\t\tconfigurable: false\n\t\t\t\t, get: function() { return _this._id }\n\t\t\t});\n\t\t}\n\n\t\tthis.template  = ``;\n\t\tthis.document  = ``;\n\n\t\tthis.firstNode = null;\n\t\tthis.lastNode  = null;\n\t\tthis.nodes     = null;\n\n\t\tthis.cleanup   = [];\n\n\t\tthis._onRemove = new Bag((i,s,a) => {\n\t\t\t// console.log('View _onRemove', i, s, a);\n\t\t});\n\n\t\tthis.attach    = new Bag((i,s,a) => {});\n\t\tthis.detach    = new Bag((i,s,a) => {});\n\n\t\tthis.eventCleanup = [];\n\n\t\tthis.mainView  = null;\n\t\tthis.parent    = mainView;\n\t\tthis.viewList  = null;\n\t\tthis.viewLists = {};\n\n\t\tthis.withViews = {};\n\n\t\tthis.tags      = Bindable.make({});\n\n\t\tthis.intervals = [];\n\t\tthis.timeouts  = [];\n\t\tthis.frames    = [];\n\n\t\tthis.ruleSet     = new RuleSet;\n\t\tthis.preRuleSet  = new RuleSet;\n\t\tthis.subBindings = {};\n\n\t\tthis.subTemplates = {};\n\n\t\tthis.removed   = false;\n\t\tthis.preserve  = false;\n\n\t\tthis.interpolateRegex = /(\\[\\[((?:\\$+)?[\\w\\.\\|-]+)\\]\\])/g;\n\n\t\tthis.rendered = new Promise((accept, reject) => {\n\n\t\t\tObject.defineProperty(this, 'renderComplete', {\n\t\t\t\tconfigurable: false\n\t\t\t\t, writable:   false\n\t\t\t\t, value:      accept\n\t\t\t});\n\n\t\t});\n\n\t\treturn Bindable.make(this);\n\t}\n\n\tstatic isView()\n\t{\n\t\treturn View;\n\t}\n\n\tonFrame(callback)\n\t{\n\t\tlet stopped = false;\n\n\t\tconst cancel = () => {\n\t\t\tstopped = true;\n\t\t};\n\n\t\tlet c = (timestamp) => {\n\n\t\t\tif(this.removed || stopped)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.paused)\n\t\t\t{\n\t\t\t\tcallback(Date.now());\n\t\t\t}\n\n\n\t\t\trequestAnimationFrame(c);\n\t\t};\n\n\t\trequestAnimationFrame(() => c(Date.now()));\n\n\t\treturn cancel;\n\t}\n\n\tonNextFrame(callback)\n\t{\n\t\treturn requestAnimationFrame(() => callback(Date.now()));\n\t}\n\n\tonIdle(callback)\n\t{\n\t\treturn requestIdleCallback(() => callback(Date.now()));\n\t}\n\n\tonTimeout(time, callback)\n\t{\n\t\tlet wrappedCallback = () => {\n\t\t\tthis.timeouts[index].fired    = true;\n\t\t\tthis.timeouts[index].callback = null;\n\t\t\tcallback();\n\t\t};\n\t\tlet timeout = setTimeout(wrappedCallback, time)\n\t\tlet index   = this.timeouts.length;\n\n\t\tthis.timeouts.push({\n\t\t\ttimeout:    timeout\n\t\t\t, callback: wrappedCallback\n\t\t\t, time:     time\n\t\t\t, fired:    false\n\t\t\t, created:  (new Date).getTime()\n\t\t\t, paused:   false\n\t\t});\n\n\t\treturn timeout;\n\t}\n\n\tclearTimeout(timeout)\n\t{\n\t\tfor(var i in this.timeouts) {\n\t\t\tif(timeout === this.timeouts[i].timeout) {\n\t\t\t\tclearTimeout(this.timeouts[i].timeout);\n\n\t\t\t\tdelete this.timeouts[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tonInterval(time, callback)\n\t{\n\t\tlet timeout = setInterval(callback, time);\n\n\t\tthis.intervals.push({\n\t\t\ttimeout:    timeout\n\t\t\t, callback: callback\n\t\t\t, time:     time\n\t\t\t, paused:   false\n\t\t});\n\n\t\treturn timeout;\n\t}\n\n\tclearInterval(timeout)\n\t{\n\t\tfor(var i in this.intervals) {\n\t\t\tif(timeout === this.intervals[i].timeout) {\n\t\t\t\tclearInterval(this.intervals[i].timeout);\n\n\t\t\t\tdelete this.intervals[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tpause(paused = undefined)\n\t{\n\t\tif(paused === undefined)\n\t\t{\n\t\t\tthis.paused = !this.paused;\n\t\t}\n\n\t\tthis.paused = paused;\n\n\t\tif(this.paused)\n\t\t{\n\t\t\tfor(let i in this.timeouts)\n\t\t\t{\n\t\t\t\tif(this.timeouts[i].fired)\n\t\t\t\t{\n\t\t\t\t\tdelete this.timeouts[i];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(this.timeouts[i].timeout);\n\t\t\t}\n\n\t\t\tfor(let i in this.intervals)\n\t\t\t{\n\t\t\t\tclearInterval(this.intervals[i].timeout);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor(let i in this.timeouts)\n\t\t\t{\n\t\t\t\tif(!this.timeouts[i].timeout.paused)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(this.timeouts[i].fired)\n\t\t\t\t{\n\t\t\t\t\tdelete this.timeouts[i];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.timeouts[i].timeout = setTimeout(\n\t\t\t\t\tthis.timeouts[i].callback\n\t\t\t\t\t, this.timeouts[i].time\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfor(let i in this.intervals)\n\t\t\t{\n\t\t\t\tif(!this.intervals[i].timeout.paused)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.intervals[i].timeout.paused = false;\n\n\t\t\t\tthis.intervals[i].timeout = setInterval(\n\t\t\t\t\tthis.intervals[i].callback\n\t\t\t\t\t, this.intervals[i].time\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfor(let i in this.viewLists)\n\t\t{\n\t\t\tif(!this.viewLists[i])\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.viewLists[i].pause(!!paused);\n\t\t}\n\n\t\tfor(let i in this.tags)\n\t\t{\n\t\t\tif(Array.isArray(this.tags[i]))\n\t\t\t{\n\t\t\t\tfor(var j in this.tags[i])\n\t\t\t\t{\n\t\t\t\t\tthis.tags[i][j].pause(!!paused);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.tags[i].pause(!!paused);\n\t\t}\n\t}\n\n\trender(parentNode = null, insertPoint = null)\n\t{\n\t\tif(parentNode instanceof View)\n\t\t{\n\t\t\tparentNode = parentNode.firstNode.parentNode;\n\t\t}\n\n\t\tif(insertPoint instanceof View)\n\t\t{\n\t\t\tinsertPoint = insertPoint.firstNode;\n\t\t}\n\n\t\tif(this.firstNode)\n\t\t{\n\t\t\treturn this.reRender(parentNode, insertPoint);\n\t\t}\n\n\t\tconst templateParsed = (this.template instanceof DocumentFragment)\n\t\t\t? this.template.cloneNode(true)\n\t\t\t: View.templates.has(this.template);\n\n\t\tconst subDoc = templateParsed\n\t\t\t? ((this.template instanceof DocumentFragment)\n\t\t\t\t? templateParsed\n\t\t\t\t: View.templates.get(this.template).cloneNode(true)\n\t\t\t)\n\t\t\t: document.createRange().createContextualFragment(this.template);\n\n\t\tif(!templateParsed && !(this.template instanceof DocumentFragment))\n\t\t{\n\t\t\tView.templates.set(this.template, subDoc.cloneNode(true));\n\t\t}\n\n\t\tthis.mainView || this.preRuleSet.apply(subDoc, this);\n\n\t\tthis.mapTags(subDoc);\n\n\t\tthis.mainView || this.ruleSet.apply(subDoc, this);\n\n\t\tthis.nodes = [];\n\n\t\tif(window['devmode'] === true)\n\t\t{\n\t\t\tthis.firstNode = document.createComment(`Template ${this._id} Start`);\n\t\t\tthis.lastNode = document.createComment(`Template ${this._id} End`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.firstNode = document.createTextNode('');\n\t\t\tthis.lastNode = document.createTextNode('');\n\t\t}\n\n\t\tthis.nodes.push(\n\t\t\tthis.firstNode\n\t\t\t, ...Array.from(subDoc.childNodes)\n\t\t\t, this.lastNode\n\t\t);\n\n\t\tif(parentNode)\n\t\t{\n\t\t\tconst rootNode = parentNode.getRootNode();\n\t\t\tlet moveType   = 'internal';\n\t\t\tlet toRoot     = false;\n\n\t\t\tif(rootNode.isConnected)\n\t\t\t{\n\t\t\t\ttoRoot = true;\n\t\t\t\tmoveType = 'external';\n\t\t\t}\n\n\t\t\tif(insertPoint)\n\t\t\t{\n\t\t\t\tparentNode.insertBefore(this.firstNode, insertPoint);\n\t\t\t\tparentNode.insertBefore(this.lastNode, insertPoint);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparentNode.appendChild(this.firstNode);\n\t\t\t\tparentNode.appendChild(this.lastNode);\n\t\t\t}\n\n\t\t\tparentNode.insertBefore(subDoc, this.lastNode);\n\n\t\t\tmoveIndex++;\n\n\t\t\tif(toRoot)\n\t\t\t{\n\t\t\t\tthis.attached(rootNode, parentNode);\n\n\t\t\t\tconst attach = this.attach.items();\n\n\t\t\t\tfor(let i in attach)\n\t\t\t\t{\n\t\t\t\t\tattach[i](rootNode, parentNode);\n\t\t\t\t}\n\n\t\t\t\tthis.nodes.filter(n => n.nodeType !== Node.COMMENT_NODE).map(child => {\n\t\t\t\t\tchild.dispatchEvent(new Event('cvDomAttached', {\n\t\t\t\t\t\tbubbles: true, target: child\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.renderComplete(this.nodes);\n\n\t\tthis.postRender(parentNode);\n\n\t\treturn this.nodes;\n\t}\n\n\treRender(parentNode, insertPoint)\n\t{\n\t\tconst subDoc = new DocumentFragment;\n\n\t\tif(this.firstNode.isConnected)\n\t\t{\n\t\t\tconst detach = this.detach.items();\n\n\t\t\tfor(let i in detach)\n\t\t\t{\n\t\t\t\tdetach[i]();\n\t\t\t}\n\n\t\t\tthis.nodes.filter(n => n.nodeType === Node.ELEMENT_NODE).map(child => {\n\t\t\t\tchild.dispatchEvent(new Event('cvDomDetached', {\n\t\t\t\t\tbubbles: true, target: child\n\t\t\t\t}));\n\t\t\t});\n\t\t}\n\n\t\tsubDoc.append(...this.nodes);\n\t\t// subDoc.appendChild(this.firstNode);\n\t\t// subDoc.appendChild(this.lastNode);\n\n\t\tif(parentNode)\n\t\t{\n\t\t\tif(insertPoint)\n\t\t\t{\n\t\t\t\tparentNode.insertBefore(this.firstNode, insertPoint);\n\t\t\t\tparentNode.insertBefore(this.lastNode, insertPoint);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparentNode.appendChild(this.firstNode);\n\t\t\t\tparentNode.appendChild(this.lastNode);\n\t\t\t}\n\n\t\t\tparentNode.insertBefore(subDoc, this.lastNode);\n\n\t\t\tconst rootNode = parentNode.getRootNode();\n\n\t\t\tif(rootNode.isConnected)\n\t\t\t{\n\t\t\t\tthis.nodes.filter(n => n.nodeType === Node.ELEMENT_NODE).map(child => {\n\t\t\t\t\tchild.dispatchEvent(new Event('cvDomAttached', {\n\t\t\t\t\t\tbubbles: true, target: child\n\t\t\t\t\t}));\n\t\t\t\t});\n\n\t\t\t\tconst attach = this.attach.items();\n\n\t\t\t\tfor(let i in attach)\n\t\t\t\t{\n\t\t\t\t\tattach[i](rootNode, parentNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.nodes;\n\t}\n\n\tmapTags(subDoc)\n\t{\n\t\tDom.mapTags(subDoc, false, (tag, walker)=>{\n\n\t\t\tif(tag[dontParse])\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(tag.matches)\n\t\t\t{\n\t\t\t\ttag = this.mapInterpolatableTag(tag);\n\n\t\t\t\ttag = tag.matches('[cv-template]')\n\t\t\t\t\t&& this.mapTemplateTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-slot]')\n\t\t\t\t\t&& this.mapSlotTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-prerender]')\n\t\t\t\t\t&& this.mapPrendererTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-link]')\n\t\t\t\t\t&& this.mapLinkTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-attr]')\n\t\t\t\t\t&& this.mapAttrTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-expand]')\n\t\t\t\t\t&& this.mapExpandableTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-ref]')\n\t\t\t\t\t&& this.mapRefTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-on]')\n\t\t\t\t\t&& this.mapOnTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-each]')\n\t\t\t\t\t&& this.mapEachTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-bind]')\n\t\t\t\t\t&& this.mapBindTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-if]')\n\t\t\t\t\t&& this.mapIfTag(tag)\n\t\t\t\t\t|| tag;\n\n\t\t\t\ttag = tag.matches('[cv-with]')\n\t\t\t\t\t&& this.mapWithTag(tag)\n\t\t\t\t\t|| tag;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttag = this.mapInterpolatableTag(tag);\n\t\t\t}\n\n\t\t\tif(tag !== walker.currentNode)\n\t\t\t{\n\t\t\t\twalker.currentNode = tag;\n\t\t\t}\n\t\t});\n\t}\n\n\tmapExpandableTag(tag)\n\t{\n\t\t/*/\n\t\tconst tagCompiler = this.compileExpandableTag(tag);\n\n\t\tconst newTag = tagCompiler(this);\n\n\t\ttag.replaceWith(newTag);\n\n\t\treturn newTag;\n\t\t/*/\n\n\t\tlet existing = tag[expandBind];\n\n\t\tif(existing)\n\t\t{\n\t\t\texisting();\n\n\t\t\ttag[expandBind] = false;\n\t\t}\n\n\t\tconst [proxy, expandProperty] = Bindable.resolve(\n\t\t\tthis.args\n\t\t\t, tag.getAttribute('cv-expand')\n\t\t\t, true\n\t\t);\n\n\t\ttag.removeAttribute('cv-expand');\n\n\t\tconsole.log(proxy, expandProperty);\n\n\t\tthis.onRemove(tag[expandBind] = proxy[expandProperty].bindTo(\n\t\t\t(v,k,t,d,p) => {\n\n\t\t\t\tif(d || v === undefined)\n\t\t\t\t{\n\t\t\t\t\ttag.removeAttribute(k, v);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(v === null)\n\t\t\t\t{\n\t\t\t\t\ttag.setAttribute(k, '');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttag.setAttribute(k, v);\n\n\t\t\t}\n\t\t));\n\n\t\t// let expandProperty = tag.getAttribute('cv-expand');\n\t\t// let expandArg = Bindable.makeBindable(\n\t\t// \tthis.args[expandProperty] || {}\n\t\t// );\n\n\t\t// tag.removeAttribute('cv-expand');\n\n\t\t// for(let i in expandArg)\n\t\t// {\n\t\t// \tif(i === 'name' || i === 'type')\n\t\t// \t{\n\t\t// \t\tcontinue;\n\t\t// \t}\n\n\t\t// \tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n\t\t// \t\ttag.setAttribute(i, v);\n\t\t// \t})(tag,i));\n\n\t\t// \tthis.onRemove(()=>{\n\t\t// \t\tdebind();\n\t\t// \t\tif(expandArg.isBound())\n\t\t// \t\t{\n\t\t// \t\t\tBindable.clearBindings(expandArg);\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\n\t\treturn tag;\n\t\t//*/\n\t}\n\n\tcompileExpandableTag(sourceTag)\n\t{\n\t\treturn (bindingView) => {\n\n\t\t\tconst tag = sourceTag.cloneNode(true);\n\n\t\t\tlet expandProperty = tag.getAttribute('cv-expand');\n\t\t\tlet expandArg = Bindable.make(\n\t\t\t\tbindingView.args[expandProperty] || {}\n\t\t\t);\n\n\t\t\ttag.removeAttribute('cv-expand');\n\n\t\t\tfor(let i in expandArg)\n\t\t\t{\n\t\t\t\tif(i === 'name' || i === 'type')\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet debind = expandArg.bindTo(i, ((tag,i)=>(v)=>{\n\t\t\t\t\ttag.setAttribute(i, v);\n\t\t\t\t})(tag,i));\n\n\t\t\t\tbindingView.onRemove(()=>{\n\t\t\t\t\tdebind();\n\t\t\t\t\tif(expandArg.isBound())\n\t\t\t\t\t{\n\t\t\t\t\t\tBindable.clearBindings(expandArg);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn tag;\n\t\t};\n\t}\n\n\tmapAttrTag(tag)\n\t{\n\t\t//*/\n\t\tconst tagCompiler = this.compileAttrTag(tag);\n\n\t\tconst newTag = tagCompiler(this);\n\n\t\ttag.replaceWith(newTag);\n\n\t\treturn newTag;\n\n\t\t/*/\n\n\t\tlet attrProperty = tag.getAttribute('cv-attr');\n\n\t\ttag.removeAttribute('cv-attr');\n\n\t\tlet pairs = attrProperty.split(',');\n\t\tlet attrs = pairs.map((p) => p.split(':'));\n\n\t\tfor (let i in attrs)\n\t\t{\n\t\t\tlet proxy        = this.args;\n\t\t\tlet bindProperty = attrs[i][1];\n\t\t\tlet property     = bindProperty;\n\n\t\t\tif(bindProperty.match(/\\./))\n\t\t\t{\n\t\t\t\t[proxy, property] = Bindable.resolve(\n\t\t\t\t\tthis.args\n\t\t\t\t\t, bindProperty\n\t\t\t\t\t, true\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet attrib = attrs[i][0];\n\n\t\t\tthis.onRemove(proxy.bindTo(\n\t\t\t\tproperty\n\t\t\t\t, (v)=>{\n\t\t\t\t\tif(v == null)\n\t\t\t\t\t{\n\t\t\t\t\t\ttag.setAttribute(attrib, '');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttag.setAttribute(attrib, v);\n\t\t\t\t}\n\t\t\t));\n\t\t}\n\n\t\treturn tag;\n\n\t\t//*/\n\t}\n\n\tcompileAttrTag(sourceTag)\n\t{\n\t\tconst attrProperty = sourceTag.getAttribute('cv-attr');\n\n\t\tconst pairs = attrProperty.split(',');\n\t\tconst attrs = pairs.map((p) => p.split(':'));\n\n\t\tsourceTag.removeAttribute('cv-attr');\n\n\t\treturn (bindingView) => {\n\n\t\t\tconst tag = sourceTag.cloneNode(true);\n\n\t\t\tfor (let i in attrs)\n\t\t\t{\n\t\t\t\tconst bindProperty = attrs[i][1] || attrs[i][0];\n\n\t\t\t\tconst [proxy, property] = Bindable.resolve(\n\t\t\t\t\tbindingView.args\n\t\t\t\t\t, bindProperty\n\t\t\t\t\t, true\n\t\t\t\t);\n\n\t\t\t\tconst attrib = attrs[i][0];\n\n\t\t\t\tbindingView.onRemove(proxy.bindTo( property , (v,k,t,d) => {\n\n\t\t\t\t\tif(d || v === undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\ttag.removeAttribute(attrib, v);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(v === null)\n\t\t\t\t\t{\n\t\t\t\t\t\ttag.setAttribute(attrib, '');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\ttag.setAttribute(attrib, v);\n\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn tag;\n\t\t};\n\t}\n\n\tmapInterpolatableTag(tag)\n\t{\n\t\tlet regex = this.interpolateRegex;\n\n\t\tif(tag.nodeType === Node.TEXT_NODE)\n\t\t{\n\t\t\tlet original = tag.nodeValue;\n\n\t\t\tif(!this.interpolatable(original))\n\t\t\t{\n\t\t\t\treturn tag;\n\t\t\t}\n\n\t\t\tlet header   = 0;\n\t\t\tlet match;\n\n\t\t\twhile(match = regex.exec(original))\n\t\t\t{\n\t\t\t\tlet bindProperty = match[2];\n\n\t\t\t\tlet unsafeHtml = false;\n\t\t\t\tlet unsafeView = false;\n\n\t\t\t\tconst propertySplit = bindProperty.split('|');\n\t\t\t\tlet transformer = false;\n\n\t\t\t\tif(propertySplit.length > 1)\n\t\t\t\t{\n\t\t\t\t\ttransformer = this.stringTransformer(propertySplit.slice(1));\n\n\t\t\t\t\tbindProperty = propertySplit[0];\n\t\t\t\t}\n\n\t\t\t\tif(bindProperty.substr(0, 2) === '$$')\n\t\t\t\t{\n\t\t\t\t\tunsafeHtml   = true;\n\t\t\t\t\tunsafeView   = true;\n\t\t\t\t\tbindProperty = bindProperty.substr(2);\n\t\t\t\t}\n\n\t\t\t\tif(bindProperty.substr(0, 1) === '$')\n\t\t\t\t{\n\t\t\t\t\tunsafeHtml   = true;\n\t\t\t\t\tbindProperty = bindProperty.substr(1);\n\t\t\t\t}\n\n\t\t\t\tif(bindProperty.substr(0, 3) === '000')\n\t\t\t\t{\n\t\t\t\t\texpand       = true;\n\t\t\t\t\tbindProperty = bindProperty.substr(3);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet staticPrefix = original.substring(header, match.index);\n\n\t\t\t\theader = match.index + match[1].length;\n\n\t\t\t\tlet staticNode = document.createTextNode(staticPrefix);\n\n\t\t\t\tstaticNode[dontParse] = true;\n\n\t\t\t\ttag.parentNode.insertBefore(staticNode, tag);\n\n\t\t\t\tlet dynamicNode;\n\n\t\t\t\tif(unsafeHtml)\n\t\t\t\t{\n\t\t\t\t\tdynamicNode = document.createElement('div');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdynamicNode = document.createTextNode('');\n\t\t\t\t}\n\n\t\t\t\tdynamicNode[dontParse] = true;\n\n\t\t\t\tlet proxy    = this.args;\n\t\t\t\tlet property = bindProperty;\n\n\t\t\t\tif(bindProperty.match(/\\./))\n\t\t\t\t{\n\t\t\t\t\t[proxy, property] = Bindable.resolve(\n\t\t\t\t\t\tthis.args\n\t\t\t\t\t\t, bindProperty\n\t\t\t\t\t\t, true\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\ttag.parentNode.insertBefore(dynamicNode, tag);\n\n\t\t\t\tlet debind = proxy.bindTo(property, (v,k,t) => {\n\t\t\t\t\tif(t[k] instanceof View && t[k] !== v)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!t[k].preserve)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tt[k].remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdynamicNode.nodeValue = '';\n\n\t\t\t\t\tif(unsafeView && !(v instanceof View))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst unsafeTemplate = v;\n\n\t\t\t\t\t\tv = new View(this.args, this);\n\n\t\t\t\t\t\tv.template = unsafeTemplate;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(v instanceof View)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst onAttach = (parentNode) => {\n\t\t\t\t\t\t\tv.attached(parentNode);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.attach.add(onAttach);\n\n\t\t\t\t\t\tv.render(tag.parentNode, dynamicNode);\n\n\t\t\t\t\t\tconst cleanup = ()=>{\n\t\t\t\t\t\t\tif(!v.preserve)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tv.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.onRemove(cleanup);\n\n\t\t\t\t\t\tv.onRemove(() => {\n\t\t\t\t\t\t\tthis.attach.remove(onAttach);\n\t\t\t\t\t\t\tthis._onRemove.remove(cleanup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif(transformer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tv = transformer(v);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(v instanceof Object && v.__toString instanceof Function)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tv = v.__toString();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(unsafeHtml)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdynamicNode.innerHTML = v;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdynamicNode.nodeValue = v;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdynamicNode[dontParse] = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.onRemove(()=>{\n\t\t\t\t\tdebind();\n\t\t\t\t\tif(!proxy.isBound())\n\t\t\t\t\t{\n\t\t\t\t\t\tBindable.clearBindings(proxy);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet staticSuffix = original.substring(header);\n\n\t\t\tlet staticNode = document.createTextNode(staticSuffix);\n\n\t\t\tstaticNode[dontParse] = true;\n\n\t\t\ttag.parentNode.insertBefore(staticNode, tag);\n\n\t\t\ttag.nodeValue = '';\n\n\t\t}\n\n\t\tif(tag.nodeType === Node.ELEMENT_NODE)\n\t\t{\n\t\t\tfor (let i = 0; i < tag.attributes.length; i++)\n\t\t\t{\n\t\t\t\tif(!this.interpolatable(tag.attributes[i].value))\n\t\t\t\t{\n\t\t\t\t\t// console.log('!!', tag.attributes[i].value);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// console.log(tag.attributes[i].value);\n\n\t\t\t\tlet header    = 0;\n\t\t\t\tlet match;\n\t\t\t\tlet original  = tag.attributes[i].value;\n\t\t\t\tlet attribute = tag.attributes[i];\n\n\t\t\t\tlet bindProperties = {};\n\t\t\t\tlet segments       = [];\n\n\t\t\t\twhile(match = regex.exec(original))\n\t\t\t\t{\n\t\t\t\t\tsegments.push(original.substring(header, match.index));\n\n\t\t\t\t\tif(!bindProperties[match[2]])\n\t\t\t\t\t{\n\t\t\t\t\t\tbindProperties[match[2]] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindProperties[match[2]].push(segments.length);\n\n\t\t\t\t\tsegments.push(match[1]);\n\n\t\t\t\t\theader = match.index + match[1].length;\n\t\t\t\t}\n\n\t\t\t\tsegments.push(original.substring(header));\n\n\t\t\t\tfor(let j in bindProperties)\n\t\t\t\t{\n\t\t\t\t\tlet proxy    = this.args;\n\t\t\t\t\tlet property = j;\n\n\t\t\t\t\tconst propertySplit = j.split('|');\n\t\t\t\t\tlet transformer = false;\n\n\t\t\t\t\tlet longProperty = j;\n\n\t\t\t\t\tif(propertySplit.length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\ttransformer = this.stringTransformer(propertySplit.slice(1));\n\n\t\t\t\t\t\tproperty = propertySplit[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tif(property.match(/\\./))\n\t\t\t\t\t{\n\t\t\t\t\t\t[proxy, property] = Bindable.resolve(\n\t\t\t\t\t\t\tthis.args\n\t\t\t\t\t\t\t, property\n\t\t\t\t\t\t\t, true\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t// if(property.match(/\\./))\n\t\t\t\t\t// {\n\t\t\t\t\t// \t[proxy, property] = Bindable.resolve(\n\t\t\t\t\t// \t\tthis.args\n\t\t\t\t\t// \t\t, property\n\t\t\t\t\t// \t\t, true\n\t\t\t\t\t// \t);\n\t\t\t\t\t// }\n\n\t\t\t\t\t// console.log(this.args, property);\n\n\t\t\t\t\tconst matching = [];\n\t\t\t\t\tconst bindProperty = j;\n\n\t\t\t\t\tconst matchingSegments = bindProperties[longProperty];\n\n\n\t\t\t\t\tthis.onRemove(proxy.bindTo(property, (v, k, t, d) => {\n\t\t\t\t\t\tif(transformer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tv = transformer(v);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor(let i in bindProperties)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor(let j in bindProperties[longProperty])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsegments[ bindProperties[longProperty][j] ] = t[i];\n\n\t\t\t\t\t\t\t\tif(k === property)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsegments[ bindProperties[longProperty][j] ] = v;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttag.setAttribute(attribute.name, segments.join(''));\n\t\t\t\t\t}));\n\n\t\t\t\t\tthis.onRemove(()=>{\n\t\t\t\t\t\tif(!proxy.isBound())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBindable.clearBindings(proxy);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tag;\n\t}\n\n\tmapRefTag(tag)\n\t{\n\t\tlet refAttr = tag.getAttribute('cv-ref');\n\t\tlet [refProp, refClassname, refKey] = refAttr.split(':');\n\n\t\tif(!refClassname)\n\t\t{\n\t\t\trefClassname = 'curvature/base/Tag';\n\t\t}\n\n\t\tlet refClass = this.stringToClass(refClassname);\n\n\t\ttag.removeAttribute('cv-ref');\n\n\t\tObject.defineProperty(tag, '___tag___', {\n            enumerable: false,\n            writable: true\n        });\n\n        this.onRemove(()=>{\n        \ttag.___tag___ = null;\n\t\t\ttag.remove()\n\t\t});\n\n\t\tlet parent = this;\n\t\tlet direct = this;\n\n\t\tif(this.viewList)\n\t\t{\n\t\t\tparent = this.viewList.parent;\n\t\t\t// if(!this.viewList.parent.tags[refProp])\n\t\t\t// {\n\t\t\t// \tthis.viewList.parent.tags[refProp] = [];\n\t\t\t// }\n\n\t\t\t// let refKeyVal = this.args[refKey];\n\n\t\t\t// this.viewList.parent.tags[refProp][refKeyVal] = new refClass(\n\t\t\t// \ttag, this, refProp, refKeyVal\n\t\t\t// );\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// this.tags[refProp] = new refClass(\n\t\t\t// \ttag, this, refProp\n\t\t\t// );\n\t\t}\n\n\t\tlet tagObject = new refClass(\n\t\t\ttag, this, refProp, undefined, direct\n\t\t);\n\n\t\ttag.___tag___ = tagObject;\n\n\t\tthis.tags[refProp] = tag;\n\n\t\twhile(parent)\n\t\t{\n\t\t\tif(!parent.parent)\n\t\t\t{\n\t\t\t}\n\n\t\t\tlet refKeyVal = this.args[refKey];\n\n\t\t\tif(refKeyVal !== undefined)\n\t\t\t{\n\t\t\t\tif(!parent.tags[refProp])\n\t\t\t\t{\n\t\t\t\t\tparent.tags[refProp] = [];\n\t\t\t\t}\n\n\t\t\t\tparent.tags[refProp][refKeyVal] = tagObject;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparent.tags[refProp] = tagObject;\n\t\t\t}\n\n\t\t\tparent = parent.parent;\n\t\t}\n\n\t\treturn tag;\n\t}\n\n\tmapBindTag(tag)\n\t{\n\t\tlet bindArg  = tag.getAttribute('cv-bind');\n\t\tlet proxy    = this.args;\n\t\tlet property = bindArg;\n\t\tlet top      = null;\n\n\t\tif(bindArg.match(/\\./))\n\t\t{\n\t\t\t[proxy, property, top] = Bindable.resolve(\n\t\t\t\tthis.args\n\t\t\t\t, bindArg\n\t\t\t\t, true\n\t\t\t);\n\t\t}\n\n\t\tif(proxy !== this.args)\n\t\t{\n\t\t\tthis.subBindings[bindArg] = this.subBindings[bindArg] || [];\n\n\t\t\tthis.onRemove(this.args.bindTo(top, ()=>{\n\t\t\t\twhile(this.subBindings.length)\n\t\t\t\t{\n\t\t\t\t\tthis.subBindings.shift()();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tlet unsafeHtml = false;\n\n\t\tif(property.substr(0, 1) === '$')\n\t\t{\n\t\t\tproperty = property.substr(1);\n\t\t\tunsafeHtml = true;\n\t\t}\n\n\t\tlet debind = proxy.bindTo(property, (v,k,t,d,p) => {\n\n\t\t\tif(p instanceof View && p !== v)\n\t\t\t{\n\t\t\t\tp.remove();\n\t\t\t}\n\n\t\t\tconst autoChangedEvent = new CustomEvent('cvAutoChanged', {bubbles: true});\n\n\t\t\tif(tag.tagName === 'INPUT' || tag.tagName === 'SELECT' || tag.tagName === 'TEXTAREA')\n\t\t\t{\n\t\t\t\tlet type = tag.getAttribute('type');\n\t\t\t\tif(type && type.toLowerCase() === 'checkbox') {\n\t\t\t\t\ttag.checked = !!v;\n\t\t\t\t\ttag.dispatchEvent(autoChangedEvent);\n\t\t\t\t}\n\t\t\t\telse if(type && type.toLowerCase() === 'radio') {\n\t\t\t\t\ttag.checked = (v == tag.value);\n\t\t\t\t\ttag.dispatchEvent(autoChangedEvent);\n\t\t\t\t}\n\t\t\t\telse if(type !== 'file') {\n\t\t\t\t\tif(tag.tagName === 'SELECT')\n\t\t\t\t\t{\n\t\t\t\t\t\t// console.log(k, v, tag.outerHTML, tag.options.length);\n\t\t\t\t\t\tfor(let i in tag.options)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet option = tag.options[i];\n\n\t\t\t\t\t\t\tif(option.value == v)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttag.selectedIndex = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttag.value = v == null ? '' : v;\n\t\t\t\t\ttag.dispatchEvent(autoChangedEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor(const node of tag.childNodes)\n\t\t\t\t{\n\t\t\t\t\tnode.remove();\n\t\t\t\t}\n\n\t\t\t\tif(v instanceof View)\n\t\t\t\t{\n\t\t\t\t\tconst onAttach = (parentNode) => {\n\t\t\t\t\t\tv.attached(parentNode);\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.attach.add(onAttach);\n\n\t\t\t\t\tv.render(tag);\n\n\t\t\t\t\tv.onRemove(()=>this.attach.remove(onAttach));\n\t\t\t\t}\n\t\t\t\telse if(unsafeHtml)\n\t\t\t\t{\n\t\t\t\t\ttag.innerHTML = v;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttag.textContent = v;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\tif(proxy !== this.args)\n\t\t{\n\t\t\tthis.subBindings[bindArg].push(debind);\n\t\t}\n\n\t\tthis.onRemove(debind);\n\n\t\tconst type  = tag.getAttribute('type');\n\t\tconst multi = tag.getAttribute('multiple');\n\n\t\tlet inputListener = (event) => {\n\t\t\t// console.log(event, proxy, property, event.target.value);\n\n\t\t\tif(event.target !== tag)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(type && type.toLowerCase() === 'checkbox')\n\t\t\t{\n\t\t\t\tif (tag.checked) {\n\t\t\t\t\tproxy[property] = event.target.getAttribute('value');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tproxy[property] = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(event.target.matches('[contentEditable=true]'))\n\t\t\t{\n\t\t\t\tproxy[property] = event.target.innerHTML;\n\t\t\t}\n\t\t\telse if(type === 'file' && multi)\n\t\t\t{\n\t\t\t\tconst files   = Array.from(event.target.files);\n\t\t\t\tconst current = proxy[property] || Bindable.onDeck(proxy, property);\n\n\t\t\t\tif(!current || !files.length)\n\t\t\t\t{\n\t\t\t\t\tproxy[property] = files;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor(const i in files)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(files[i] !== current[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfiles[i].toJSON = () => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tname: file[i].name\n\t\t\t\t\t\t\t\t\t, size: file[i].size\n\t\t\t\t\t\t\t\t\t, type: file[i].type\n\t\t\t\t\t\t\t\t\t, date: file[i].lastModified\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcurrent[i] = files[i];\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if(type === 'file' && !multi)\n\t\t\t{\n\t\t\t\tconst file = event.target.files.item(0);\n\n\t\t\t\tfile.toJSON = () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: file.name\n\t\t\t\t\t\t, size: file.size\n\t\t\t\t\t\t, type: file.type\n\t\t\t\t\t\t, date: file.lastModified\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\tproxy[property] = file;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tproxy[property] = event.target.value;\n\t\t\t}\n\t\t};\n\n\t\tif(type === 'file' || type === 'radio')\n\t\t{\n\t\t\ttag.addEventListener('change', inputListener);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttag.addEventListener('input',         inputListener);\n\t\t\ttag.addEventListener('change',        inputListener);\n\t\t\ttag.addEventListener('value-changed', inputListener);\n\t\t}\n\n\t\tthis.onRemove( ((tag, eventListener) => ()=>{\n\t\t\tif(type === 'file' || type === 'radio')\n\t\t\t{\n\t\t\t\ttag.removeEventListener('change', inputListener);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttag.removeEventListener('input',         inputListener);\n\t\t\t\ttag.removeEventListener('change',        inputListener);\n\t\t\t\ttag.removeEventListener('value-changed', inputListener);\n\t\t\t}\n\n\t\t\ttag           = undefined;\n\t\t\teventListener = undefined;\n\t\t})(tag, inputListener));\n\n\t\ttag.removeAttribute('cv-bind');\n\n\t\treturn tag;\n\t}\n\n\tmapOnTag(tag)\n\t{\n\t\tconst referent = String(tag.getAttribute('cv-on'));\n\n\t\tlet action = referent.split(';').map(a=> a.split(':')).map((a)=>{\n\t\t\ta = a.map(a => a.trim());\n\n\t\t\tlet eventName    = a[0].trim();\n\n\t\t\tlet callbackName = a[1] || a[0];\n\t\t\tlet eventFlags   = String(a[2] || '');\n\t\t\tlet argList      = [];\n\t\t\tlet groups = /(\\w+)(?:\\(([$\\w\\s'\",]+)\\))?/.exec(callbackName);\n\n\t\t\t// if(!groups)\n\t\t\t// {\n\t\t\t// \tthrow new Error(\n\t\t\t// \t\t'Invalid event method referent: '\n\t\t\t// \t\t+ tag.getAttribute('cv-on')\n\t\t\t// \t);\n\t\t\t// }\n\n\t\t\tif(groups)\n\t\t\t{\n\t\t\t\tcallbackName = groups[1].replace(/(^[\\s\\n]+|[\\s\\n]+$)/, '');\n\n\t\t\t\tif(groups[2])\n\t\t\t\t{\n\t\t\t\t\targList = groups[2].split(',').map(s => s.trim());\n\t\t\t\t}\n\n\t\t\t\tif(groups.length)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!eventName)\n\t\t\t{\n\t\t\t\teventName = callbackName;\n\t\t\t}\n\n\t\t\tlet eventMethod;\n\t\t\tlet parent = this;\n\n\t\t\twhile(parent)\n\t\t\t{\n\t\t\t\tif(typeof parent[callbackName] === 'function')\n\t\t\t\t{\n\t\t\t\t\tlet _parent       = parent;\n\t\t\t\t\tlet _callBackName = callbackName;\n\t\t\t\t\teventMethod = (...args) => {\n\t\t\t\t\t\t_parent[ _callBackName ](...args);\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif(parent.parent)\n\t\t\t\t{\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet eventListener = ((event) => {\n\n\t\t\t\tlet argRefs = argList.map((arg) => {\n\t\t\t\t\tlet match;\n\t\t\t\t\tif(parseInt(arg) == arg)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg === 'event' || arg === '$event') {\n\t\t\t\t\t\treturn event;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg === '$view') {\n\t\t\t\t\t\treturn parent;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg === '$tag') {\n\t\t\t\t\t\treturn tag;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg === '$parent') {\n\t\t\t\t\t\treturn this.parent;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg === '$subview') {\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t}\n\t\t\t\t\telse if(arg in this.args) {\n\t\t\t\t\t\treturn this.args[arg];\n\t\t\t\t\t}\n\t\t\t\t\telse if(match = /^['\"](\\w+?)[\"']$/.exec(arg))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn match[1];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\n\t\t\t\tif(!(typeof eventMethod === 'function'))\n\t\t\t\t{\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`${callbackName} is not defined on View object.`\n\t\t\t\t\t\t+ \"\\n\" + `Tag:`\n\t\t\t\t\t\t+ \"\\n\" + `${tag.outerHTML}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\teventMethod(...argRefs);\n\t\t\t});\n\n\t\t\tlet eventOptions = {};\n\n\t\t\tif(eventFlags.includes('p'))\n\t\t\t{\n\t\t\t\teventOptions.passive = true;\n\t\t\t}\n\t\t\telse if(eventFlags.includes('P'))\n\t\t\t{\n\t\t\t\teventOptions.passive = false;\n\t\t\t}\n\n\t\t\tif(eventFlags.includes('c'))\n\t\t\t{\n\t\t\t\teventOptions.capture = true;\n\t\t\t}\n\t\t\telse if(eventFlags.includes('C'))\n\t\t\t{\n\t\t\t\teventOptions.capture = false;\n\t\t\t}\n\n\t\t\tif(eventFlags.includes('o'))\n\t\t\t{\n\t\t\t\teventOptions.once = true;\n\t\t\t}\n\t\t\telse if(eventFlags.includes('O'))\n\t\t\t{\n\t\t\t\teventOptions.once = false;\n\t\t\t}\n\n\t\t\tswitch(eventName)\n\t\t\t{\n\t\t\t\tcase '_init':\n\t\t\t\t\teventListener();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '_attach':\n\t\t\t\t\tthis.attach.add(eventListener);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase '_detach':\n\t\t\t\t\tthis.detach.add(eventListener);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\ttag.addEventListener(eventName, eventListener, eventOptions);\n\n\t\t\t\t\tthis.onRemove(()=>{\n\t\t\t\t\t\ttag.removeEventListener(eventName, eventListener, eventOptions);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn [eventName, callbackName, argList];\n\t\t});\n\n\t\ttag.removeAttribute('cv-on');\n\n\t\treturn tag;\n\t}\n\n\tmapLinkTag(tag)\n\t{\n\t\t/*/\n\t\tconst tagCompiler = this.compileLinkTag(tag);\n\n\t\tconst newTag = tagCompiler(this);\n\n\t\ttag.replaceWith(newTag);\n\n\t\treturn newTag;\n\t\t/*/\n\t\tlet linkAttr = tag.getAttribute('cv-link');\n\n\t\ttag.setAttribute('href', linkAttr);\n\n\t\tlet linkClick = (event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif(linkAttr.substring(0, 4) === 'http'\n\t\t\t\t|| linkAttr.substring(0, 2) === '//'\n\t\t\t){\n\t\t\t\twindow.open(tag.getAttribute('href', linkAttr));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tRouter.go(tag.getAttribute('href'));\n\t\t};\n\n\t\ttag.addEventListener('click', linkClick);\n\n\t\tthis.onRemove( ((tag, eventListener) => ()=>{\n\t\t\ttag.removeEventListener('click', eventListener);\n\t\t\ttag           = undefined;\n\t\t\teventListener = undefined;\n\t\t})(tag, linkClick));\n\n\t\ttag.removeAttribute('cv-link');\n\n\t\treturn tag;\n\t\t//*/\n\t}\n\n\tcompileLinkTag(sourceTag)\n\t{\n\t\tconst linkAttr = sourceTag.getAttribute('cv-link');\n\n\t\tsourceTag.removeAttribute('cv-link');\n\n\t\treturn (bindingView) => {\n\n\t\t\tconst tag = sourceTag.cloneNode(true);\n\n\t\t\ttag.setAttribute('href', linkAttr);\n\n\t\t\ttag.addEventListener('click', View.linkClicked);\n\n\t\t\tbindingView.onRemove(\n\t\t\t\t() => tag.removeEventListener(View.linkClicked)\n\t\t\t);\n\n\t\t\treturn tag;\n\t\t};\n\t}\n\n\tmapPrendererTag(tag)\n\t{\n\t\tlet prerenderAttr = tag.getAttribute('cv-prerender');\n\t\tlet prerendering  = window.prerenderer || navigator.userAgent.match(/prerender/i);\n\n\t\tif(prerendering)\n\t\t{\n\t\t\twindow.prerenderer = window.prerenderer || true;\n\t\t}\n\n\t\tif(prerenderAttr === 'never' && prerendering\n\t\t\t|| prerenderAttr === 'only' && !prerendering\n\t\t){\n\t\t\ttag.parentNode.removeChild(tag);\n\t\t}\n\n\t\treturn tag;\n\t}\n\n\tmapWithTag(tag)\n\t{\n\t\tlet withAttr = tag.getAttribute('cv-with');\n\t\tlet carryAttr = tag.getAttribute('cv-carry');\n\t\ttag.removeAttribute('cv-with');\n\t\ttag.removeAttribute('cv-carry');\n\n\t\tlet subTemplate = new DocumentFragment;\n\n\t\tArray.from(tag.childNodes).map(n => subTemplate.appendChild(n));\n\n\t\tlet carryProps = [];\n\n\t\tif(carryAttr)\n\t\t{\n\t\t\tcarryProps = carryAttr.split(',').map(s=>s.trim());\n\t\t}\n\n\t\tlet debind = this.args.bindTo(withAttr, (v,k,t,d) => {\n\t\t\tif(this.withViews[k])\n\t\t\t{\n\t\t\t\tthis.withViews[k].remove();\n\t\t\t}\n\n\t\t\twhile(tag.firstChild)\n\t\t\t{\n\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t}\n\n\t\t\tlet view = new View({}, this);\n\n\t\t\tthis.onRemove(((view)=>()=>{\n\t\t\t\tview.remove();\n\t\t\t})(view));\n\n\t\t\tview.template = subTemplate;\n\n\t\t\tfor(let i in carryProps)\n\t\t\t{\n\t\t\t\tlet debind = this.args.bindTo(carryProps[i], (v, k) => {\n\t\t\t\t\tview.args[k] = v;\n\t\t\t\t});\n\n\t\t\t\tview.onRemove(debind);\n\n\t\t\t\tthis.onRemove(()=>{\n\t\t\t\t\tdebind();\n\t\t\t\t\tview.remove();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i in v)\n\t\t\t{\n\t\t\t\tlet debind = v.bindTo(i, (v, k) => {\n\t\t\t\t\tview.args[k] = v;\n\t\t\t\t});\n\n\t\t\t\tthis.onRemove(()=>{\n\t\t\t\t\tdebind();\n\t\t\t\t\tif(!v.isBound())\n\t\t\t\t\t{\n\t\t\t\t\t\tBindable.clearBindings(v);\n\t\t\t\t\t}\n\t\t\t\t\tview.remove();\n\t\t\t\t});\n\n\t\t\t\tview.onRemove(()=>{\n\t\t\t\t\tdebind();\n\t\t\t\t\tif(!v.isBound())\n\t\t\t\t\t{\n\t\t\t\t\t\tBindable.clearBindings(v);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tview.render(tag);\n\n\t\t\tthis.withViews[k] = view;\n\t\t});\n\n\t\tthis.onRemove(debind);\n\n\t\treturn tag;\n\t}\n\n\tmapEachTag(tag)\n\t{\n\t\tconst eachAttr = tag.getAttribute('cv-each');\n\t\ttag.removeAttribute('cv-each');\n\n\t\tconst subTemplate = new DocumentFragment();\n\n\t\tArray.from(tag.childNodes).map(n => subTemplate.appendChild(n));\n\n\t\tconst [eachProp, asProp, keyProp] = eachAttr.split(':');\n\n\t\tconst debind = this.args.bindTo(eachProp, (v,k,t,d,p)=>{\n\t\t\tif(this.viewLists[eachProp])\n\t\t\t{\n\t\t\t\tthis.viewLists[eachProp].remove();\n\t\t\t}\n\n\t\t\tconst viewList = new ViewList(subTemplate, asProp, v, this, keyProp);\n\t\t\tconst viewListRemover = () => viewList.remove();\n\n\t\t\tthis.onRemove(viewListRemover);\n\n\t\t\tviewList.onRemove(()=>this._onRemove.remove(viewListRemover));\n\n\t\t\tconst debindA = this.args.bindTo((v,k,t,d)=>{\n\n\t\t\t\tif(k === '_id')\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tviewList.subArgs[k] = v;\n\t\t\t});\n\n\t\t\tconst debindB = viewList.args.bindTo((v,k,t,d,p)=>{\n\n\t\t\t\tif(k === '_id' || k === 'value' || k.substring(0,3) === '___')\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(k in this.args)\n\t\t\t\t{\n\t\t\t\t\tthis.args[k] = v;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tviewList.onRemove(debindA);\n\t\t\tviewList.onRemove(debindB);\n\n\t\t\tthis.onRemove(debindA);\n\t\t\tthis.onRemove(debindB);\n\n\t\t\twhile(tag.firstChild)\n\t\t\t{\n\t\t\t\ttag.removeChild(tag.firstChild);\n\t\t\t}\n\n\t\t\tthis.viewLists[eachProp] = viewList;\n\n\t\t\tviewList.render(tag);\n\t\t});\n\n\t\tthis.onRemove(debind);\n\n\t\treturn tag;\n\t}\n\n\tmapIfTag(tag)\n\t{\n\t\t/*/\n\t\tconst tagCompiler = this.compileIfTag(tag);\n\n\t\tconst newTag = tagCompiler(this);\n\n\t\ttag.replaceWith(newTag);\n\n\t\treturn newTag;\n\n\t\t/*/\n\n\t\tconst sourceTag = tag;\n\n\t\tlet ifProperty = sourceTag.getAttribute('cv-if');\n\t\tlet inverted   = false;\n\n\t\tsourceTag.removeAttribute('cv-if');\n\n\t\tif(ifProperty.substr(0, 1) === '!')\n\t\t{\n\t\t\tifProperty = ifProperty.substr(1);\n\t\t\tinverted   = true;\n\t\t}\n\n\t\tconst subTemplate = new DocumentFragment;\n\n\t\tArray.from(sourceTag.childNodes).map(\n\t\t\tn => subTemplate.appendChild(n)\n\t\t\t// n => subTemplate.appendChild(n.cloneNode(true))\n\t\t);\n\n\t\tconst bindingView = this;\n\n\t\tconst ifDoc = new DocumentFragment;\n\n\t\tlet view = new View(this.args, bindingView);\n\n\t\tview.template = subTemplate;\n\t\t// view.parent   = bindingView;\n\n\t\t// bindingView.syncBind(view);\n\n\t\tlet proxy    = bindingView.args;\n\t\tlet property = ifProperty;\n\n\t\tif(ifProperty.match(/\\./))\n\t\t{\n\t\t\t[proxy, property] = Bindable.resolve(\n\t\t\t\tbindingView.args\n\t\t\t\t, ifProperty\n\t\t\t\t, true\n\t\t\t);\n\t\t}\n\n\t\tlet hasRendered = false;\n\n\t\tconst propertyDebind = proxy.bindTo(property, (v,k) => {\n\n\t\t\tif(!hasRendered)\n\t\t\t{\n\t\t\t\tlet initValue = proxy[property];\n\n\t\t\t\tconst renderDoc  = (!!initValue ^ !!inverted)\n\t\t\t\t\t? tag\n\t\t\t\t\t: ifDoc;\n\n\t\t\t\tview.render(renderDoc);\n\n\t\t\t\thasRendered = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(Array.isArray(v))\n\t\t\t{\n\t\t\t\tv = !!v.length;\n\t\t\t}\n\n\t\t\tif(inverted)\n\t\t\t{\n\t\t\t\tv = !v;\n\t\t\t}\n\n\t\t\tif(v)\n\t\t\t{\n\t\t\t\ttag.appendChild(ifDoc);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tview.nodes.map(n=>ifDoc.appendChild(n));\n\t\t\t}\n\n\t\t});\n\n\t\t// const propertyDebind = this.args.bindChain(property, onUpdate);\n\n\t\tbindingView.onRemove(propertyDebind);\n\n\t\tlet bindableDebind = () => {\n\n\t\t\tif(!proxy.isBound())\n\t\t\t{\n\t\t\t\tBindable.clearBindings(proxy);\n\t\t\t}\n\n\t\t};\n\n\t\tlet viewDebind = ()=>{\n\t\t\tpropertyDebind();\n\t\t\tbindableDebind();\n\t\t\tbindingView._onRemove.remove(propertyDebind);\n\t\t\tbindingView._onRemove.remove(bindableDebind);\n\t\t};\n\n\t\tbindingView.onRemove(viewDebind);\n\n\t\treturn tag;\n\n\t\t//*/\n\t}\n\n\tcompileIfTag(sourceTag)\n\t{\n\t\tlet ifProperty = sourceTag.getAttribute('cv-if');\n\t\tlet inverted   = false;\n\n\t\tsourceTag.removeAttribute('cv-if');\n\n\t\tif(ifProperty.substr(0, 1) === '!')\n\t\t{\n\t\t\tifProperty = ifProperty.substr(1);\n\t\t\tinverted   = true;\n\t\t}\n\n\t\tconst subTemplate = new DocumentFragment;\n\n\t\tArray.from(sourceTag.childNodes).map(\n\t\t\tn => subTemplate.appendChild(n.cloneNode(true))\n\t\t);\n\n\t\treturn (bindingView) => {\n\n\t\t\tconst tag = sourceTag.cloneNode();\n\n\t\t\tconst ifDoc = new DocumentFragment;\n\n\t\t\tlet view = new View({}, bindingView);\n\n\t\t\tview.template = subTemplate;\n\t\t\t// view.parent   = bindingView;\n\n\t\t\tbindingView.syncBind(view);\n\n\t\t\tlet proxy    = bindingView.args;\n\t\t\tlet property = ifProperty;\n\n\t\t\tif(ifProperty.match(/\\./))\n\t\t\t{\n\t\t\t\t[proxy, property] = Bindable.resolve(\n\t\t\t\t\tbindingView.args\n\t\t\t\t\t, ifProperty\n\t\t\t\t\t, true\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet hasRendered = false;\n\n\t\t\tconst propertyDebind = proxy.bindTo(property, (v,k) => {\n\n\t\t\t\tif(!hasRendered)\n\t\t\t\t{\n\t\t\t\t\tconst renderDoc = (bindingView.args[property] || inverted)\n\t\t\t\t\t\t? tag : ifDoc;\n\n\t\t\t\t\tview.render(renderDoc);\n\n\t\t\t\t\thasRendered = true;\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(Array.isArray(v))\n\t\t\t\t{\n\t\t\t\t\tv = !!v.length;\n\t\t\t\t}\n\n\t\t\t\tif(inverted)\n\t\t\t\t{\n\t\t\t\t\tv = !v;\n\t\t\t\t}\n\n\t\t\t\tif(v)\n\t\t\t\t{\n\t\t\t\t\ttag.appendChild(ifDoc);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tview.nodes.map(n=>ifDoc.appendChild(n));\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// let cleaner = bindingView;\n\n\t\t\t// while(cleaner.parent)\n\t\t\t// {\n\t\t\t// \tcleaner = cleaner.parent;\n\t\t\t// }\n\n\t\t\tbindingView.onRemove(propertyDebind);\n\n\t\t\tlet bindableDebind = () => {\n\n\t\t\t\tif(!proxy.isBound())\n\t\t\t\t{\n\t\t\t\t\tBindable.clearBindings(proxy);\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tlet viewDebind = ()=>{\n\t\t\t\tpropertyDebind();\n\t\t\t\tbindableDebind();\n\t\t\t\tbindingView._onRemove.remove(propertyDebind);\n\t\t\t\tbindingView._onRemove.remove(bindableDebind);\n\t\t\t};\n\n\t\t\tview.onRemove(viewDebind);\n\n\t\t\treturn tag;\n\t\t};\n\t}\n\n\tmapTemplateTag(tag)\n\t{\n\t\tconst templateName = tag.getAttribute('cv-template');\n\n\t\ttag.removeAttribute('cv-template');\n\n\t\tthis.subTemplates[ templateName ] = () => {\n\t\t\treturn tag.tagName === 'TEMPLATE'\n\t\t\t\t? tag.content.cloneNode(true)\n\t\t\t\t: new DocumentFragment(tag.innerHTML);\n\t\t};\n\n\t\treturn tag;\n\t}\n\n\tmapSlotTag(tag)\n\t{\n\t\tconst templateName = tag.getAttribute('cv-slot');\n\t\tlet getTemplate    = this.subTemplates[ templateName ];\n\n\t\tif(!getTemplate)\n\t\t{\n\t\t\tlet parent = this;\n\n\t\t\twhile(parent)\n\t\t\t{\n\t\t\t\tgetTemplate = parent.subTemplates[ templateName ];\n\n\t\t\t\tif(getTemplate)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tparent = this.parent;\n\t\t\t}\n\n\t\t\tif(!getTemplate)\n\t\t\t{\n\t\t\t\tconsole.error(`Template ${templateName} not found.`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst template = getTemplate();\n\n\t\ttag.removeAttribute('cv-slot');\n\n\t\twhile(tag.firstChild)\n\t\t{\n\t\t\ttag.firstChild.remove();\n\t\t}\n\n\t\ttag.appendChild(template);\n\n\t\treturn tag;\n\t}\n\n\t// compileTag(sourceTag)\n\t// {\n\t// \treturn (bindingView) => {\n\n\t// \t\tconst tag = sourceTag.cloneNode(true);\n\n\t// \t\treturn tag;\n\n\t// \t};\n\t// }\n\n\tsyncBind(subView)\n\t{\n\t\tlet debindA = this.args.bindTo((v,k,t,d)=>{\n\t\t\tif(k === '_id')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(subView.args[k] !== v)\n\t\t\t{\n\t\t\t\tsubView.args[k] = v;\n\t\t\t}\n\t\t});\n\n\t\t// for(let i in this.args)\n\t\t// {\n\t\t// \tif(i == '_id')\n\t\t// \t{\n\t\t// \t\tcontinue;\n\t\t// \t}\n\n\t\t// \tsubView.args[i] = this.args[i];\n\t\t// }\n\n\t\tlet debindB = subView.args.bindTo((v,k,t,d,p)=>{\n\n\t\t\tif(k === '_id')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet newRef = v;\n\t\t\tlet oldRef = p;\n\n\t\t\tif(newRef instanceof View)\n\t\t\t{\n\t\t\t\tnewRef = newRef.___ref___;\n\t\t\t}\n\n\t\t\tif(oldRef instanceof View)\n\t\t\t{\n\t\t\t\toldRef = oldRef.___ref___;\n\t\t\t}\n\n\t\t\tif(newRef !== oldRef && oldRef instanceof View)\n\t\t\t{\n\t\t\t\tp.remove();\n\t\t\t}\n\n\t\t\tif(k in this.args)\n\t\t\t{\n\t\t\t\tthis.args[k] = v;\n\t\t\t}\n\n\t\t});\n\n\t\tthis.onRemove(debindA);\n\t\tthis.onRemove(debindB);\n\n\t\tsubView.onRemove(()=>{\n\t\t\tthis._onRemove.remove(debindA);\n\t\t\tthis._onRemove.remove(debindB);\n\t\t});\n\t}\n\n\tpostRender(parentNode)\n\t{\n\n\t}\n\n\tattached(parentNode)\n\t{\n\n\t}\n\n\tinterpolatable(str)\n\t{\n\t\treturn !!(String(str).match(this.interpolateRegex));\n\t}\n\n\tuuid()\n\t{\n\t\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(\n\t\t\t/[018]/g\n\t\t\t, c => (\n\t\t\t\tc ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4\n\t\t\t).toString(16)\n\t\t);\n\t}\n\n\tremove(now = false)\n\t{\n\t\tconst remover = () => {\n\n\t\t\tthis.firstNode = this.lastNode = undefined;\n\n\t\t\tfor(let i in this.nodes)\n\t\t\t{\n\t\t\t\tthis.nodes[i].dispatchEvent(new Event('cvDomDetached'));\n\t\t\t\tthis.nodes[i].remove();\n\t\t\t}\n\n\t\t\t// Bindable.clearBindings(this.args);\n\n\t\t};\n\n\t\tif(now)\n\t\t{\n\t\t\tremover();\n\t\t}\n\t\telse\n\t\t{\n\t\t\trequestAnimationFrame(remover);\n\t\t}\n\n\t\tconst callbacks = this._onRemove.items();\n\n\t\tfor(let callback of callbacks)\n\t\t{\n\t\t\tthis._onRemove.remove(callback);\n\n\t\t\tcallback();\n\t\t}\n\n\t\tlet cleanup;\n\n\t\twhile(cleanup = this.cleanup.shift())\n\t\t{\n\t\t\tcleanup && cleanup();\n\t\t}\n\n\t\tfor(let i in this.viewLists)\n\t\t{\n\t\t\tif(!this.viewLists[i])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.viewLists[i].remove();\n\t\t}\n\n\t\tthis.viewLists = [];\n\n\t\tfor(let i in this.timeouts)\n\t\t{\n\t\t\tclearInterval(this.timeouts[i].timeout);\n\t\t\tdelete this.timeouts[i];\n\t\t}\n\n\t\tfor(var i in this.intervals)\n\t\t{\n\t\t\tclearInterval(this.intervals[i].timeout);\n\t\t\tdelete this.intervals[i];\n\t\t}\n\n\t\tthis.removed = true;\n\n\t}\n\n\tfindTag(selector)\n\t{\n\t\tfor(let i in this.nodes)\n\t\t{\n\t\t\tlet result;\n\n\t\t\tif(!this.nodes[i].querySelector)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this.nodes[i].matches(selector))\n\t\t\t{\n\t\t\t\treturn this.nodes[i];\n\t\t\t}\n\n\t\t\tif(result = this.nodes[i].querySelector(selector))\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\tfindTags(selector)\n\t{\n\t\treturn this.nodes,map(n=> n.querySelectorAll(selector)).flat();\n\t}\n\n\tonRemove(callback)\n\t{\n\t\tthis._onRemove.add(callback);\n\t}\n\n\tupdate()\n\t{\n\n\t}\n\n\tbeforeUpdate(args)\n\t{\n\n\t}\n\n\tafterUpdate(args)\n\t{\n\n\t}\n\n\tstringTransformer(methods)\n\t{\n\t\treturn (x) => {\n\n\t\t\tfor(const m in methods)\n\t\t\t{\n\t\t\t\tlet parent   = this;\n\t\t\t\tconst method = methods[m];\n\n\t\t\t\twhile(parent && !parent[ method ])\n\t\t\t\t{\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\n\t\t\t\tif(!parent)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tx = parent[ methods[m] ](x);\n\t\t\t}\n\n\t\t\treturn x;\n\t\t};\n\t}\n\n\tstringToClass(refClassname)\n\t{\n\t\tif(View.refClasses.has(refClassname))\n\t\t{\n\t\t\treturn View.refClasses.get(refClassname);\n\t\t}\n\n\t\tlet refClassSplit           = refClassname.split('/');\n\t\tlet refShortClassname       = refClassSplit[ refClassSplit.length - 1 ];\n\n\t\tlet refClass                = require(refClassname);\n\n\t\tView.refClasses.set(refClassname, refClass[refShortClassname]);\n\n\t\treturn refClass[refShortClassname];\n\t}\n\n\tpreventParsing(node)\n\t{\n\t\tnode[dontParse] = true;\n\t}\n\n\ttoString()\n\t{\n\t\treturn this.nodes.map(n => n.outerHTML).join(' ');\n\t}\n}\n\nObject.defineProperty(View, 'templates', {\n\tenumerable: false,\n\twritable: false,\n\tvalue: new Map()\n});\n\nObject.defineProperty(View, 'refClasses', {\n\tenumerable: false,\n\twritable: false,\n\tvalue: new Map()\n});\n\nObject.defineProperty(View, 'linkClicked', (event) => {\n\n\tevent.preventDefault();\n\n\tconst href = event.target.getAttribute('href');\n\n\tif(href.substring(0, 4) === 'http'|| href.substring(0, 2) === '//')\n\t{\n\t\twindow.open(href);\n\n\t\treturn;\n\t}\n\n\tRouter.go(href);\n\n});\n","import { Bindable } from './Bindable';\nimport { View     } from './View';\nimport { Bag      } from './Bag';\n\nexport class ViewList\n{\n\tconstructor(template, subProperty, list, parent, keyProperty = null)\n\t{\n\t\tthis.removed      = false;\n\t\tthis.args         = Bindable.makeBindable({});\n\t\tthis.args.value   = Bindable.makeBindable(list || {});\n\t\tthis.subArgs = Bindable.makeBindable({});\n\t\tthis.views        = [];\n\t\tthis.cleanup      = [];\n\t\tthis._onRemove    = new Bag();\n\t\tthis.template     = template;\n\t\tthis.subProperty  = subProperty;\n\t\tthis.keyProperty  = keyProperty;\n\t\tthis.tag          = null;\n\t\tthis.paused       = false;\n\t\tthis.parent       = parent;\n\t\tthis.rendered     = new Promise((accept, reject) => {\n\t\t\tObject.defineProperty(this, 'renderComplete', {\n\t\t\t\tconfigurable: false\n\t\t\t\t, writable:   true\n\t\t\t\t, value:      accept\n\t\t\t});\n\t\t});\n\n\t\tthis.willReRender = false;\n\n\t\tthis.args.___before((t,e,s,o)=>{\n\t\t\tif(e == 'bindTo')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.paused = true;\n\t\t});\n\n\t\tthis.args.___after((t,e,s,o) => {\n\t\t\tif(e == 'bindTo')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.paused = s.length > 1;\n\n\t\t\tthis.reRender();\n\t\t});\n\n\t\tlet debind = this.args.value.bindTo((v, k, t, d) => {\n\n\t\t\tif(this.paused)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet kk = k;\n\n\t\t\tif(isNaN(k))\n\t\t\t{\n\t\t\t\tkk = '_' + k;\n\t\t\t}\n\n\t\t\tif(d)\n\t\t\t{\n\t\t\t\tif(this.views[kk])\n\t\t\t\t{\n\t\t\t\t\tthis.views[kk].remove();\n\t\t\t\t}\n\n\t\t\t\tdelete this.views[kk];\n\t\t\t\t// this.views.splice(k,1);\n\n\t\t\t\tfor(let i in this.views)\n\t\t\t\t{\n\t\t\t\t\tif(typeof i === 'string')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.views[i].args[ this.keyProperty ] = i.substr(1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.views[i].args[ this.keyProperty ] = i;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(!this.views[kk] && !this.willReRender)\n\t\t\t{\n\t\t\t\tthis.willReRender = requestAnimationFrame(()=>{\n\t\t\t\t\tthis.reRender();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(this.views[kk] && this.views[kk].args)\n\t\t\t{\n\t\t\t\tthis.views[kk].args[ this.keyProperty ] = k;\n\t\t\t\tthis.views[kk].args[ this.subProperty ] = v;\n\t\t\t}\n\t\t});\n\n\t\tthis._onRemove.add(debind);\n\t}\n\n\trender(tag)\n\t{\n\t\tconst renders = [];\n\n\t\tfor(const view of this.views)\n\t\t{\n\t\t\tview.render(tag);\n\n\t\t\trenders.push(view.rendered.then(()=>view));\n\t\t}\n\n\t\tthis.tag = tag;\n\n\t\tPromise.all(renders).then(views => this.renderComplete(views));\n\t}\n\n\treRender()\n\t{\n\t\tif(this.paused || !this.tag)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet views = [];\n\n\t\tfor(let i in this.views)\n\t\t{\n\t\t\tviews[i] = this.views[i];\n\t\t}\n\n\t\tlet finalViews = [];\n\n\t\tfor(let i in this.args.value)\n\t\t{\n\t\t\tlet found = false;\n\t\t\tlet k = i;\n\n\t\t\tif(isNaN(k))\n\t\t\t{\n\t\t\t\tk = '_' + i;\n\t\t\t}\n\n\t\t\tfor(let j in views)\n\t\t\t{\n\t\t\t\tif(views[j]\n\t\t\t\t\t&& this.args.value[i] !== undefined\n\t\t\t\t\t&& this.args.value[i] === views[j].args[ this.subProperty ]\n\t\t\t\t){\n\t\t\t\t\tfound = true;\n\t\t\t\t\tfinalViews[k] = views[j];\n\t\t\t\t\tfinalViews[k].args[ this.keyProperty ] = i;\n\t\t\t\t\tdelete views[j];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!found)\n\t\t\t{\n\t\t\t\tlet viewArgs = {};\n\t\t\t\tlet view = finalViews[k] = new View(viewArgs, this.parent);\n\n\t\t\t\tfinalViews[k].template = this.template instanceof Object\n\t\t\t\t\t? this.template\n\t\t\t\t\t: this.template;\n\t\t\t\t// finalViews[k].parent   = this.parent;\n\t\t\t\tfinalViews[k].viewList = this;\n\n\t\t\t\tfinalViews[k].args[ this.keyProperty ] = i;\n\t\t\t\tfinalViews[k].args[ this.subProperty ] = this.args.value[i];\n\n\n\t\t\t\tconst upDebind = viewArgs.bindTo(this.subProperty, (v,k)=>{\n\t\t\t\t\tlet index = viewArgs[ this.keyProperty ];\n\t\t\t\t\tthis.args.value[index] = v;\n\t\t\t\t});\n\n\t\t\t\tconst downDebind = this.subArgs.bindTo((v, k, t, d) => {\n\t\t\t\t\tviewArgs[k] = v;\n\t\t\t\t});\n\n\t\t\t\tview.onRemove(()=>{\n\t\t\t\t\tupDebind();\n\t\t\t\t\tdownDebind();\n\t\t\t\t\tthis._onRemove.remove(upDebind);\n\t\t\t\t\tthis._onRemove.remove(downDebind);\n\t\t\t\t});\n\n\t\t\t\tthis._onRemove.add(upDebind);\n\t\t\t\tthis._onRemove.add(downDebind);\n\n\t\t\t\tviewArgs[this.subProperty] = this.args.value[i];\n\t\t\t}\n\t\t}\n\n\t\tfor(let i in views)\n\t\t{\n\t\t\tlet found = false;\n\n\t\t\tfor(let j in finalViews)\n\t\t\t{\n\t\t\t\tif(views[i] === finalViews[j])\n\t\t\t\t{\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!found)\n\t\t\t{\n\t\t\t\tviews[i].remove();\n\t\t\t}\n\t\t}\n\n\t\tif(Array.isArray(this.args.value))\n\t\t{\n\t\t\tconst renderRecurse = (i = 0) => {\n\n\t\t\t\tconst ii = (finalViews.length - i) - 1;\n\n\t\t\t\tif(!finalViews[ii])\n\t\t\t\t{\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\n\t\t\t\tif(finalViews[ii] === this.views[ii])\n\t\t\t\t{\n\t\t\t\t\tif(!finalViews[ii].firstNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tfinalViews[ii].render(this.tag, finalViews[ii+1]);\n\n\t\t\t\t\t\treturn finalViews[ii].rendered.then(() => renderRecurse( i+1 ));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn renderRecurse( i+1 );\n\t\t\t\t}\n\n\t\t\t\tfinalViews[ii].render(this.tag, finalViews[ii+1]);\n\n\t\t\t\tthis.views.splice(ii, 0, finalViews[ii]);\n\n\t\t\t\treturn finalViews[ii].rendered.then( () => renderRecurse( i+1 ) );\n\t\t\t}\n\n\t\t\tthis.rendered = renderRecurse();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst renders = [];\n\t\t\tconst leftovers = Object.assign({}, finalViews);\n\n\t\t\tfor(const i in finalViews)\n\t\t\t{\n\t\t\t\tdelete leftovers[i];\n\n\t\t\t\tif(finalViews[i].firstNode && finalViews[i] === this.views[i])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfinalViews[i].render(this.tag);\n\n\t\t\t\trenders.push( finalViews[i].rendered.then(()=>finalViews[i]) );\n\t\t\t}\n\n\t\t\tfor(const i in leftovers)\n\t\t\t{\n\t\t\t\tdelete this.args.views[i];\n\n\t\t\t\tleftovers.remove();\n\t\t\t}\n\n\t\t\tthis.rendered = Promise.all(renders);\n\t\t}\n\n\t\tthis.views = finalViews;\n\n\t\tfor(let i in finalViews)\n\t\t{\n\t\t\tif(isNaN(i))\n\t\t\t{\n\t\t\t\tfinalViews[i].args[ this.keyProperty ] = i.substr(1);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfinalViews[i].args[ this.keyProperty ] = i;\n\t\t}\n\n\t\tthis.willReRender = false;\n\t}\n\n\tpause(pause=true)\n\t{\n\t\tfor(let i in this.views)\n\t\t{\n\t\t\tthis.views[i].pause(pause);\n\t\t}\n\t}\n\n\tonRemove(callback)\n\t{\n\t\tthis._onRemove.add(callback);\n\t}\n\n\tremove()\n\t{\n\t\tfor(let i in this.views)\n\t\t{\n\t\t\tthis.views[i].remove();\n\t\t}\n\n\t\tlet onRemove = this._onRemove.items();\n\n\t\tfor(const i in onRemove)\n\t\t{\n\t\t\tthis._onRemove.remove(onRemove[i]);\n\n\t\t\tonRemove[i]();\n\t\t}\n\n\t\tlet cleanup;\n\n\t\twhile(this.cleanup.length)\n\t\t{\n\t\t\tcleanup = this.cleanup.pop();\n\t\t\tcleanup();\n\t\t}\n\n\t\tthis.views = [];\n\n\t\twhile(this.tag && this.tag.firstChild)\n\t\t{\n\t\t\tthis.tag.removeChild(this.tag.firstChild);\n\t\t}\n\n\t\tif(this.subArgs)\n\t\t{\n\t\t\tBindable.clearBindings(this.subArgs);\n\t\t}\n\n\t\tBindable.clearBindings(this.args);\n\n\t\tif(this.args.value && !this.args.value.isBound())\n\t\t{\n\t\t\tBindable.clearBindings(this.args.value);\n\t\t}\n\n\t\tthis.removed = true;\n\t}\n}\n","import { Field } from './Field';\n\nexport class ButtonField extends Field\n{\n\tconstructor(values, form, parent, key)\n\t{\n\t\tsuper(values, form, parent, key);\n\n\t\tthis.args.title = this.args.title || this.args.value;\n\t\tthis._onClick   = [];\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tattrs.type = attrs.type || this.args.type;\n\n\t\tthis.args.name = attrs.name = this.args.name || key;\n\n\t\tthis.template   = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type}\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t\t<input\n\t\t\t\t\tname      = \"${this.getName()}\"\n\t\t\t\t\ttype      = \"${attrs.type}\"\n\t\t\t\t\tvalue     = \"[[value]]\"\n\t\t\t\t\tcv-on     = \"click:clicked(event)\"\n\t\t\t\t\tcv-ref    = \"input:curvature/base/Tag\"\n\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\tclicked(event)\n\t{\n\t\tconst cancels = this._onClick.map((callback)=>{\n\t\t\treturn callback(event) === false;\n\t\t}).filter(r=>r);\n\n\t\tif(cancels.length)\n\t\t{\n\t\t\tif(this.args.attrs.type == 'submit')\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.args.attrs.type == 'submit')\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.form.tags.formTag.element.dispatchEvent(new Event(\n\t\t\t\t'submit', {\n\t\t\t\t\t'cancelable': true\n\t\t\t\t\t, 'bubbles':  true\n\t\t\t\t}\n\t\t\t));\n\t\t}\n\t}\n\n\tonClick(callback)\n\t{\n\t\tthis._onClick.push(callback);\n\t}\n}\n","import { View     } from '../base/View';\nimport { Bindable } from '../base/Bindable';\n\nexport class Field extends View {\n\tconstructor(values, form, parent, key) {\n\t\tlet skeleton = Object.assign({}, values);\n\n\t\tsuper(skeleton);\n\n\t\tthis.args.title = this.args.title ?? key;\n\t\tthis.args.value = this.args.value ?? '';\n\t\tthis.value      = this.args.value ?? '';\n\t\tthis.skeleton   = skeleton;\n\t\tthis.disabled   = null;\n\n\t\tthis.args.valueString = '';\n\n\t\tthis.form   = form;\n\t\tthis.parent = parent;\n\t\tthis.key    = key;\n\n\t\tthis.ignore = this.args.attrs\n\t\t\t? this.args.attrs['data-cv-ignore'] || false\n\t\t\t: false;\n\n\t\tlet extra = '';\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tattrs.type = attrs.type || skeleton.type || null;\n\t\tthis.args.name = attrs.name = attrs.name || this.args.name || key;\n\n\t\tif(attrs.type == 'checkbox')\n\t\t{\n\t\t\textra = 'value = \"1\"';\n\t\t}\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor           = \"${this.getName()}\"\n\t\t\t\tdata-type     = \"${attrs.type || 'text'}\"\n\t\t\t\tcv-ref        = \"label:curvature/base/Tag\"\n\t\t\t>\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = \"${this.getName()}\"\n\t\t\t\t\ttype      = \"${attrs.type || 'text'}\"\n\t\t\t\t\tcv-bind   = \"value\"\n\t\t\t\t\tcv-ref    = \"input:curvature/base/Tag\"\n\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t\t${extra}\n\t\t\t\t/>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t\t//type    = \"${this.args.attrs.type||'text'}\"\n\n\t\t// let key     = this.key;\n\t\tlet setting = null;\n\n\t\tthis.args.bindTo('value', (v, k) => {\n\n\t\t\tif(!isNaN(v)\n\t\t\t\t&& v.length\n\t\t\t\t&& v == Number(v)\n\t\t\t\t&& v.length === String(Number(v)).length\n\t\t\t){\n\t\t\t\tv = Number(v);\n\t\t\t}\n\n\t\t\tthis.value = v;\n\n\t\t\tif(setting == k)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetting = key;\n\n\t\t\tthis.args.valueString = JSON.stringify(v||'', null, 4);\n\t\t\tthis.valueString = this.args.valueString;\n\n\t\t\tif(attrs.type == 'file'\n\t\t\t\t&& this.tags.input\n\t\t\t\t&& this.tags.input.element.files\n\t\t\t\t&& this.tags.input.element.length\n\t\t\t){\n\t\t\t\tif(!attrs.multiple)\n\t\t\t\t{\n\t\t\t\t\tthis.parent.args.value[key] = this.tags.input.element.files[0];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst files = Array.from(this.tags.input.element.files);\n\n\t\t\t\t\tif(!this.parent.args.value[k] || !files.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parent.args.value[key] = files;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfor(const i in files)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(files[i] !== this.parent.args.value[key][i])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.parent.args.value[key] = files;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.parent.args.value.splice(files.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(!this.parent.args.value)\n\t\t\t\t{\n\t\t\t\t\tthis.parent.args.value = {};\n\t\t\t\t}\n\n\t\t\t\tthis.parent.args.value[key] = v;\n\t\t\t}\n\n\t\t\tthis.args.errors = [];\n\n\t\t\tsetting = null;\n\t\t});\n\n\t\t// this.parent.args.value = Bindable.makeBindable(this.parent.args.value);\n\n\t\tthis.parent.args.value[this.key] = this.args.value;\n\n\t\tthis.parent.args.value.bindTo(key, (v, k)=>{\n\n\t\t\tif(setting == k)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetting = k;\n\n\n\t\t\tif(attrs.type == 'file')\n\t\t\t{\n\t\t\t\tif(this.tags.input\n\t\t\t\t\t && this.tags.input.element.files\n\t\t\t\t\t && this.tags.input.element.files.length\n\t\t\t\t){\n\t\t\t\t\tif(!attrs.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.parent.args.value[key] = this.tags.input.element.files[0];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst files = Array.from(this.tags.input.element.files);\n\n\t\t\t\t\t\tif(!this.parent.args.value[key] || !files.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.parent.args.value[key] = files;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor(const i in files)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(files[i] !== this.parent.args.value[key][i])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.parent.args.value[key] = files;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.parent.args.value[key].splice(files.length);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.args.value = v;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.args.value = v;\n\t\t\t}\n\n\t\t\tsetting = null;\n\t\t});\n\t}\n\n\tdisable()\n\t{\n\t\tif(this.hasChildren())\n\t\t{\n\t\t\t// for(let i in this.args.fields)\n\t\t\t// {\n\t\t\t// \tthis.args.fields[i].disable();\n\t\t\t// }\n\t\t}\n\n\t\tthis.disabled = 'disabled';\n\t}\n\n\tenable()\n\t{\n\t\tif(this.hasChildren())\n\t\t{\n\t\t\t// for(let i in this.args.fields)\n\t\t\t// {\n\t\t\t// \tthis.args.fields[i].disable();\n\t\t\t// }\n\t\t}\n\n\t\tthis.disabled = false;\n\t}\n\n\thasChildren()\n\t{\n\t\treturn false;\n\t}\n\n\tgetName(cascadeIfPossible = true)\n\t{\n\t\tif(this.tags.input)\n\t\t{\n\t\t\treturn this.tags.input.element.getAttribute('name');\n\t\t}\n\n\t\tlet name = this.key;\n\n\t\tif(cascadeIfPossible)\n\t\t{\n\t\t\tlet parent = this.parent;\n\n\t\t\tconst names = [name];\n\n\t\t\twhile(parent && parent.array && typeof parent.key !== 'undefined')\n\t\t\t{\n\t\t\t\tnames.unshift(parent.key);\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\n\t\t\tname = names.shift();\n\n\t\t\tif(names.length)\n\t\t\t{\n\t\t\t\tname += `[${names.join('][')}]`;\n\t\t\t}\n\t\t}\n\n\t\treturn name;\n\t}\n}\n","import { Field } from './Field';\nimport { Form  } from './Form';\n\nexport class FieldSet extends Field\n{\n\tconstructor(values, form, parent, key)\n\t{\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tattrs.type = attrs.type || 'fieldset';\n\n\t\tthis.array = false;\n\n\t\tif(values.array || attrs['data-array'] || attrs['data-multi'])\n\t\t{\n\t\t\tthis.array = attrs['data-array'] = true;\n\t\t}\n\n\t\tthis.args.value  = {};\n\t\tthis.args.fields = Form.renderFields(values.children, this);\n\t\tthis.fields      = this.args.fields;\n\n\t\tthis.template    = `\n\t\t\t<label\n\t\t\t\tfor        = \"${this.getName()}\"\n\t\t\t\tdata-type  = \"${attrs.type}\"\n\t\t\t\tdata-multi = \"${attrs['data-multi'] ? 'true' : 'false'}\"\n\t\t\t\tcv-ref     = \"label:curvature/base/Tag\"\n\t\t\t>\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = \"${this.getName()}\"\n\t\t\t\t\tcv-ref = \"input:curvature/base/Tag\"\n\t\t\t\t\tcv-expand=\"attrs\"\n\t\t\t\t\tcv-each = \"fields:field\"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\thasChildren()\n\t{\n\t\treturn !!Object.keys(this.args.fields).length;\n\t}\n\twrapSubfield(field)\n\t{\n\t\treturn field;\n\t}\n}\n","import { Field } from './Field';\n\nexport class FileField extends Field {\n\tconstructor(values, form, parent, key) {\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tattrs.type = attrs.type || this.args.type || 'file';\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type}\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname    = \"${this.getName()}\"\n\t\t\t\t\ttype    = \"${attrs.type}\"\n\t\t\t\t\tcv-bind = \"value\"\n\t\t\t\t\tcv-ref  = \"input:curvature/base/Tag\"\n\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t/>\n\t\t\t\t<span style = \"display:none\" cv-if = \"value\">[[[value]]]</span>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n}\n","import { View } from '../base/View';\n\nimport { Field         } from './Field';\nimport { FieldSet      } from './FieldSet';\nimport { SelectField   } from './SelectField';\nimport { RadioField    } from './RadioField';\nimport { HtmlField     } from './HtmlField';\nimport { HiddenField   } from './HiddenField';\nimport { ButtonField   } from './ButtonField';\nimport { TextareaField } from './TextareaField';\n\nimport { View as MultiField } from './multiField/View';\n\nimport { Bindable } from '../base/Bindable';\n\n// import { Router           } from 'Router';\n\n// import { Repository       } from '../Repository';\n\n// import { FieldSet         } from './FieldSet';\n\n// import { ToastView        } from '../ToastView';\n// import { ToastAlertView   } from '../ToastAlertView';\n\nexport class Form extends View\n{\n\tconstructor(skeleton, customFields = {})\n\t{\n\t\tsuper({});\n\n\t\tthis.args.flatValue = this.args.flatValue || {};\n\t\tthis.args.value     = this.args.value     || {};\n\t\tthis.args.method    = skeleton._method || 'GET';\n\t\tthis.args.classes   = this.args.classes || [];\n\t\tthis.skeleton       = skeleton;\n\n\t\tthis.args.bindTo('classes', (v)=>{\n\t\t\tthis.args._classes = v.join(' ');\n\t\t});\n\n\t\tthis._onSubmit   = [];\n\t\tthis._onRender   = [];\n\t\tthis.action      = '';\n\t\tthis.template    = `\n\t\t\t<form\n\t\t\t\tclass     = \"[[_classes]]\"\n\t\t\t\tmethod    = \"[[method]]\"\n\t\t\t\tenctype   = \"multipart/form-data\"\n\t\t\t\tcv-on     = \"submit:submit(event)\"\n\t\t\t\tcv-ref    = \"formTag:curvature/base/Tag\"\n\t\t\t\tcv-each   = \"fields:field\"\n\t\t\t\tcv-expand = \"attrs\"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t`;\n\n\t\tthis.args.fields = Form.renderFields(skeleton, this, customFields);\n\n\t\tthis.fields = this.args.fields;\n\n\t\tconst _this = Bindable.makeBindable(this);\n\n\t\tthis.args.bindTo(\n\t\t\t'value'\n\t\t\t, (v) => {\n\t\t\t\t_this.value = v;\n\t\t\t}\n\t\t);\n\t\tthis.args.bindTo(\n\t\t\t'valueString'\n\t\t\t, (v) => {\n\t\t\t\t_this.json = v;\n\t\t\t}\n\t\t);\n\n\t\treturn _this;\n\t}\n\n\tsubmitHandler(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\tsubmit(event)\n\t{\n\t\tthis.args.valueString = JSON.stringify(\n\t\t\tthis.args.value\n\t\t\t, null\n\t\t\t, 4\n\t\t);\n\n\t\tfor(let i in this._onSubmit)\n\t\t{\n\t\t\tthis._onSubmit[i](this, event);\n\t\t}\n\t}\n\n\tbuttonClick(event)\n\t{\n\t\t// console.log(event);\n\t}\n\n\tonSubmit(callback)\n\t{\n\t\tthis._onSubmit.push(callback);\n\t}\n\n\tonRender(callback)\n\t{\n\t\tif(this.nodes)\n\t\t{\n\t\t\tcallback(this);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onRender.push(callback);\n\t}\n\n\tstatic renderFields(skeleton, parent = null, customFields = {})\n\t{\n\t\tlet fields = {};\n\t\tfor(let i in skeleton)\n\t\t{\n\t\t\tif(fields[i])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(i.substr(0,1) == '_')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet field = null;\n\t\t\tlet form  = null;\n\n\t\t\tif(parent)\n\t\t\t{\n\t\t\t\tif(parent instanceof Form)\n\t\t\t\t{\n\t\t\t\t\tform = parent;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tform = parent.form;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log(customFields);\n\n\t\t\tif(customFields && skeleton[i].name in customFields)\n\t\t\t{\n\t\t\t\tfield = new customFields[ skeleton[i].name ](skeleton[i], form, parent, i)\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tswitch(skeleton[i].type)\n\t\t\t\t{\n\t\t\t\t\tcase 'fieldset':\n\t\t\t\t\t\tif(skeleton[i].attrs && skeleton[i].attrs['data-multi'])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield = new MultiField(skeleton[i], form, parent, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfield = new FieldSet(skeleton[i], form, parent, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tfield = new SelectField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'radios':\n\t\t\t\t\t\tfield = new RadioField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'html':\n\t\t\t\t\t\tfield = new HtmlField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'submit':\n\t\t\t\t\tcase 'button':\n\t\t\t\t\t\tfield = new ButtonField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\tfield = new HiddenField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'textarea':\n\t\t\t\t\t\tfield = new TextareaField(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault :\n\t\t\t\t\t\tfield = new Field(skeleton[i], form, parent, i);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfields[i] = field;\n\n\t\t\tconst fieldName = field.key;//field.getName();\n\n\t\t\tfield.args.bindTo('value', (v, k ,t, d) => {\n\n\t\t\t\tif(!isNaN(v)\n\t\t\t\t\t&& v.length\n\t\t\t\t\t&& v == Number(v)\n\t\t\t\t\t&& v.length === String(Number(v)).length\n\t\t\t\t){\n\t\t\t\t\tv = Number(v);\n\t\t\t\t}\n\n\t\t\t\t// console.log(t,v);\n\t\t\t\tif(t.type == 'html'\n\t\t\t\t\t&& !t.contentEditable\n\t\t\t\t\t|| t.type == 'fieldset'\n\t\t\t\t){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// let fieldName = field.args.name;\n\n\t\t\t\tif(t.disabled)\n\t\t\t\t{\n\t\t\t\t\tdelete form.args.flatValue[ fieldName ];\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tt.attrs = t.attrs || {};\n\n\t\t\t\tconst multiple = t.attrs.multiple;\n\t\t\t\tconst newArray = Array.isArray(v);\n\t\t\t\tconst oldArray = parent.args.value[fieldName];\n\n\t\t\t\tconst exists = t.attrs.multiple && newArray && Array.isArray(oldArray);\n\n\t\t\t\tif(exists)\n\t\t\t\t{\n\t\t\t\t\tfor(const i in v)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(v[i] !== parent.args.value[fieldName][i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparent.args.value[ fieldName ][i] = v[i];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparent.args.value[ fieldName ].splice(v.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tparent.args.value[ fieldName ] = v;\n\t\t\t\t}\n\n\t\t\t\tform.args.flatValue[ fieldName ] = v;\n\n\t\t\t\tform.args.valueString = JSON.stringify(form.args.value, null, 4);\n\t\t\t\tconsole.log();\n\n\n\t\t\t});\n\t\t}\n\t\treturn fields;\n\t}\n\n\tformData(append = null, field = null, chain = [])\n\t{\n\t\tif(!append)\n\t\t{\n\t\t\tappend = new FormData();\n\t\t}\n\n\t\tif(!field)\n\t\t{\n\t\t\tfield = this;\n\t\t}\n\n\t\tlet parts = [];\n\n\t\tfor(let i in field.args.fields)\n\t\t{\n\n\t\t\tif(field.args.fields[i]\n\t\t\t\t&& field.args.fields[i].disabled\n\t\t\t){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet subchain = chain.slice(0);\n\n\t\t\tsubchain.push(i);\n\n\t\t\tif(field.args.fields[i]\n\t\t\t\t&& field.args.fields[i].hasChildren()\n\t\t\t){\n\t\t\t\tthis.formData(\n\t\t\t\t\tappend\n\t\t\t\t\t, field.args.fields[i]\n\t\t\t\t\t, subchain\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if(field.args.fields[i])\n\t\t\t{\n\t\t\t\t// let fieldName = field.args.fields[i].args.name;\n\n\t\t\t\tlet fieldName = field.args.fields[i].getName();\n\n\t\t\t\tif(field.args.fields[i].args.type == 'file'\n\t\t\t\t\t&& field.args.fields[i].tags.input.element.files\n\t\t\t\t\t&& field.args.fields[i].tags.input.element.files.length\n\t\t\t\t){\n\t\t\t\t\tif(field.args.fields[i].args.attrs.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet files = field.args.fields[i].tags.input.element.files;\n\n\t\t\t\t\t\tfor(let i = 0; i < files.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!files[i])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tappend.append(fieldName + '[]', files[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(field.args.fields[i].tags.input.element.files[0])\n\t\t\t\t\t{\n\t\t\t\t\t\tappend.append(\n\t\t\t\t\t\t\tfieldName\n\t\t\t\t\t\t\t, field.args.fields[i].tags.input.element.files[0]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(\n\t\t\t\t\tfield.args.fields[i].args.type !== 'file'\n\t\t\t\t\t|| field.args.fields[i].args.value\n\t\t\t\t){\n\t\t\t\t\tappend.append(\n\t\t\t\t\t\tfieldName\n\t\t\t\t\t\t, field.args.fields[i].args.value === undefined\n\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t: field.args.fields[i].args.value\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn append;\n\t}\n\n\tqueryString(args = {})\n\t{\n\t\tlet parts = [];\n\n\t\tfor(let i in this.args.flatValue)\n\t\t{\n\t\t\targs[i] = args[i] || this.args.flatValue[i];\n\t\t}\n\n\t\tfor(let i in args)\n\t\t{\n\t\t\tparts.push(i + '=' + encodeURIComponent(args[i]));\n\t\t}\n\n\t\treturn parts.join('&');\n\t}\n\n\tpopulate(values)\n\t{\n\t\t// console.log(values);\n\n\t\tfor(let i in values)\n\t\t{\n\t\t\tthis.args.value[i] = values[i];\n\t\t}\n\t}\n\n\tstatic _updateFields(parent, skeleton)\n\t{\n\t\tfor(const i in parent.args.fields)\n\t\t{\n\t\t\tconst field = parent.args.fields[i];\n\n\t\t\t// console.log(i, field, skeleton[i]);\n\n\t\t\tif(skeleton[i])\n\t\t\t{\n\t\t\t\tif(skeleton[i].value)\n\t\t\t\t{\n\t\t\t\t\tfield.args.value = skeleton[i].value;\n\t\t\t\t}\n\n\t\t\t\tif(skeleton[i].errors)\n\t\t\t\t{\n\t\t\t\t\tfield.args.errors = skeleton[i].errors;\n\t\t\t\t}\n\n\t\t\t\tif(skeleton[i].title)\n\t\t\t\t{\n\t\t\t\t\tfield.args.title = skeleton[i].title;\n\t\t\t\t}\n\n\t\t\t\tif(skeleton[i].options)\n\t\t\t\t{\n\t\t\t\t\tfield.args.options = skeleton[i].options;\n\t\t\t\t}\n\n\t\t\t\tif(skeleton[i].attrs)\n\t\t\t\t{\n\t\t\t\t\tfield.args.attrs = skeleton[i].attrs;\n\t\t\t\t}\n\n\t\t\t\tif(field.children && skeleton[i].children)\n\t\t\t\t{\n\t\t\t\t\tthis._updateFields(field, skeleton[i].children);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thasChildren()\n\t{\n\t\treturn !!Object.keys(this.args.fields).length;\n\t}\n\n\tpostRender()\n\t{\n\t\tfor(let i in this._onRender)\n\t\t{\n\t\t\tthis._onRender[i](this);\n\t\t}\n\t}\n}\n","import { Field } from './Field';\n\nexport class HiddenField extends Field {\n\tconstructor(values, form, parent, key) {\n\n\t\tvalues.type = 'hidden';\n\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tthis.args.type = attrs.type = attrs.type || this.args.type || 'hidden';\n\t\tthis.args.name = attrs.name = attrs.name || this.args.name || key;\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type}\"\n\t\t\t\tstyle     = \"display:none\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t\t<input\n\t\t\t\t\t\tname      = \"${this.getName()}\"\n\t\t\t\t\t\ttype      = \"hidden\"\n\t\t\t\t\t\tcv-bind   = \"value\"\n\t\t\t\t\t\tcv-ref    = \"input:curvature/base/Tag\"\n\t\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t/>\n\t\t\t\t<span cv-if = \"value\">[[[value]]]</span>\n\t\t\t</label>\n\t\t`;\n\t}\n}\n","import { Field } from './Field';\n\nexport class HtmlField extends Field {\n\tconstructor(values, form, parent, key) {\n\t\tsuper(values, form, parent, key);\n\n\t\tthis.key = key;\n\n\t\tthis.args.tagName = this.args.tagName || 'div';\n\n\t\tthis.args.displayValue = this.args.value;\n\n\t\tthis.args.attrs = this.args.attrs || {};\n\n\t\tthis.ignore = this.args.attrs['data-cv-ignore'] || false;\n\n\t\tthis.args.contentEditable = this.args.attrs.contenteditable || false;\n\n\t\tthis.args.bindTo('value', v => {\n\t\t\tif(!this.tags.input)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(this.tags.input.element === document.activeElement)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.displayValue = v;\n\t\t});\n\n\t\tthis.template = `<${this.args.tagName}\n\t\t\tname            = \"${this.getName()}\"\n\t\t\tcv-ref          = \"input:curvature/base/Tag\"\n\t\t\tcontenteditable = \"[[contentEditable]]\"\n\t\t\tcv-expand       = \"attrs\"\n\t\t\tcv-bind         = \"$displayValue\"\n\t\t\tcv-on           = \"input:inputProvided(event);\"\n\t\t></${this.args.tagName}>`;\n\t}\n\n\tpostRender()\n\t{\n\t\tthis.observer = new MutationObserver(mutations => {\n\n\t\t\tconst element = this.tags.input.element;\n\n\t\t\tconst nodes = Array.from(element.childNodes).filter(node => {\n\n\t\t\t\treturn node.length > 0 || node.nodeType !== node.TEXT_NODE\n\n\t\t\t});\n\n\t\t\tconst lines = nodes.map(n => (n.outerHTML || n.textContent));\n\n\t\t\tthis.args.value = lines.join('')\n\t\t\t\t.replace(/&lt;/i, '<')\n\t\t\t\t.replace(/&gt;/i, '>');\n\t\t});\n\n\t\tthis.observer.observe(\n\t\t\tthis.tags.input.element\n\t\t\t, {\n\t\t\t\tcharacterData: true\n\t\t\t\t, attributes:  true\n\t\t\t\t, childList:   true\n\t\t\t\t, subtree:     true\n\t\t\t}\n\t\t);\n\t}\n\n\tinputProvided(event)\n\t{\n\t\tthis.args.value = event.target.innerHTML;\n\t}\n\n\thasChildren()\n\t{\n\t\treturn false;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.key;\n\t}\n}\n","import { Field } from './Field';\n\nexport class RadioField extends Field {\n\tconstructor(values, form, parent, key) {\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tthis.args.name = attrs.name = attrs.name || this.args.name || key;\n\n\t\tthis.args.value = this.args.value || '';\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type}\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each  = \"options:option:optionText\"/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname      = \"${this.args.name}\"\n\t\t\t\t\t\t\ttype      = \"radio\"\n\t\t\t\t\t\t\tvalue     = \"[[option]]\"\n\t\t\t\t\t\t\tcv-bind   = \"value\"\n\t\t\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t\t\t\tcv-on     = \"change:changed(event)\"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\tgetLabel()\n\t{\n\t\tfor(let i in this.args.options)\n\t\t{\n\t\t\tif(this.args.options[i] == this.args.value)\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\tchanged(event)\n\t{\n\t\tthis.args.value = event.target.value;\n\t}\n}\n","import { Field } from './Field';\n\nexport class SelectField extends Field {\n\tconstructor(values, form, parent, key) {\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type || 'select'}\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname      = \"${this.getName()}\"\n\t\t\t\t\tcv-bind   = \"value\"\n\t\t\t\t\tcv-each   = \"options:option:optionText\"\n\t\t\t\t\tcv-ref    = \"input:curvature/base/Tag\"\n\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t/>\n\t\t\t\t\t<option value = \"[[option]]\">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\tpostRender()\n\t{\n\t\tthis.args.bindTo('value', v => this.selectOptionByValue(v));\n\n\t\tthis.args.bindTo('options', v => {\n\n\t\t\tconst optionsList = this.viewLists.options;\n\n\t\t\toptionsList.rendered.then((rendered)=>{\n\n\t\t\t\tthis.selectOptionByValue(this.args.value)\n\t\t\t});\n\n\t\t}, {frame:true});\n\t}\n\n\tselectOptionByValue(value)\n\t{\n\t\tlet tag = this.tags.input.element;\n\n\t\tfor(const option of tag.options)\n\t\t{\n\t\t\tif(option.value == value)\n\t\t\t{\n\t\t\t\ttag.selectedIndex = option.index;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetLabel()\n\t{\n\t\tfor(let i in this.args.options)\n\t\t{\n\t\t\tif(this.args.options[i] == this.args.value)\n\t\t\t{\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Field } from './Field';\n\nexport class TextareaField extends Field {\n\tconstructor(values, form, parent, key) {\n\t\tsuper(values, form, parent, key);\n\n\t\tconst attrs = this.args.attrs || {};\n\n\t\tattrs.type = attrs.type || 'textarea';\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor       = \"${this.getName()}\"\n\t\t\t\tdata-type = \"${attrs.type}\"\n\t\t\t\tcv-ref    = \"label:curvature/base/Tag\">\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<textarea\n\t\t\t\t\t\tname      = \"${this.getName()}\"\n\t\t\t\t\t\tcv-bind   = \"value\"\n\t\t\t\t\t\tcv-ref    = \"input:curvature/base/Tag\"\n\t\t\t\t\t\tcv-expand = \"attrs\"\n\t\t\t\t></textarea>\n\t\t\t\t<cv-template cv-if = \"attrs.data-caption\">\n\t\t\t\t\t<p>[[attrs.data-caption]]</p>\n\t\t\t\t</cv-template>\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n}\n","import { FormWrapper } from './FormWrapper';\nimport { HiddenField } from '../../form/HiddenField';\n\nexport class CreateForm extends FormWrapper\n{\n\tconstructor(args, path, method = 'GET', customFields = {})\n\t{\n\t\tsuper(\n\t\t\targs\n\t\t\t, path\n\t\t\t, 'POST'\n\t\t\t, customFields || {\n\t\t\t\t// title: HiddenField\n\t\t\t}\n\t\t);\n\n\t\tthis.creating = !!args.publicId;\n\t}\n\n\tonLoad(form)\n\t{\n\t\tfor(let i in form.args.fields)\n\t\t{\n\t\t\tif(!form.args.fields[i].tags.input)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(form.args.fields[i].args.attrs.type == 'hidden')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet element = form.args.fields[i].tags.input.element;\n\n\t\t\telement.focus();\n\n\t\t\tbreak;\n\t\t}\n\n\t\tsuper.onLoad(form);\n\t}\n\n\tonRequest()\n\t{\n\t\tthis.args.view.args.loading = true;\n\t\tthis.args.view.args.classes += ' loading';\n\n\t\treturn super.onRequest();\n\t}\n\n\tonResponse(response)\n\t{\n\t\tthis.args.view.args.loading = false;\n\t\tthis.args.view.args.classes = '';\n\n\t\tif(!this.args.wrapper)\n\t\t{\n\t\t\tthis.args.view.addRecord(response.body);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.args.wrapper.refresh(response.body);\n\t\t}\n\n\t\tthis.args.view.args.creating = '';\n\n\t\tsuper.onResponse(response);\n\t}\n}\n","// import { BaseForm } from '../Ui/BaseForm';\n// import { HiddenField } from 'curvature/form/HiddenField';\n\n// export class Form extends BaseForm\n// {\n// \tconstructor(args, path, method = 'GET', customFields = {})\n// \t{\n// \t\tsuper(args, path, 'POST', customFields);\n\n// \t\tthis.creating = !!args.publicId;\n// \t}\n\n// \tonLoad(form)\n// \t{\n// \t\tfor(let i in form.args.fields)\n// \t\t{\n// \t\t\tif(!form.args.fields[i].tags.input)\n// \t\t\t{\n// \t\t\t\tcontinue;\n// \t\t\t}\n\n// \t\t\tif(form.args.fields[i].args.attrs.type == 'hidden')\n// \t\t\t{\n// \t\t\t\tcontinue;\n// \t\t\t}\n\n// \t\t\tlet element = form.args.fields[i].tags.input.element;\n\n// \t\t\telement.focus();\n\n// \t\t\tbreak;\n// \t\t}\n\n// \t\tsuper.onLoad(form);\n// \t}\n\n// \tonRequest()\n// \t{\n// \t\tthis.args.view.args.loading = true;\n// \t\tthis.args.view.args.classes += ' loading';\n\n// \t\treturn super.onRequest();\n// \t}\n\n// \tonResponse(response)\n// \t{\n// \t\tthis.args.view.args.loading = false;\n// \t\tthis.args.view.args.classes = '';\n\n// \t\tif(!this.args.wrapper)\n// \t\t{\n// \t\t\tthis.args.view.addRecord(response.body);\n// \t\t}\n// \t\telse\n// \t\t{\n// \t\t\tthis.args.wrapper.refresh(response.body);\n// \t\t}\n\n// \t\tthis.args.view.addButtonClicked();\n\n// \t\tsuper.onResponse(response);\n// \t}\n// }\n","import { Repository } from '../../base/Repository';\nimport { Form       } from '../../form/Form';\nimport { Toast      } from '../../toast/Toast';\nimport { ToastAlert } from '../../toast/ToastAlert';\nimport { View       } from '../../base/View';\nimport { Router     } from '../../base/Router';\n\nexport class FormWrapper extends View\n{\n\tconstructor(args, path, method = 'GET', customFields = {})\n\t{\n\t\tsuper(args);\n\n\t\tthis.path         = path;\n\t\tthis.args.method  = method;\n\t\tthis.args.action  = this.args.action || null;\n\t\tthis.args.form    = null;\n\t\tthis.args.title   = null;\n\t\tthis.args.class   = '';\n\t\tthis.template     = `\n\t\t\t<div class = \"form constrict [[class]]\">\n\t\t\t\t<div cv-if = \"title\"><label>[[title]]</label></div>\n\t\t\t\t[[form]]\n\t\t\t</div>\n\t\t`;\n\n\t\tthis._onLoad     = [];\n\t\tthis._onSubmit   = [];\n\t\tthis._onRender   = [];\n\t\tthis._onRequest  = [];\n\t\tthis._onError    = [];\n\t\tthis._onResponse = [];\n\n\t\tif(path instanceof Form)\n\t\t{\n\t\t\tthis.loadForm(form, customFields);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tRepository.request(path).then(resp=>{\n\t\t\t\tif(!resp\n\t\t\t\t\t|| !resp.meta\n\t\t\t\t\t|| !resp.meta.form\n\t\t\t\t\t|| !(resp.meta.form instanceof Object)\n\t\t\t\t){\n\t\t\t\t\tconsole.log('Cannot render form with ', resp);\n\t\t\t\t\t// Router.go('/');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.loadForm(new Form(resp.meta.form, customFields));\n\n\t\t\t\tthis.onLoad(this.args.form, resp.body);\n\t\t\t});\n\t\t}\n\n\t}\n\n\tloadForm(form)\n\t{\n\t\tthis.args.form = form;\n\n\t\tthis.args.form.onSubmit((form, event)=>{\n\t\t\tif(this.onSubmit(form, event) === false)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(event)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\tlet formElement = form.tags.formTag.element;\n\t\t\tlet uri         = formElement.getAttribute('action') || this.args.action || this.path;\n\t\t\tlet method      = formElement.getAttribute('method') || this.args.method;\n\t\t\tlet query       = form.args.flatValue;\n\n\t\t\tmethod = method.toUpperCase();\n\n\t\t\t// console.log(method, uri);\n\n\t\t\tif(method == 'GET')\n\t\t\t{\n\t\t\t\tlet _query = {};\n\n\t\t\t\tif(this.args.content && this.args.content.args)\n\t\t\t\t{\n\t\t\t\t\tthis.args.content.args.page = 0;\n\t\t\t\t}\n\n\t\t\t\t_query.page = 0;\n\n\t\t\t\tfor(let i in query)\n\t\t\t\t{\n\t\t\t\t\tif(i === 'api')\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t_query[i] = query[i];\n\t\t\t\t}\n\n\t\t\t\tlet promises = this.onRequest(_query);\n\n\t\t\t\tpromises.then(()=>{\n\t\t\t\t\tthis.onResponse({});\n\n\t\t\t\t\tRouter.go(uri + '?' + Router.queryToString(_query));\n\n\t\t\t\t\tthis.update(_query);\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tthis.onRequestError(error);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(method == 'POST')\n\t\t\t{\n\t\t\t\tlet formData = form.formData();\n\n\t\t\t\tfor (var pair of formData.entries())\n\t\t\t\t{\n\t\t\t\t\t// console.log(pair[0]+ ', ' + pair[1]);\n\t\t\t\t}\n\n\t\t\t\tlet promises = this.onRequest(formData);\n\n\t\t\t\tif(promises)\n\t\t\t\t{\n\t\t\t\t\tpromises.then(()=>{\n\t\t\t\t\t\tRepository.request(\n\t\t\t\t\t\t\turi\n\t\t\t\t\t\t\t, {api: 'json'}\n\t\t\t\t\t\t\t, formData\n\t\t\t\t\t\t\t, false\n\t\t\t\t\t\t\t, {\n\t\t\t\t\t\t\t\tprogressDown: (event)=>{\n\t\t\t\t\t\t\t\t\tthis.progressDown(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t, progressUp: (event)=>{\n\t\t\t\t\t\t\t\t\tthis.progressUp(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).then((response) => {\n\t\t\t\t\t\t\tthis.onResponse(response);\n\t\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\t\tthis.onRequestError(error);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tonRequest(requestData)\n\t{\n\t\tlet promises = [];\n\n\t\tfor(let i in this._onRequest)\n\t\t{\n\t\t\tlet onReq = this._onRequest[i](requestData, this);\n\n\t\t\tif(onReq)\n\t\t\t{\n\t\t\t\tpromises.push(onReq);\n\t\t\t}\n\t\t}\n\n\t\tif(promises.length == 0)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn Promise.all(promises);\n\t}\n\n\tonRequestError(error)\n\t{\n\t\tfor(let i in this._onError)\n\t\t{\n\t\t\tthis._onError[i](error, this);\n\t\t}\n\n\t\tif(error.messages)\n\t\t{\n\t\t\tfor(let i in error.messages)\n\t\t\t{\n\t\t\t\tToast.instance().alert(\n\t\t\t\t\terror.body && error.body.id\n\t\t\t\t\t\t? 'Success!'\n\t\t\t\t\t\t: 'Error!'\n\t\t\t\t\t, error.messages[i]\n\t\t\t\t\t, 3500\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tonResponse(response)\n\t{\n\t\tfor(let i in this._onResponse)\n\t\t{\n\t\t\tthis._onResponse[i](response, this);\n\t\t}\n\n\t\tif(response.messages)\n\t\t{\n\t\t\tfor(let i in response.messages)\n\t\t\t{\n\t\t\t\tToast.instance().alert(\n\t\t\t\t\tresponse.body && response.body.id\n\t\t\t\t\t\t? 'Success!'\n\t\t\t\t\t\t: 'Error!'\n\t\t\t\t\t, response.messages[i]\n\t\t\t\t\t, 3500\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tonLoad(form, model)\n\t{\n\t\tfor(let i in this._onLoad)\n\t\t{\n\t\t\tthis._onLoad[i](this, form, model);\n\t\t}\n\t}\n\n\tonSubmit(form, event)\n\t{\n\t\tfor(let i in this._onSubmit)\n\t\t{\n\t\t\tthis._onSubmit[i](this, event);\n\t\t}\n\t}\n\n\tpostRender()\n\t{\n\t\tfor(let i in this._onRender)\n\t\t{\n\t\t\tthis._onRender[i](this.args.form);\n\t\t}\n\t}\n\n\tcustomFields()\n\t{\n\t\treturn {};\n\t}\n\n\tsubmit()\n\t{\n\t\t// console.log(this);\n\t}\n\n\tprogressUp(event)\n\t{\n\t\tconsole.log(event.loaded, event.total, event.loaded / event.total);\n\t}\n\n\tprogressDown(event)\n\t{\n\t\tconsole.log(event.loaded, event.total, event.loaded / event.total);\n\t}\n}\n","import { Config      } from 'Config';\nimport { FormWrapper } from './FormWrapper';\nimport { HiddenField } from '../../form/HiddenField';\nimport { Repository  } from '../../base/Repository';\n\nconst backend = Config ? Config.backend : '//';\n\nexport class SearchForm extends FormWrapper\n{\n\tconstructor(args, path, method = 'GET', customFields = {})\n\t{\n\t\tsuper(\n\t\t\targs\n\t\t\t, path\n\t\t\t, 'POST'\n\t\t\t, {search: HiddenField}\n\t\t);\n\n\t\tthis.superTemplate = this.template;\n\n\t\tthis.args.records = [];\n\t\tthis.selected     = null;\n\n\t\tthis.template = `\n\t\t\t${this.superTemplate}\n\t\t\t<div cv-each = \"records:record:r\" class = \"dropdown-results\">\n\t\t\t\t<div\n\t\t\t\t\tcv-on         = \"click:select(event)\"\n\t\t\t\t\tdata-index    = \"[[r]]\"\n\t\t\t\t\tdata-publicId = \"[[record.publicId]]\"\n\t\t\t\t\tclass         = \"[[record.classes]]\"\n\t\t\t\t>\n\t\t\t\t\t[[record.title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonLoad(form)\n\t{\n\t\tfor(let i in form.args.fields)\n\t\t{\n\t\t\tif(!form.args.fields[i].tags.input)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(form.args.fields[i].args.attrs.type == 'hidden')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet element = form.args.fields[i].tags.input.element;\n\n\t\t\telement.focus();\n\n\t\t\tbreak;\n\t\t}\n\n\t\tform.args.flatValue.bindTo('keyword', (v)=>{\n\t\t\tthis.args.records = [];\n\t\t\tthis.selected     = null;\n\n\t\t\tif(!v)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log(this.path, v);\n\n\t\t\tRepository.request(\n\t\t\t\tbackend + this.path\n\t\t\t\t, {keyword: v}\n\t\t\t).then((response)=>{\n\t\t\t\tconsole.log(response.body);\n\t\t\t\tif(!response.body)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.args.records = response.body.map((r)=>{\n\t\t\t\t\tr.classes = '';\n\t\t\t\t\tif(r.title == v)\n\t\t\t\t\t{\n\t\t\t\t\t\tr.classes = 'selected';\n\t\t\t\t\t\tthis.selected = r;\n\t\t\t\t\t}\n\t\t\t\t\treturn r;\n\t\t\t\t});\n\t\t\t});\n\t\t})\n\n\n\t\tsuper.onLoad(form);\n\t}\n\n\tonRequest()\n\t{\n\t\t// this.args.view.args.loading = true;\n\t\t// this.args.view.args.classes += ' loading';\n\n\t\treturn super.onRequest();\n\t}\n\n\tonResponse(response)\n\t{\n\t\t// this.args.view.args.loading = false;\n\t\t// this.args.view.args.classes = '';\n\n\t\t// if(!this.args.wrapper)\n\t\t// {\n\t\t// \tthis.args.view.addRecord(response.body);\n\t\t// }\n\t\t// else\n\t\t// {\n\t\t// \tthis.args.wrapper.refresh(response.body);\n\t\t// }\n\n\t\t// this.args.view.addButtonClicked();\n\n\t\tsuper.onResponse(response);\n\t}\n\n\tselect(event)\n\t{\n\t\tlet index    = event.target.getAttribute('data-index');\n\t\tlet publicId = event.target.getAttribute('data-publicId');\n\n\t\tlet record   = this.args.records[index];\n\n\t\tconsole.log(record);\n\n\t\tthis.args.view.addRecord(record);\n\t\tthis.args.view.addButtonClicked();\n\n\t\treturn;\n\n\t\tRepository.request(\n\t\t\tbackend\n\t\t\t\t+ this.path\n\t\t\t\t+ '/'\n\t\t\t\t+ publicId\n\t\t).then((response)=>{\n\t\t\tconsole.log(response.body);\n\t\t\tif(!response.body)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.args.view.addRecord(response.body);\n\t\t\tthis.args.view.addButtonClicked();\n\t\t});\n\t}\n\n\tonSubmit(form, event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif(this.selected)\n\t\t{\n\t\t\tthis.args.view.addRecord(this.selected);\n\t\t\tthis.args.view.addButtonClicked();\n\t\t}\n\t\treturn false;\n\t}\n}\n","import { Config      } from 'Config';\nimport { Form        } from '../../form/Form';\nimport { FieldSet    } from '../../form/FieldSet';\nimport { CreateForm  } from './CreateForm';\nimport { SearchForm  } from './SearchForm';\nimport { FormWrapper } from './FormWrapper';\nimport { Wrapper     } from './Wrapper';\n// import { Loader     } from '../Ui/ZZ';\n\nexport class View extends FieldSet\n{\n\tconstructor(values, form, parent, key)\n\t{\n\t\tsuper(values, form, parent, key);\n\n\t\tthis.args._fields = [];\n\n\t\tthis.dragging = false;\n\t\tthis.dropping = false;\n\n\t\tfor(let i in this.args.fields)\n\t\t{\n\t\t\tthis.args._fields[i] = this.wrapSubfield(this.args.fields[i]);\n\t\t}\n\n\t\tthis.args.fields[-1].disable();\n\n\t\tthis.args.creating  = '';\n\t\tthis.args.fieldType = '';\n\n\t\tthis.args.createForm = this.args.createForm || '';\n\t\tthis.args.searchForm = this.args.searchForm || '';\n\t\tthis.args.createFormReady = false;\n\n\t\tthis.setCreateForm({view: this});\n\n\t\tthis.args.loader  = '...';\n\t\tthis.args.addIcon = '&#215;';\n\t\tthis.args.addIcon = 'a';\n\t\tthis.args.addIcon = '+';\n\n\t\tthis.args.draggable = 'true';\n\n\t\tthis.template = `\n\t\t\t<label\n\t\t\t\tfor        = \"${this.args.name}\"\n\t\t\t\tdata-type  = \"${this.args.attrs.type}\"\n\t\t\t\tdata-multi = \"${this.args.attrs['data-multi'] ? 'true' : 'false'}\"\n\t\t\t>\n\t\t\t\t<span cv-if = \"title\">\n\t\t\t\t\t<span cv-ref = \"title:curvature/base/Tag\">[[title]]</span>\n\t\t\t\t</span>\n\n\t\t\t\t<fieldset\n\t\t\t\t\tname  = \"${this.args.name}\"\n\t\t\t\t\tclass = \"multi-field [[creating]] [[fieldType]]\"\n\t\t\t\t>\n\n\t\t\t\t\t<div class = \"record-list\" cv-each = \"_fields:field:f\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass     = \"single-record\"\n\t\t\t\t\t\t\tdata-for  = \"[[f]]\"\n\t\t\t\t\t\t>[[field]]</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = \"overlay create\">\n\t\t\t\t\t\t<div class = \"form constrict\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcv-on = \"click:addButtonClicked(event)\"\n\t\t\t\t\t\t\t\tclass = \"bubble bottom left-margin close\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&#215;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t[[createForm]]\n\t\t\t\t\t\t[[searchForm]]\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class = \"overlay loading\">\n\t\t\t\t\t\t[[loader]]\n\t\t\t\t\t</div>\n\t\t\t\t\t<div cv-if = \"createFormReady\" class=\"add-button-holder\">\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcv-on = \"click:addButtonClicked(event)\"\n\t\t\t\t\t\t\tclass = \"bubble bottom left-margin add\"\n\t\t\t\t\t\t\ttab-index = \"0\"\n\t\t\t\t\t\t>[[addIcon]]</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t</fieldset>\n\n\t\t\t\t<span cv-each = \"errors:error:e\">\n\t\t\t\t\t<p class = \"cv-error\">[[error]]</p>\n\t\t\t\t</span>\n\n\t\t\t</label>\n\t\t`;\n\t}\n\n\tsetCreateForm(args)\n\t{\n\t\tlet origin = '';\n\n\t\tif(Config && Config.backend)\n\t\t{\n\t\t\torigin = Config.backend;\n\t\t}\n\n\t\tif(this.args.attrs['data-create-endpoint'] !== false)\n\t\t{\n\t\t\tthis.args.createForm = new CreateForm(\n\t\t\t\tObject.assign({}, args)\n\t\t\t\t, this.args.attrs['data-create-endpoint']\n\t\t\t\t\t? origin + this.args.attrs['data-create-endpoint']\n\t\t\t\t\t: (args.publicId\n\t\t\t\t\t\t? origin + `${this.args.attrs['data-endpoint']}/${args.publicId}/edit`\n\t\t\t\t\t\t: origin + `${this.args.attrs['data-endpoint']}/create`\n\t\t\t\t\t)\n\t\t\t);\n\n\t\t\tthis.args.createForm._onLoad.push((wrap, form)=>{\n\t\t\t\tthis.args.createFormReady = true;\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.args.createFormReady = true;\n\t\t}\n\n\t\tconsole.log(this.args.createFormReady);\n\n\t\tthis.args.searchForm = new SearchForm(\n\t\t\tObject.assign({}, args)\n\t\t\t, origin + this.args.attrs['data-endpoint']\n\t\t);\n\t}\n\n\twrapSubfield(field)\n\t{\n\t\treturn new Wrapper({field, parent:this});\n\t}\n\n\taddButtonClicked()\n\t{\n\t\tif(!this.args.creating)\n\t\t{\n\t\t\tthis.args.creating = 'creating';\n\t\t}\n\t}\n\n\taddRecord(record)\n\t{\n\t\tthis.args.creating = '';\n\n\t\tif(!Array.isArray(record))\n\t\t{\n\t\t\trecord = [record];\n\t\t}\n\n\t\tfor(let i in record)\n\t\t{\n\t\t\tlet fieldClass = this.args.fields[-1].constructor;\n\n\n\t\t\tlet skeleton   = Object.assign({}, this.args.fields[-1].skeleton);\n\t\t\tlet name       = Object.values(this.args.fields).length - 1;\n\n\t\t\tskeleton = this.cloneSkeleton(skeleton);\n\n\t\t\tskeleton = this.correctNames(skeleton, name);\n\t\t\tskeleton.attrs = skeleton.attrs ?? {};\n\n\t\t\tskeleton.attrs['data-array'] = true;\n\n\t\t\tlet superSkeleton = {};\n\n\t\t\tsuperSkeleton[name] = skeleton;\n\n\t\t\tlet newField = Form.renderFields(superSkeleton, this)[name];\n\n\t\t\tthis.args.fields[name] = newField;\n\n\t\t\tlet newWrap = this.wrapSubfield(newField);\n\n\t\t\tnewField.args.value.id    = record[i].id    || '';\n\t\t\tnewField.args.value.class = record[i].class || '';\n\t\t\tnewField.args.value.title = record[i].title || '';\n\n\t\t\tnewField.args.value.key = this.args._fields.length;\n\n\t\t\tthis.args._fields.push(newWrap);\n\n\t\t\tnewWrap.refresh(record[i]);\n\t\t}\n\n\t}\n\n\teditRecord(record, wrapper)\n\t{\n\t\tthis.setCreateForm({\n\t\t\tview: this\n\t\t\t, publicId: record.publicId\n\t\t\t, wrapper\n\t\t});\n\n\t\tthis.args.creating = this.args.creating ? '' : 'creating';\n\t}\n\n\tdeleteImage(index)\n\t{\n\t\tconsole.log(index, this.args.fields);\n\n\t\tthis.args.fields[index].disable();\n\t\tthis.args._fields[index].args.classes = 'deleted';\n\t}\n\n\tundeleteImage(index)\n\t{\n\t\tthis.args.fields[index].enable();\n\t\t// console.log(this.args.fields[index]);\n\t\t// console.log(this.args._fields[index]);\n\t\t// console.log('===============');\n\n\t\tthis.args._fields[index].args.classes = '';\n\t}\n\n\tcloneSkeleton(object, level = 0)\n\t{\n\t\tlet _object = {};\n\n\t\tif(Array.isArray(object))\n\t\t{\n\t\t\t_object = [];\n\t\t}\n\n\t\tfor(let i in object)\n\t\t{\n\t\t\tif(i == 'fields')\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!object[i] || typeof object[i] !== 'object')\n\t\t\t{\n\t\t\t\t_object[i] = object[i];\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_object[i] = Object.assign({}, this.cloneSkeleton(\n\t\t\t\tobject[i]\n\t\t\t\t, level+1\n\t\t\t));\n\t\t}\n\n\t\treturn _object;\n\t}\n\n\tcorrectNames(skeleton, id)\n\t{\n\t\tskeleton.name = skeleton.name.replace(\n\t\t\t/\\[-1\\]/\n\t\t\t, `[${id}]`\n\t\t);\n\n\t\tskeleton.attrs.name = skeleton.name;\n\n\t\tif('children' in skeleton)\n\t\t{\n\t\t\tfor(let i in skeleton.children)\n\t\t\t{\n\t\t\t\tskeleton.children[i] = this.correctNames(\n\t\t\t\t\tskeleton.children[i]\n\t\t\t\t\t, id\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn skeleton;\n\t}\n\n\tdrag(event)\n\t{\n\t\tthis.dragging = event.target;\n\t}\n\n\tdragOver(event)\n\t{\n\t\tif(!this.dragging)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet dropping = event.target;\n\n\t\twhile(dropping && !dropping.matches('[draggable=\"true\"]'))\n\t\t{\n\t\t\tdropping = dropping.parentNode;\n\t\t}\n\n\t\tif(dropping)\n\t\t{\n\t\t\tthis.dropping = dropping;\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tdrop(event)\n\t{\n\t\tevent.stopPropagation();\n\n\t\tlet dragLabel = this.dragging.querySelector('label');\n\t\tlet dropLabel = this.dropping.querySelector('label');\n\n\t\tlet dragName = dragLabel.getAttribute('for');\n\t\tlet dropName = dropLabel.getAttribute('for');\n\n\t\tlet dragIndex = this.extractIndex(dragName);\n\t\tlet dropIndex = this.extractIndex(dropName);\n\n\t\tif(dragIndex == dropIndex || dragIndex == dropIndex - 1)\n\t\t{\n\t\t\tthis.dragging = false;\n\t\t\tthis.dropping = false;\n\t\t\treturn;\n\t\t}\n\n\t\tlet dragFields = dragLabel.querySelectorAll(\n\t\t\t'[name^=\"' + dragName + '\"]'\n\t\t);\n\t\tlet dragLabels = dragLabel.querySelectorAll(\n\t\t\t'[for^=\"' + dragName + '\"]'\n\t\t);\n\n\t\tlet dropFields = dropLabel.querySelectorAll(\n\t\t\t'[name^=\"' + dropName + '\"]'\n\t\t);\n\t\tlet dropLabels = dropLabel.querySelectorAll(\n\t\t\t'[for^=\"' + dropName + '\"]'\n\t\t);\n\n\t\tlet dropBefore = this.dropping;\n\n\t\tlet offset = 0;\n\n\t\tlet dragField, dropField;\n\n\t\tfor(let i in this.args.fields)\n\t\t{\n\t\t\tlet currentFieldSet = this.args.fields[i].tags.input.element;\n\t\t\tlet currentLabel    = this.args.fields[i].tags.label.element;\n\t\t\tlet currentName     = currentFieldSet.getAttribute('name');\n\n\t\t\tif(dragLabel == currentLabel)\n\t\t\t{\n\t\t\t\tdragField = this.args.fields[i];\n\t\t\t}\n\n\t\t\tif(dropLabel == currentLabel)\n\t\t\t{\n\t\t\t\tdropField = this.args.fields[i];\n\t\t\t}\n\n\t\t\tlet currentIndex    = this.extractIndex(currentName);\n\t\t\tlet newName         = false;\n\n\t\t\tif(currentIndex < 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(dragIndex > dropIndex\n\t\t\t\t&& currentIndex >= dropIndex\n\t\t\t\t&& currentIndex <= dragIndex\n\t\t\t){\n\t\t\t\tnewName = this.changeIndex(currentName, currentIndex + 1);\n\t\t\t\toffset = -1;\n\t\t\t}\n\t\t\telse if(\n\t\t\t\tdragIndex < dropIndex\n\t\t\t\t&& currentIndex <= dropIndex\n\t\t\t\t&& currentIndex >= dragIndex\n\t\t\t){\n\t\t\t\tnewName = this.changeIndex(currentName, currentIndex - 1);\n\t\t\t\toffset = 0;\n\t\t\t}\n\n\t\t\tif(newName !== false)\n\t\t\t{\n\t\t\t\tthis.changeAttributePrefix(\n\t\t\t\t\tcurrentLabel\n\t\t\t\t\t, 'for'\n\t\t\t\t\t, currentName\n\t\t\t\t\t, newName\n\t\t\t\t);\n\n\t\t\t\tthis.args.fields[i].args.fieldName = newName;\n\n\t\t\t\tthis.changeAttributePrefix(\n\t\t\t\t\tcurrentFieldSet\n\t\t\t\t\t, 'name'\n\t\t\t\t\t, currentName\n\t\t\t\t\t, newName\n\t\t\t\t);\n\n\t\t\t\tlet currentFields = currentFieldSet.parentNode.querySelectorAll(\n\t\t\t\t\t'[name^=\"' + currentName + '\"]'\n\t\t\t\t);\n\n\t\t\t\tfor(let i = 0; i < currentFields.length; i++)\n\t\t\t\t{\n\t\t\t\t\tthis.changeAttributePrefix(\n\t\t\t\t\t\tcurrentFields[i]\n\t\t\t\t\t\t, 'name'\n\t\t\t\t\t\t, currentName\n\t\t\t\t\t\t, newName\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tlet currentLabels = currentFieldSet.parentNode.querySelectorAll(\n\t\t\t\t\t'[for^=\"' + currentName + '\"]'\n\t\t\t\t);\n\n\t\t\t\tfor(let i = 0; i < currentLabels.length; i++)\n\t\t\t\t{\n\t\t\t\t\tthis.changeAttributePrefix(\n\t\t\t\t\t\tcurrentLabels[i]\n\t\t\t\t\t\t, 'for'\n\t\t\t\t\t\t, currentName\n\t\t\t\t\t\t, newName\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdragName = dragLabel.getAttribute('for');\n\t\tdropName = dropLabel.getAttribute('for');\n\n\t\tdragIndex = this.extractIndex(dragName);\n\t\tdropIndex = this.extractIndex(dropName);\n\n\t\tthis.changeAttributePrefix(\n\t\t\tdragLabel\n\t\t\t, 'for'\n\t\t\t, dragName\n\t\t\t, this.changeIndex(dragName, dropIndex + offset)\n\t\t);\n\n\t\tfor(let i =0; i < dragFields.length; i++)\n\t\t{\n\t\t\tthis.changeAttributePrefix(\n\t\t\t\tdragFields[i]\n\t\t\t\t, 'name'\n\t\t\t\t, dragName\n\t\t\t\t, this.changeIndex(dragName, dropIndex + offset)\n\t\t\t);\n\t\t}\n\n\t\tfor(let i =0; i < dragLabels.length; i++)\n\t\t{\n\t\t\tthis.changeAttributePrefix(\n\t\t\t\tdragLabels[i]\n\t\t\t\t, 'for'\n\t\t\t\t, dragName\n\t\t\t\t, this.changeIndex(dragName, dropIndex + offset)\n\t\t\t);\n\t\t}\n\n\t\tdragField.args.fieldName = dragLabel.getAttribute('for');\n\n\t\tthis.changeAttributePrefix(\n\t\t\tdropLabel\n\t\t\t, 'for'\n\t\t\t, dropName\n\t\t\t, this.changeIndex(dropName, (dropIndex + offset) + 1)\n\t\t);\n\n\t\tfor(let i =0; i < dropFields.length; i++)\n\t\t{\n\t\t\tthis.changeAttributePrefix(\n\t\t\t\tdropFields[i]\n\t\t\t\t, 'name'\n\t\t\t\t, dropName\n\t\t\t\t, this.changeIndex(dropName, (dropIndex + offset) + 1)\n\t\t\t);\n\t\t}\n\n\t\tfor(let i =0; i < dropLabels.length; i++)\n\t\t{\n\t\t\tthis.changeAttributePrefix(\n\t\t\t\tdropLabels[i]\n\t\t\t\t, 'for'\n\t\t\t\t, dropName\n\t\t\t\t, this.changeIndex(dropName, (dropIndex + offset) + 1)\n\t\t\t);\n\t\t}\n\n\t\tdropField.args.fieldName = dropLabel.getAttribute('for');\n\n\t\tthis.dragging.parentNode.insertBefore(\n\t\t\tthis.dragging, dropBefore\n\t\t);\n\n\t\tthis.dragging = false;\n\t\tthis.dropping = false;\n\t}\n\n\tdragStop()\n\t{\n\t\tthis.dragging = false;\n\t\tthis.dropping = false;\n\t}\n\n\tchangeAttributePrefix(node, attribute, oldPrefix, newPrefix)\n\t{\n\t\tlet oldName = node.getAttribute(attribute);\n\n\t\tlet newName = newPrefix\n\t\t\t+ node.getAttribute(attribute).substring(\n\t\t\t\toldPrefix.length\n\t\t\t);\n\n\t\tnode.setAttribute(attribute, newName);\n\t}\n\n\textractIndex(name)\n\t{\n\t\tlet groups;\n\n\t\tif(groups = /\\[(-?\\d+)\\]$/.exec(name))\n\t\t{\n\t\t\treturn parseInt(groups[1]);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tchangeIndex(name, index)\n\t{\n\t\tlet newName = name.replace(/\\[(-?\\d+)\\]$/, '[' + index + ']');\n\n\t\treturn newName;\n\t}\n\n\tcancel(event)\n\t{\n\t\tevent.stopPropagation();\n\t}\n}\n","import { Config     } from 'Config';\nimport { View       } from '../../base/View';\nimport { Repository } from '../../base/Repository';\n\nexport class Wrapper extends View\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\n\t\tthis.template = `\n\t\t\t<div\n\t\t\t\tclass = \"wrapped-field [[classes]]\"\n\t\t\t\tcv-on = \"click:editRecord(event, key)\"\n\t\t\t\ttitle = \"[[fieldName]]: [[id]]\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcv-on = \"click:deleteImage(event, key)\"\n\t\t\t\t\tstyle = \"display: inline; cursor:pointer;\"\n\t\t\t\t>\n\t\t\t\t\t[[icon]]\n\t\t\t\t</div>\n\t\t\t\t<div class = \"field-content\">\n\t\t\t\t\t[[title]]\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div style = \"display:none\">[[field]]</div>\n\t\t`;\n\n\t\t// console.log(this.args.field);\n\n\t\tthis.args.field     = this.args.field || '!';\n\t\tthis.args.keyword   = '';\n\t\tthis.args.title     = '';\n\t\tthis.args.record    = {};\n\t\tthis.args.key       = this.args.field.key;\n\t\tthis.args.classes   = '';\n\t\tthis.args.icon      = '×';\n\t\tthis.deleted        = false;\n\n\t\tthis.args.field.args.bindTo('fieldName', (v)=>{\n\t\t\tthis.args.fieldName = v;\n\t\t});\n\n\t\tthis.args.fieldName = this.args.field.args.name;\n\n\t\tthis.args.id = this.args.field.args.value.id;\n\n\t\tthis.args.bindTo('id', (v)=>{\n\t\t\tthis.args.field.args.value.id = v;\n\t\t});\n\n\t\tthis.args.field.args.value.bindTo('id', (v,k)=>{\n\t\t\tif(!v)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tRepository.request(\n\t\t\t\tthis.backendPath()\n\t\t\t\t, {id: v}\n\t\t\t).then(response=>{\n\t\t\t\tthis.args.id = v;\n\n\t\t\t\tlet record = response.body[0];\n\n\t\t\t\tif(!record)\n\t\t\t\t{\n\t\t\t\t\tthis.args.publicId = null;\n\t\t\t\t\tthis.args.title    = null;\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.refresh(record);\n\t\t\t});\n\t\t}, {wait: 0});\n\n\t\tthis.args.field.args.value.bindTo('keyword', (v)=>{\n\t\t\tthis.args.keyword = v;\n\t\t});\n\t}\n\n\teditRecord()\n\t{\n\t\tthis.args.parent.editRecord(\n\t\t\tthis.args.record\n\t\t\t, this\n\t\t);\n\t}\n\n\tdeleteImage(event, index)\n\t{\n\t\tevent.stopPropagation();\n\n\t\tif(!this.deleted)\n\t\t{\n\t\t\tthis.args.icon = '↺';\n\t\t\tthis.args.parent.deleteImage(index);\n\t\t\tthis.deleted = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.args.icon = '×';\n\t\t\tthis.args.parent.undeleteImage(index);\n\t\t\tthis.deleted = false;\n\t\t}\n\t}\n\n\tbackendPath()\n\t{\n\t\tconst backend = Config ? Config.backend : '//';\n\n\t\treturn backend + this.args.parent.args.attrs['data-endpoint'];\n\t}\n\n\tgetRecordTitle(record)\n\t{\n\t\tif(record._titleField)\n\t\t{\n\t\t\treturn record[ record._titleField ];\n\t\t}\n\n\t\treturn record.title\n\t\t\t|| record.publicId\n\t\t\t|| record.id;\n\t}\n\n\trefresh(model)\n\t{\n\t\tfor(let i in model)\n\t\t{\n\t\t\tthis.args[i] = model[i];\n\t\t}\n\n\t\tthis.args.record = model;\n\n\t\tthis.args.title = this.getRecordTitle(model);\n\t}\n}\n","import { Bindable } from '../base/Bindable';\n\nexport class Keyboard\n{\n\tstatic get()\n\t{\n\t\treturn this.instance = this.instance || new this;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.maxDecay = 120;\n\n\t\tthis.listening = true;\n\n\t\tthis.keys  = Bindable.makeBindable({});\n\t\tthis.codes = Bindable.makeBindable({});\n\n\t\tdocument.addEventListener('keyup', (event) => {\n\t\t\tthis.keys[ event.key ]   = -1;\n\t\t\tthis.codes[ event.code ] = -1;\n\t\t});\n\n\t\tdocument.addEventListener('keydown', (event) => {\n\t\t\tif(this.keys[ event.key ] > 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.keys[ event.key ]   = 1;\n\t\t\tthis.codes[ event.code ] = 1;\n\t\t});\n\n\t\twindow.addEventListener('blur', (event)=>{\n\t\t\tfor(let i in this.keys)\n\t\t\t{\n\t\t\t\tthis.keys[i] = -1;\n\t\t\t}\n\t\t\tfor(let i in this.codes)\n\t\t\t{\n\t\t\t\tthis.codes[i] = -1;\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(key)\n\t{\n\t\tif(!this.keys[key])\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this.keys[key];\n\t}\n\n\tgetKeyCode(code)\n\t{\n\t\tif(!this.codes[code])\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this.codes[code];\n\t}\n\n\tupdate()\n\t{\n\t\tfor(var i in this.keys)\n\t\t{\n\t\t\tif(this.keys[i] > 0)\n\t\t\t{\n\t\t\t\tthis.keys[i]++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.keys[i]--;\n\n\t\t\t\tif(this.keys[i] < -this.maxDecay)\n\t\t\t\t{\n\t\t\t\t\tdelete this.keys[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(var i in this.codes)\n\t\t{\n\t\t\tif(this.codes[i] > 0)\n\t\t\t{\n\t\t\t\tthis.codes[i]++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.codes[i]--;\n\n\t\t\t\tif(this.codes[i] < -this.maxDecay)\n\t\t\t\t{\n\t\t\t\t\tdelete this.keys[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import { ScrollTag } from './ScrollTag';\nimport { Dom       } from '../base/Dom';\n\nexport class LazyTag extends ScrollTag\n{\n\tconstructor(element, parent, ref, index, direct)\n\t{\n\t\tsuper(element, parent, ref, index, direct);\n\n\t\tthis.element.classList.remove('cv-visible');\n\t\tthis.element.classList.add('cv-not-visible');\n\n\t\tthis.bindTo('visible', (v)=>{\n\t\t\tif(v)\n\t\t\t{\n\t\t\t\tif(this.afterScroll)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.afterScroll);\n\t\t\t\t}\n\t\t\t\tthis.afterScroll = setTimeout(\n\t\t\t\t\t()=>{\n\t\t\t\t\t\tif(!this.element)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.element.classList.add('cv-visible');\n\t\t\t\t\t\tthis.element.classList.remove('cv-not-visible');\n\n\t\t\t\t\t\tDom.mapTags(this.element, '[cv-lazy-style]', (tag) => {\n\t\t\t\t\t\t\tlet lazyStyle = tag.getAttribute('cv-lazy-style');\n\t\t\t\t\t\t\tlet style     = tag.getAttribute('style');\n\n\t\t\t\t\t\t\ttag.setAttribute('style', style + ';' + lazyStyle);\n\n\t\t\t\t\t\t\ttag.removeAttribute('cv-lazy-style');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t, (\n\t\t\t\t\t\t((this.offsetTop || this.element.offsetTop) * 0.5)\n\t\t\t\t\t\t+ ((this.element.offsetLeft) * 0.5)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Bindable } from '../base/Bindable';\nimport { Dom      } from '../base/Dom';\nimport { Tag      } from '../base/Tag';\n\nexport class PopOutTag extends Tag\n{\n\tconstructor(element, parent, ref, index, direct)\n\t{\n\t\tsuper(element, parent, ref, index, direct);\n\n\t\tthis.poppedOut = false;\n\t\tthis.style     = element.getAttribute('style') || '';\n\t\tthis.moving    = false;\n\n\t\tthis.hostSelector = element.getAttribute('cv-pop-to');\n\t\tthis.popMargin = element.getAttribute('cv-pop-margin') || 0;\n\t\tthis.popSpeed = element.getAttribute('data-pop-speed') || 1750;\n\n\t\telement.removeAttribute('cv-pop-to');\n\t\telement.removeAttribute('cv-pop-margin');\n\t\telement.removeAttribute('data-pop-speed');\n\n\t\tthis.verticalDuration   = 0.4;\n\t\tthis.horizontalDuration = 0.1;\n\n\t\tthis.unpoppedStyle  = '';\n\t\tthis.previousScroll = 0;\n\n\t\tthis.bodyStyle  = '';\n\t\tthis.bodyScroll = 0;\n\n\t\tthis.element.classList.add('unpopped');\n\n\t\tthis.scrollStyle = '';\n\n\t\tthis.style = '';\n\n\t\tthis.popTimeout = null;\n\n\t\t// this.element.addEventListener('cvDomDetached', this.detachListener);\n\t\tthis.rect = null;\n\t\tthis.transformRect = null;\n\n\t\tthis.clickListener = (event) => {\n\t\t\tthis.rect = this.element.getBoundingClientRect();\n\n\t\t\tif(!this.poppedOut)\n\t\t\t{\n\t\t\t\tthis.distance = Math.sqrt(\n\t\t\t\t\tthis.rect.top ** 2\n\t\t\t\t\t+ this.rect.left ** 2\n\t\t\t\t);\n\n\t\t\t\tconst cut = this.popSpeed;\n\n\t\t\t\tlet fromRight  = window.innerWidth  - this.rect.right;\n\t\t\t\tlet fromBottom = window.innerHeight - this.rect.bottom;\n\n\t\t\t\tlet horizontalAverage = (this.rect.left + fromRight)  / 2;\n\t\t\t\tlet vericalAverage    = (this.rect.top  + fromBottom) / 2;\n\n\t\t\t\tthis.horizontalDuration = horizontalAverage / cut;\n\t\t\t\tthis.verticalDuration   = vericalAverage / cut;\n\n\t\t\t\tif(this.horizontalDuration < 0.1)\n\t\t\t\t{\n\t\t\t\t\tthis.horizontalDuration = 0.1;\n\t\t\t\t}\n\t\t\t\tif(this.verticalDuration < 0.1)\n\t\t\t\t{\n\t\t\t\t\tthis.verticalDuration = 0.1;\n\t\t\t\t}\n\n\t\t\t\tif(this.horizontalDuration > 0.4)\n\t\t\t\t{\n\t\t\t\t\tthis.horizontalDuration = 0.4;\n\t\t\t\t}\n\t\t\t\tif(this.verticalDuration > 0.4)\n\t\t\t\t{\n\t\t\t\t\tthis.verticalDuration = 0.4;\n\t\t\t\t}\n\n\t\t\t\t// console.log(this.horizontalDuration, this.verticalDuration);\n\t\t\t}\n\n\t\t\tif(!this.element.contains(event.target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif(this.moving)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.poppedOut)\n\t\t\t{\n\t\t\t\tthis.pop();\n\t\t\t}\n\t\t\telse if(event.target.matches('.closeButton') && this.poppedOut)\n\t\t\t{\n\t\t\t\tthis.unpop();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.escapeListener = (event) => {\n\t\t\tif(!this.poppedOut)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(event.key !== 'Escape')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.unpop();\n\t\t};\n\n\t\tthis.resizeListener = (event) => {\n\t\t\tif(!this.poppedOut)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet hostTag  = this.element;\n\n\t\t\twhile(hostTag.parentNode && !hostTag.matches(this.hostSelector))\n\t\t\t{\n\t\t\t\tif(hostTag.parentNode == document)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\thostTag = hostTag.parentNode;\n\t\t\t}\n\n\t\t\tlet hostRect = hostTag.getBoundingClientRect();\n\n\t\t\tlet style = this.style + this.unpoppedStyle;\n\n\t\t\tlet x = hostRect.x;\n\t\t\tlet y = hostRect.y  + document.documentElement.scrollTop;\n\t\t\tlet w = hostRect.width;\n\t\t\tlet h = hostRect.height;\n\n\t\t\tif(this.transformRect)\n\t\t\t{\n\t\t\t\tx -= this.transformRect.x;\n\t\t\t\ty -= this.transformRect.y;\n\t\t\t}\n\n\t\t\tx + this.popMargin;\n\t\t\ty + this.popMargin;\n\t\t\tw + this.popMargin * 2;\n\t\t\th + this.popMargin * 2;\n\n\t\t\tstyle += `;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t\tposition:  fixed;\n\t\t\t\tleft:      ${x}px;\n\t\t\t\ttop:        ${y}px;\n\t\t\t\twidth:      ${w}px;\n\t\t\t\theight:     ${h}px;\n\t\t\t\toverflow-y: auto;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t`;\n\n\t\t\tthis.element.setAttribute('style', style);\n\t\t};\n\n\t\tif(!this.element.___clickListener___)\n\t\t{\n\t\t\tObject.defineProperty(this.element, '___scrollListeners___', {\n\t\t\t\tenumerable: false\n\t\t\t\t, writable: true\n\t\t\t});\n\n\t\t\telement.___clickListener___ = this.clickListener;\n\t\t\telement.___escapeListener___ = this.escapeListener;\n\t\t\telement.___resizeListener___ = this.resizeListener;\n\n\t\t\tthis.element.addEventListener('click',  element.___clickListener___);\n\n\t\t\twindow.addEventListener('keyup',  element.___escapeListener___);\n\t\t\twindow.addEventListener('resize', element.___resizeListener___);\n\n\t\t\tthis.cleanup.push(((element)=>()=>{\n\t\t\t\telement.removeEventListener('click', element.___clickListener___);\n\t\t\t\twindow.removeEventListener('keyup',  element.___escapeListener___);\n\t\t\t\twindow.removeEventListener('resize', element.___resizeListener___);\n\t\t\t})(element));\n\t\t}\n\t}\n\n\tstatic popLevel()\n\t{\n\t\tif(!this.level)\n\t\t{\n\t\t\tthis.level = 0;\n\t\t}\n\n\t\tthis.level++;\n\n\t\treturn this.level;\n\t}\n\n\tstatic unpopLevel()\n\t{\n\t\tif(!this.level)\n\t\t{\n\t\t\tthis.level = 0;\n\t\t}\n\n\t\tthis.level--;\n\n\t\tif(this.level < 0)\n\t\t{\n\t\t\tthis.level = 0;\n\t\t}\n\n\t\treturn this.level;\n\t}\n\n\tpause(paused = true)\n\t{\n\t\tsuper.pause(paused);\n\n\t\tif(paused)\n\t\t{\n\t\t\tdocument.body.setAttribute('style', this.bodyStyle);\n\t\t\tdocument.body.setAttribute('style', '');\n\t\t}\n\t}\n\n\tpop()\n\t{\n\t\tPopOutTag.popLevel();\n\n\t\tthis.previousScroll = window.scrollY;\n\n\t\tthis.rect  = this.element.getBoundingClientRect();\n\t\tthis.style = this.element.getAttribute('style');\n\n\t\tlet hostTag = this.element;\n\n\t\tthis.transformRect = null;\n\n\t\t// console.log(hostTag);\n\n\t\twhile(hostTag.parentNode && !hostTag.matches(this.hostSelector))\n\t\t{\n\t\t\tif(hostTag.parentNode == document)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\thostTag = hostTag.parentNode;\n\n\t\t\tif(!this.transformRect && getComputedStyle(hostTag).transform !== 'none')\n\t\t\t{\n\t\t\t\tthis.transformRect = hostTag.getBoundingClientRect();\n\t\t\t}\n\t\t}\n\n\t\tconsole.log(this.transformRect);\n\n\t\tlet hostRect = hostTag.getBoundingClientRect();\n\n\t\tthis.element.classList.add('popping');\n\n\t\tlet oX = this.rect.x;\n\t\tlet oY = this.rect.y;\n\t\tlet oW = this.rect.width;\n\t\tlet oH = this.rect.height;\n\n\t\tif(this.transformRect)\n\t\t{\n\t\t\toX -= this.transformRect.x;\n\t\t\toY -= this.transformRect.y;\n\t\t}\n\n\t\twindow.requestAnimationFrame(()=>{\n\t\t\tthis.unpoppedStyle = `\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       ${oX}px;\n\t\t\t\ttop:        ${oY}px;\n\t\t\t\twidth:      ${oW}px;\n\t\t\t\theight:     ${oH}px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition-duration: 0s;\n\t\t\t\toverflow: hidden;\n\t\t\t`;\n\n\t\t\tlet x = hostRect.x;\n\t\t\tlet y = hostRect.y  + document.documentElement.scrollTop;\n\t\t\tlet w = hostRect.width;\n\t\t\tlet h = hostRect.height;\n\n\t\t\tconsole.log(this.transformRect);\n\n\t\t\tif(this.transformRect)\n\t\t\t{\n\t\t\t\tx -= this.transformRect.x;\n\t\t\t\ty -= this.transformRect.y;\n\t\t\t}\n\n\t\t\tx + this.popMargin;\n\t\t\ty + this.popMargin;\n\t\t\tw + this.popMargin * 2;\n\t\t\th + this.popMargin * 2;\n\n\t\t\t// transition: width ${this.horizontalDuration}s  ease-out\n\t\t\t// , top ${this.verticalDuration}s    ease-out\n\t\t\t// , left ${this.horizontalDuration}s ease-out\n\t\t\t// , height ${this.verticalDuration}s ease-out\n\t\t\t// , all ${this.horizontalDuration}s  ease-out;\n\n\t\t\tlet style = this.style + this.unpoppedStyle;\n\n\t\t\tthis.element.setAttribute('style', style);\n\n\t\t\tsetTimeout( ()=>{\n\t\t\t\tstyle += `\n\t\t\t\t\t;left:      ${x}px;\n\t\t\t\t\ttop:        ${y + document.documentElement.scrollTop}px;\n\t\t\t\t\twidth:      ${w}px;\n\t\t\t\t\theight:     ${h}px;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width ${this.horizontalDuration}s ease-out\n\t\t\t\t\t\t, top ${this.verticalDuration}s           ease-out\n\t\t\t\t\t\t, left ${this.horizontalDuration}s        ease-out\n\t\t\t\t\t\t, height ${this.verticalDuration}s        ease-out\n\t\t\t\t\t\t, all ${this.horizontalDuration}s         ease-out;\n\t\t\t\t`;\n\n\t\t\t\tthis.moving = true;\n\n\t\t\t\tthis.element.setAttribute('style', style);\n\t\t\t\tthis.element.classList.add('popped');\n\t\t\t\tthis.element.classList.remove('unpopped');\n\t\t\t\tthis.element.classList.remove('popping');\n\n\t\t\t\tthis.popTimeout = setTimeout(()=>{\n\t\t\t\t\tif(!this.element)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.bodyStyle = document.body.getAttribute('style');\n\n\t\t\t\t\tdocument.body.setAttribute('style', 'height:100%;overflow:hidden;');\n\n\t\t\t\t\tthis.moving = false;\n\t\t\t\t\tDom.mapTags(this.element, false, (tag)=>{\n\t\t\t\t\t\tlet event = new CustomEvent('cvPopped');\n\n\t\t\t\t\t\ttag.dispatchEvent(event);\n\n\t\t\t\t\t\tthis.scrollStyle = this.element.getAttribute('style');\n\t\t\t\t\t});\n\t\t\t\t\tlet event = new CustomEvent('cvPop', {\n\t\t\t\t\t\tbubbles: true\n\t\t\t\t\t\t, detail: {\n\t\t\t\t\t\t\ttag: this\n\t\t\t\t\t\t\t, view: this.parent\n\t\t\t\t\t\t\t, publicId: this.parent.args.publicId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.element.dispatchEvent(event);\n\n\t\t\t\t}, this.horizontalDuration*1000);\n\t\t\t}, 16.7*2);\n\n\t\t\tthis.poppedOut = true;\n\t\t});\n\t}\n\n\tunpop()\n\t{\n\t\tthis.element.classList.add('unpopping');\n\n\t\tif(this.popTimeout)\n\t\t{\n\t\t\tclearTimeout(this.popTimeout);\n\t\t}\n\n\t\tif(PopOutTag.level == 0)\n\t\t{\n\t\t\tdocument.body.setAttribute('style', '');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.body.setAttribute('style', this.bodyStyle || '');\n\t\t}\n\n\t\tPopOutTag.unpopLevel();\n\n\t\tif(!this.rect)\n\t\t{\n\t\t\tthis.rect = this.element.getBoundingClientRect();\n\t\t}\n\n\t\twindow.scrollTo(0,this.previousScroll);\n\n\t\tlet style = this.style\n\t\t\t+ this.unpoppedStyle\n\t\t\t+ `;transition: width ${this.horizontalDuration}s ease-in\n\t\t\t\t\t, height ${this.verticalDuration}s        ease-in\n\t\t\t\t\t, all ${this.horizontalDuration}s         ease-in;`;\n\n\t\tthis.element.setAttribute('style', style);\n\n\t\tthis.moving = true;\n\n\t\tsetTimeout(()=>{\n\t\t\tif(!this.element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.element.classList.remove('popped');\n\n\t\t}, this.horizontalDuration*1000);\n\t\tsetTimeout(()=>{\n\t\t\tthis.element.classList.add('unpopped');\n\t\t\tthis.element.classList.remove('unpopping');\n\t\t\tif(!this.element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.element.setAttribute('style', this.style);\n\t\t\tthis.moving = false;\n\t\t\tDom.mapTags(this.element, false, (tag)=>{\n\t\t\t\tlet event = new CustomEvent('cvUnpopped');\n\n\t\t\t\ttag.dispatchEvent(event);\n\t\t\t});\n\t\t\tlet event = new CustomEvent('cvUnpop', {\n\t\t\t\tbubbles: true\n\t\t\t\t, detail: {\n\t\t\t\t\ttag: this\n\t\t\t\t\t, view: this.parent\n\t\t\t\t\t, publicId: this.parent.args.publicId\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}, this.horizontalDuration*1000);\n\n\t\tthis.poppedOut = false;\n\t}\n\n\tremove()\n\t{\n\t\tdocument.body.setAttribute('style', this.bodyStyle);\n\t\tsuper.remove();\n\t}\n}\n","import { Tag      } from '../base/Tag';\r\nimport { Dom      } from '../base/Dom';\r\nimport { Bindable } from '../base/Bindable';\r\n\r\nexport class ScrollTag extends Tag\r\n{\r\n\tconstructor(element, parent, ref, index, direct)\r\n\t{\r\n\t\tsuper(element, parent, ref, index, direct);\r\n\r\n\t\tthis.visible         = false;\r\n\t\tthis.offsetTop       = false;\r\n\t\tthis.offsetBottom    = false;\r\n\r\n\t\tthis.attachListener = (e) => {\r\n\t\t\tlet rootNode = e.target;\r\n\r\n\t\t\twhile(rootNode.parentNode)\r\n\t\t\t{\r\n\t\t\t\trootNode = rootNode.parentNode;\r\n\t\t\t}\r\n\r\n\t\t\tif(rootNode !== window && rootNode !== document)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(e.target !== element)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.addScrollListener(e.target);\r\n\t\t\tthis.addResizeListener(e.target);\r\n\r\n\t\t\tthis.scrolled(e.target);\r\n\r\n\t\t\te.target.removeEventListener(\r\n\t\t\t\t'cvDomAttached'\r\n\t\t\t\t, this.attachListener\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tthis.element.addEventListener(\r\n\t\t\t'cvDomAttached'\r\n\t\t\t, this.attachListener\r\n\t\t);\r\n\r\n\t\tthis.cleanup.push(((element) => () => {\r\n\t\t\telement.removeEventListener(\r\n\t\t\t\t'cvDomAttached'\r\n\t\t\t\t, this.attachListener\r\n\t\t\t);\r\n\t\t})(this.element));\r\n\r\n\t\tthis.bindTo('visible', (v) => {\r\n\t\t\tlet scrolledEvent;\r\n\r\n\t\t\tif(v)\r\n\t\t\t{\r\n\t\t\t\tscrolledEvent = new Event('cvScrolledIn');\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tscrolledEvent = new Event('cvScrolledOut');\r\n\t\t\t}\r\n\r\n\t\t\tDom.mapTags(this.element, false, (node) => {\r\n\t\t\t\tnode.dispatchEvent(scrolledEvent);\r\n\t\t\t});\r\n\r\n\t\t\tthis.element.dispatchEvent(scrolledEvent);\r\n\t\t});\r\n\r\n\t\tthis.bindTo('offsetTop', (v) => {\r\n\t\t\tlet scrolledEvent = new CustomEvent('cvScrolled', {\r\n\t\t\t\tdetail: {offset: v}\r\n\t\t\t});\r\n\t\t\tDom.mapTags(this.element, false, (node) => {\r\n\t\t\t\tnode.dispatchEvent(scrolledEvent);\r\n\t\t\t});\r\n\r\n\t\t\tthis.element.dispatchEvent(scrolledEvent);\r\n\t\t});\r\n\t}\r\n\r\n\tscrolled(scroller)\r\n\t{\r\n\t\tlet current = this.element;\r\n\r\n\t\tif(!current)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet offsetTop         = 0\r\n\t\t\t, offsetBottom    = 0;\r\n\r\n\t\tlet visible = false;\r\n\r\n\t\tlet rect = current.getBoundingClientRect();\r\n\r\n\t\tif(rect.bottom > 0 && rect.top < window.innerHeight)\r\n\t\t{\r\n\t\t\tvisible = true;\r\n\t\t}\r\n\r\n\t\tthis.proxy.visible      = visible;\r\n\t\tthis.proxy.offsetTop    = rect.top    || 0;\r\n\t\tthis.proxy.offsetBottom = rect.bottom || 0;\r\n\t}\r\n\r\n\taddScrollListener(tag)\r\n\t{\r\n\t\tif(!tag.___scrollListener___)\r\n\t\t{\r\n\t\t\tObject.defineProperty(tag, '___scrollListener___', {\r\n\t\t\t\tenumerable: false\r\n\t\t\t\t, writable: true\r\n\t\t\t});\r\n\r\n\t\t\ttag.___scrollListener___ = (event) => {\r\n\t\t\t\tthis.scrolled(event.target);\r\n\t\t\t};\r\n\r\n\t\t\tlet node = tag;\r\n\t\t\tlet options = {passive: true, capture: true};\r\n\r\n\t\t\twhile(node.parentNode)\r\n\t\t\t{\r\n\t\t\t\tnode = node.parentNode;\r\n\r\n\t\t\t\tnode.addEventListener(\r\n\t\t\t\t\t'scroll'\r\n\t\t\t\t\t, tag.___scrollListener___\r\n\t\t\t\t\t, options\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.direct.cleanup.push(((node, tag, options)=>()=>{\r\n\t\t\t\t\tnode.removeEventListener(\r\n\t\t\t\t\t\t'scroll'\r\n\t\t\t\t\t\t, tag.___scrollListener___\r\n\t\t\t\t\t\t, options\r\n\t\t\t\t\t);\r\n\t\t\t\t\ttag = node = null;\r\n\t\t\t\t})(node, tag, options));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddResizeListener(tag)\r\n\t{\r\n\t\tif(!tag.___resizeListener___)\r\n\t\t{\r\n\t\t\tObject.defineProperty(tag, '___resizeListener___', {\r\n\t\t\t\tenumerable: false\r\n\t\t\t\t, writable: true\r\n\t\t\t});\r\n\r\n\t\t\ttag.___resizeListener___ = (event)=>{\r\n\t\t\t\tthis.scrolled(event.target);\r\n\t\t\t};\r\n\r\n\t\t\twindow.addEventListener('resize', this.resizeListener);\r\n\r\n\t\t\tthis.direct.cleanup.push(((element)=>()=>{\r\n\t\t\t\twindow.removeEventListener('resize', element.___resizeListener___);\r\n\t\t\t\ttag.___resizeListener___ = null;\r\n\t\t\t\ttag = null;\r\n\t\t\t})(tag));\r\n\t\t}\r\n\t}\r\n}\r\n","import { View } from '../base/View';\nimport { Bindable } from '../base/Bindable';\nimport { ToastAlert } from './ToastAlert';\n\nexport class Toast extends View {\n\tstatic instance() {\n\t\tif(!this.inst) {\n\t\t\tthis.inst = new this();\n\t\t}\n\t\treturn this.inst;\n\t}\n\tconstructor() {\n\t\tsuper();\n\t\tthis.template = `\n\t\t\t<div id = \"[[_id]]\" cv-each = \"alerts:alert\" class = \"toast\">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t`;\n\t\t// this.style = {\n\t\t// \t'': {\n\t\t// \t\tposition:   'fixed'\n\t\t// \t\t, top:      '0px'\n\t\t// \t\t, right:    '0px'\n\t\t// \t\t, padding:  '8px'\n\t\t// \t\t, 'z-index':'999999'\n\t\t// \t\t, display:  'flex'\n\t\t// \t\t, 'flex-direction': 'column-reverse'\n\t\t// \t}\n\t\t// };\n\n\t\tthis.args.alerts = [];\n\n\t\t// this.args.alerts.bindTo((v) => { console.log(v) });\n\t}\n\tpop(alert) {\n\t\tlet index = this.args.alerts.length;\n\n\t\tthis.args.alerts.push(alert);\n\n\t\talert.decay(((alert)=>()=>{\n\t\t\tfor(let i in this.args.alerts)\n\t\t\t{\n\t\t\t\tif(Bindable.ref(this.args.alerts[i]) === Bindable.ref(alert))\n\t\t\t\t{\n\t\t\t\t\talert.remove();\n\t\t\t\t\tdelete this.args.alerts[i];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t})(alert));\n\t}\n\talert(title, body, time) {\n\t\treturn this.pop(new ToastAlert({\n\t\t\ttitle: title\n\t\t\t, body: body\n\t\t\t, time: time\n\t\t}));\n\t}\n}\n","import { View } from '../base/View';\n\nexport class ToastAlert extends View\n{\n\tconstructor(args)\n\t{\n\t\tsuper(args);\n\t\tthis.args.running = false;\n\t\tthis.args.time    = this.args.time || 16000;\n\t\tthis.init         = this.args.time;\n\t\tthis.args.title   = this.args.title || 'Standard alert';\n\t\tthis.args.status  = 'new';\n\t\tthis.args.body    = this.args.body  || 'This is a standard alert.';\n\t\tthis.template     = `\n\t\t\t<div id = \"[[_id]]\" class = \"alert toast-[[status]]\">\n\t\t\t\t<h3>[[title]]</h3>\n\t\t\t\t<p>[[body]]</p>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tdecay(complete)\n\t{\n\t\tthis.args.running = true;\n\n\t\tthis.onTimeout(50, () => {\n\t\t\tthis.args.status = '';\n\t\t});\n\n\t\tthis.onTimeout(300, () => {\n\t\t\tthis.args.status = 'decaying';\n\t\t});\n\n\t\tthis.onTimeout(2400, () => {\n\t\t\tthis.args.status = 'imminent';\n\t\t});\n\n\t\tthis.onTimeout(3500, () => {\n\t\t\tthis.remove();\n\t\t});\n\t}\n}\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}