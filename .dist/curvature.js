!function(){"use strict";var t="undefined"==typeof global?self:global;if("function"!=typeof t.require){var e={},n={},r={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(t,e){for(var n,r=[],i=(o.test(e)?t+"/"+e:e).split("/"),a=0,s=i.length;a<s;a++)n=i[a],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},s=function(t){return t.split("/").slice(0,-1).join("/")},u=function(e){return function(n){var r=a(s(e),n);return t.require(r,e)}},l=function(t,e){var r=h&&h.createHot(t),i={id:t,exports:{},hot:r};return n[t]=i,e(i.exports,u(t),i),i.exports},c=function(t){return r[t]?c(r[t]):t},f=function(t,e){return c(a(s(t),e))},p=function(t,r){null==r&&(r="/");var o=c(t);if(i.call(n,o))return n[o].exports;if(i.call(e,o))return l(o,e[o]);throw new Error("Cannot find module '"+t+"' from '"+r+"'")};p.alias=function(t,e){r[e]=t};var d=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/,_=function(t){if(d.test(t)){var e=t.replace(d,"");i.call(r,e)&&r[e].replace(d,"")!==e+"/index"||(r[e]=t)}if(v.test(t)){var n=t.replace(v,"");i.call(r,n)||(r[n]=t)}};p.register=p.define=function(t,r){if(t&&"object"==typeof t)for(var o in t)i.call(t,o)&&p.register(o,t[o]);else e[t]=r,delete n[t],_(t)},p.list=function(){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};var h=t._hmr&&new t._hmr(f,p,e,n);p._cache=n,p.hmr=h&&h.wrap,p.brunch=!0,t.require=p}}(),function(){"undefined"==typeof window?this:window;require.register("Config.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=t.Config=function o(){r(this,o)};i.backend="http://dev.sean.letsvue.com/"}),require.register("access/LoginView.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginView=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("Config"),u=e("../base/View"),l=e("../base/Router"),c=e("../base/Repository"),f=e("./UserRepository"),p=e("../toast/Toast"),d=e("../toast/ToastAlert");t.LoginView=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.template='\n\t\t\t<a cv-link = "user">User</a>\n\t\t\t<br />\n\t\t\t\n\t\t\t<a cv-link = "user/login">Login</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/register">Register</a>\n\t\t\t<br />\n\n\t\t\t<a cv-link = "user/logout">Logout</a>\n\t\t\t<br />\n\n\t\t\t<input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Login via FaceBook"\n\t\t\t \tcv-on = "click:facebookLogin(event)"\n\t\t\t />\n\t\t\t <input\n\t\t\t\ttype  = "button"\n\t\t\t\tvalue = "Log Out"\n\t\t\t \tcv-on = "click:logout(event)"\n\t\t\t />\n\t\t',t}return o(e,t),a(e,[{key:"facebookLogin",value:function(t){var e=this;console.log("fb!"),t.preventDefault(),window.open(s.Config.backend+"/facebookLogin"),this.userCheck&&this.clearInterval(this.userCheck),this.userCheck=this.onInterval(333,function(){f.UserRepository.getCurrentUser(!0).then(function(t){var n=t.body;n.id&&n&&(e.clearInterval(e.userCheck),l.Router.clearCache(),c.Repository.clearCache(),p.Toast.instance().pop(new d.ToastAlert({title:"Logged in as "+n.username,body:"ID: "+n.publicId,time:2400})))})})}},{key:"logout",value:function(){window.open(s.Config.backend+"/user/logout?page=app%3Fclose%3D1")}}]),e}(u.View)}),require.register("access/UserRepository.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserRepository=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("Config"),u=e("../base/Bindable"),l=e("../base/Repository");t.UserRepository=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,null,[{key:"getCurrentUser",value:function(){var t=this;return this.args=this.args||u.Bindable.makeBindable({}),window.prerenderer?void 0:this.request(this.uri+"current",!1,!1,!1).then(function(e){if(e.body.roles)for(var n in e.body.roles)"SeanMorris\\Access\\Role\\Administrator"==e.body.roles[n]["class"]&&(e.body.isAdmin=!0);return t.args.current=e.body,e})}},{key:"login",value:function(){return this.request(s.Config.backend+"/user/login")}},{key:"logout",value:function(){return this.args=this.args||u.Bindable.makeBindable({}),this.args.current=null,this.request(this.uri+"logout",!1,{},!1).then(function(t){return t})}},{key:"onChange",value:function(t){this.args=this.args||u.Bindable.makeBindable({}),this.args.bindTo("current",t)}},{key:"uri",get:function(){return s.Config.backend+"/user/"}}]),e}(l.Repository)}),require.register("base/Bindable.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t.Bindable=function(){function t(){r(this,t)}return o(t,null,[{key:"isBindable",value:function(e){return!!e.___binding___&&e.___binding___===t}},{key:"makeBindable",value:function(e){if(!e||e.___binding___||"object"!==("undefined"==typeof e?"undefined":i(e))||e instanceof Node)return e;for(var n in Object.defineProperty(e,"___ref___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"bindTo",{enumerable:!1,writable:!0}),Object.defineProperty(e,"isBound",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___binding___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___bindingAll___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___isBindable___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___executing___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stack___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___stackTime___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___before___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___after___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"toString",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___setCount___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___wrapped___",{enumerable:!1,writable:!0}),Object.defineProperty(e,"___object___",{enumerable:!1,writable:!0}),e.___object___=e,e.___isBindable___=t,e.___wrapped___={},e.___binding___={},e.___bindingAll___=[],e.___stack___=[],e.___stackTime___=[],e.___before___=[],e.___after___=[],e.___setCount___={},e.bindTo=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null==n){n=t;var i=e.___bindingAll___.length;for(var o in e.___bindingAll___.push(n),e)n(e[o],o,e,!1);return function(){e.___bindingAll___[i]=null}}var a=!1;0<r.delay&&(n=function(t){return function(e,n,i,o){var a=i[n];setTimeout(function(){return t(e,n,i,o,a)},r.delay)}}(n)),0<r.throttle&&(n=function(t){return function(e,n,i,o){a||(t(e,n,i,o),a=!0,setTimeout(function(){return a=!1},r.throttle))}}(n));var s;r.wait&&(n=function(t){return function(e,n,i,o){s&&clearTimeout(s);var a=i[n];s=setTimeout(function(){return t(e,n,i,o,a)},r.wait)}}(n)),e.___binding___[t]||(e.___binding___[t]=[]);var u=e.___binding___[t].length;return e.___binding___[t].push(n),n(e[t],t,e,!1),function(){e.___binding___[t]&&(e.___binding___[t][u]=null)}},e.isBound=function(){for(var t in e.___bindingAll___)if(e.___bindingAll___[t])return!0;for(var n in e.___binding___)for(var r in e.___binding___[n])if(e.___binding___[n][r])return!0;return!1},e.toString=function(){return"object"==("undefined"==typeof e?"undefined":i(e))?JSON.stringify(e):e},e)e[n]&&"object"==i(e[n])&&!e[n]instanceof Node&&(e[n]=t.makeBindable(e[n]));var r=function(n,r,o){if(n[r]===o&&("undefined"==typeof o?"undefined":i(o))!==e)return!0;if(o&&"object"==("undefined"==typeof o?"undefined":i(o))&&!(o instanceof Node)&&o.___isBindable___!==t)for(var a in o=t.makeBindable(o))o[a]&&"object"==i(o[a])&&(o[a]=t.makeBindable(o[a]));for(var s in e.___bindingAll___)e.___bindingAll___[s]&&e.___bindingAll___[s](o,r,n,!1);var u=!1;if(r in e.___binding___)for(var l in e.___binding___[r])e.___binding___[r][l]&&!1===e.___binding___[r][l](o,r,n,!1)&&(u=!0);if(!u){var c=Object.getOwnPropertyDescriptor(n,r),f=n instanceof File&&"lastModifiedDate"==r;f||c&&!c.writable||(n[r]=o)}return n.___setCount___[r]||(n.___setCount___[r]=0),n.___setCount___[r]++,10<n.___setCount___[r]&&o instanceof Object,!0},o=function(t,n){if(!(n in t))return!0;for(var r in e.___bindingAll___)e.___bindingAll___[r](void 0,n,t,!0);if(n in e.___binding___)for(var i in e.___binding___[n])e.___binding___[n][i]&&e.___binding___[n][i](void 0,n,t,!0);return Array.isArray(t)?t.splice(n,1):delete t[n],!0};return e.___ref___=new Proxy(e,{deleteProperty:o,get:function(t,n){return t[n]instanceof Function?t.___wrapped___[n]?t.___wrapped___[n]:(t.___wrapped___[n]=function(){for(var r in t.___executing___=n,t.___stack___.unshift(n),t.___before___)t.___before___[r](t,n,e);var i=t[n].apply(t,arguments);for(var o in t.___after___)t.___after___[o](t,n,e);return t.___executing___=null,t.___stack___.shift(),i},t.___wrapped___[n]):t[n]},set:r}),e.___ref___}},{key:"clearBindings",value:function(t){t.___wrapped___={},t.___bindingAll___={},t.___binding___={},t.___before___=[],t.___after___=[],t.___ref___={},t.toString=function(){return"{}"}}},{key:"resolve",value:function(t,e){for(var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=void 0,i=e.split(".");i.length;){if(n&&1===i.length)return[this.makeBindable(t),i.shift()];r=i.shift(),!(!r in t)&&t[r]&&t[r]instanceof Object||(t[r]={}),t=this.makeBindable(t[r])}return[this.makeBindable(t),r]}}]),t}()}),require.register("base/Cache.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});t.Cache=function(){function t(){r(this,t)}return i(t,null,[{key:"store",value:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][t]={expiration:i,value:e}}},{key:"load",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][t]&&(0==this.bucket[n][t].expiration||this.bucket[n][t].expiration>(new Date).getTime())?this.bucket[n][t].value:e}}]),t}()}),require.register("base/Cookie.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Cookie=void 0;var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!((r=(a=s.next()).done)||(n.push(a.value),e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e("./Bindable"),s=t.Cookie=function(){function t(){r(this,t)}return o(t,null,[{key:"set",value:function(e,n){t.jar[e]=n}},{key:"get",value:function(e){return t.jar[e]}},{key:"delete",value:function(e){delete t.jar[e]}}]),t}();s.jar=s.jar||a.Bindable.makeBindable({}),"data"!==window.location.href.substr(0,4)&&(document.cookie.split(";").map(function(t){var e=t.split("="),n=i(e,2),r=n[0],o=n[1];try{o=JSON.parse(o)}catch(t){o=o}r=r.trim(),s.jar[decodeURIComponent(r)]=o}),s.jar.bindTo(function(t,e,n,r){n[e]=t,r&&(n[e]=null);var i=encodeURIComponent(e)+"="+n[e];document.cookie=i}))}),require.register("base/Dom.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});t.Dom=function(){function t(){r(this,t)}return i(t,null,[{key:"mapTags",value:function(t,e,n,r,i){var o=[],a=!0;r&&(a=!1);for(var s=!1,u=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:function(t){if(!a){if(t!==r)return NodeFilter.FILTER_SKIP;a=!0}return i&&t===i&&(s=!0),s?NodeFilter.FILTER_SKIP:e?t instanceof Element&&t.matches(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);u.nextNode();)o.push(n(u.currentNode));return o}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(t){t.dispatchEvent(n)})}}]),t}()}),require.register("base/Model.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("./Cache"),a=e("./Bindable");e("./Repository"),t.Model=function(){function t(e){r(this,t),this.repository=e}return i(t,[{key:"consume",value:function(e){for(var n in e){var r=e[n];if(e[n]instanceof Object&&e[n]["class"]&&e[n].publicId){var i=e[n]["class"]+"::"+e[n].publidId,s=o.Cache.load(i,!1,"model-type-repo");r=a.Bindable.makeBindable(new t(this.repository)),s&&(r=s),r.consume(e[n]),o.Cache.store(i,r,0,"model-type-repo")}this[n]=r}}}]),t}()}),require.register("base/Repository.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("./Bindable"),a=e("./Cache"),s=e("./Model"),u=e("../form/Form"),l=function(){function t(e){r(this,t),this.uri=e}return i(t,[{key:"get",value:function(e){var n=this,r=this.uri+"/"+e;return t.request(r).then(function(t){return n.extractModel(t.body)})}},{key:"page",value:function(){var e=this,n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,arguments[1]);return t.request(this.uri,n).then(function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s,u=t.body[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s=a.value,n.push(e.extractModel(s))}catch(t){i=!0,o=t}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n})}},{key:"edit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=this.uri+"/create";return e&&(n=this.uri+"/"+e+"/edit"),t.request(n).then(function(t){console.log(t);var e=new u.Form(t.meta.form);return e})}},{key:"extractModel",value:function(t){var e=o.Bindable.makeBindable(new s.Model(this));e.consume(t);var n=this.uri+"/"+e.id;if(console.log(n),a.Cache.store(n,e,10,"model-uri-repo"),e["class"]){var r=e["class"]+"::"+e.publidId;a.Cache.load(r,!1,"model-type-repo");a.Cache.store(r,e,10,"model-type-repo")}return e}}],[{key:"loadPage",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return this.request(this.uri,t).then(function(t){return t})}},{key:"domCache",value:function(){}},{key:"load",value:function(t){return!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],this.objects=this.objects||{},this.objects[this.uri]=this.objects[this.uri]||{},this.objects[this.uri][t]?Promise.resolve(this.objects[this.uri][t]):this.request(this.uri+"/"+t).then(function(){})}},{key:"form",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=this.uri+"/create";return t&&(e=this.uri+"/"+t+"/edit"),this.request(e).then(function(t){return t})}},{key:"clearCache",value:function(){this.objects&&this.objects[this.uri]&&(this.objects[this.uri]={})}},{key:"request",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=this,i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a="GET",s="",u=null,l={};e&&(l=e),l.api=l.api||"json",s=Object.keys(l).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(l[t])}).join("&");var c=t;if(n){if(i=!1,a="POST",n instanceof FormData)u=n;else for(var f in u=new FormData,n)u.append(f,n[f]);Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}c=t+"?"+s;var p=new XMLHttpRequest;if("responseType"in o&&(p.responseType=o.responseType),!n&&i&&this.cache&&this.cache[c])return Promise.resolve(this.cache[c]);var d='script[data-uri="'+c+'"]',v=document.querySelector(d);if(!n&&i&&v){var _=JSON.parse(v.innerText);return Promise.resolve(_)}p.withCredentials=!0,p.timeout=15e3;var h=this.xhrs.length;return n||this.xhrs.push(p),new Promise(function(t){return function(e,n){p.onreadystatechange=function(){var i=void 0;if(4===p.readyState){if(r.cache||(r.cache={}),200!==p.status)n("HTTP"+p.status);else if("application/json"!=p.getResponseHeader("Content-Type")&&"application/json; charset=utf-8"!=p.getResponseHeader("Content-Type")&&"text/json"!=p.getResponseHeader("Content-Type")&&"text/json; charset=utf-8"!=p.getResponseHeader("Content-Type"))e(p);else if(i=JSON.parse(p.responseText),0==i.code){var o=document.querySelector('script[data-uri="'+c+'"]'),a=window.prerenderer;a&&(!o&&(o=document.createElement("script"),o.type="text/json",o.setAttribute("data-uri",c),document.head.appendChild(o)),o.innerText=JSON.stringify(i)),e(i)}else n(i);r.xhrs[t]=null}},p.open(a,c,!0),p.send(u)}}(h))}},{key:"cancel",value:function(){for(var t in this.xhrs)this.xhrs[t]&&this.xhrs[t].abort();this.xhrList=[]}},{key:"xhrs",get:function(){return this.xhrList=this.xhrList||[]}}]),t}();t.Repository=l}),require.register("base/Router.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("./View"),a=(e("./Cache"),e("Config"));t.Router=function(){function t(){r(this,t)}return i(t,null,[{key:"wait",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;r.addEventListener(n,function(){e.listen(t)})}},{key:"listen",value:function(t){var e=this,n=location.pathname+location.search;location.hash&&(n+=location.hash),window.addEventListener("popstate",function(n){n.preventDefault(),e.match(location.pathname,t)}),this.go(n)}},{key:"go",value:function(t,e){document.title=a.Config.title,setTimeout(function(){history.pushState(null,null,t),e||window.dispatchEvent(new Event("popstate"))},0)}},{key:"match",value:function(t,e){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(this.path!=t||n){var r=e.args.content,i=e.routes;this.path=t,this.query={};var a=new URLSearchParams(location.search);this.queryString=location.search;var s=!0,u=!1,l=void 0;try{for(var c,f,p=a[Symbol.iterator]();!(s=(c=p.next()).done);s=!0)f=c.value,this.query[f[0]]=f[1]}catch(t){u=!0,l=t}finally{try{!s&&p["return"]&&p["return"]()}finally{if(u)throw l}}var d={},v=!1,_="";for(var h in t=t.substr(1).split("/"),this.query)d[h]=this.query[h];t:for(var b in i){var y=b.split("/");if(!(y.length<t.length)){for(var g in y)if("%"==y[g].substr(0,1)){var m=null,w=/^%(\w+)\??/.exec(y[g]);if(w&&w[1]&&(m=w[1]),!m)throw new Error(y[g]+' is not a valid argument segment in route "'+b+'"');if(t[g])d[m]=t[g];else{if("?"!=y[g].substr(y[g].length-1,1))continue t;d[m]=""}}else if(t[g]!==y[g])continue t;if(!n&&r&&i[b]instanceof Object&&r instanceof i[b]&&!(i[b]instanceof Promise)&&r.update(d))return e.args.content=r,!0;v=b,_=i[b];break}}if(v in i&&i[v]instanceof Object&&i[v].isView&&i[v].isView())_=new i[v](d),_.root=function(){return e};else if(i[v]instanceof Function){_="";var j=i[v](d);j instanceof Promise?j.then(function(t){e.args.content=t})["catch"](function(t){e.args.content=t}):_=j}else i[v]instanceof Promise?(i[v].then(function(t){e.args.content=t})["catch"](function(t){e.args.content=t}),_=""):i[v]instanceof Object?_=new i[v](d):"string"==typeof i[v]&&(_=i[v]);e.args.content instanceof o.View&&e.args.content.remove();var O=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:_,path:t,view:e}});return document.dispatchEvent(O)&&(e.args.content=_),_ instanceof o.View&&(_.pause(!1),_.update(d,n)),!1!==v}}},{key:"clearCache",value:function(){}},{key:"queryOver",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};for(var n in this.query)e[n]=this.query[n];for(var r in t)e[r]=t[r];return delete e.api,e}},{key:"queryToString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=[],r=t;for(var i in e||(r=this.queryOver(t)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(t,e,n){var r={};r[t]=e,this.go(this.path+"?"+this.queryToString(r),n)}}]),t}()}),require.register("base/RuleSet.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(e("./Dom"),e("./Tag")),a=e("./View");t.RuleSet=function(){function t(){r(this,t)}return i(t,[{key:"add",value:function(t,e){return this.rules=this.rules||{},this.rules[t]=this.rules[t]||[],this.rules[t].push(e),this}},{key:"apply",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var n in d.apply(t),this.rules)for(var r in this.rules[n]){var i=this.rules[n][r],o=d.wrap(t,i,e),a=t.querySelectorAll(n),s=!0,u=!1,l=void 0;try{for(var c,f,p=a[Symbol.iterator]();!(s=(c=p.next()).done);s=!0)f=c.value,o(f)}catch(d){u=!0,l=d}finally{try{!s&&p["return"]&&p["return"]()}finally{if(u)throw l}}}}}],[{key:"add",value:function(t,e){return this.globalRules=this.globalRules||{},this.globalRules[t]=this.globalRules[t]||[],this.globalRules[t].push(e),this}},{key:"apply",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i=this.globalRules[n][r],o=this.wrap(t,i,e),a=t.querySelectorAll(n),s=!0,u=!1,l=void 0;try{for(var c,f,p=a[Symbol.iterator]();!(s=(c=p.next()).done);s=!0)f=c.value,o(f)}catch(t){u=!0,l=t}finally{try{!s&&p["return"]&&p["return"]()}finally{if(u)throw l}}}}},{key:"wait",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,r=function(e,n){return function(){return n.removeEventListener(e,r),t.apply()}}(e,n);n.addEventListener(e,r)}},{key:"wrap",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return(e instanceof a.View||e&&e.prototype&&e.prototype instanceof a.View)&&(e=function(t){return function(){return t}}(e)),function(t){for(var r in t.___cvApplied___||(Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!0}),t.___cvApplied___=[]),t.___cvApplied___)if(e==t.___cvApplied___[r])return;t.___cvApplied___.push(e);var i=new o.Tag(t),s=i.element.parentNode,u=i.element.nextSibling,l=e(i);if(l instanceof HTMLElement&&(l=new o.Tag(l)),l instanceof o.Tag){if(!l.element.contains(i.element)){for(;i.element.firstChild;)l.element.appendChild(i.element.firstChild);i.remove()}u?s.insertBefore(l.element,u):s.appendChild(l.element)}l&&l.prototype&&l.prototype instanceof a.View&&(l=new l),l instanceof a.View&&(n&&n.cleanup.push(function(t){return function(){t.remove()}}(l)),i.clear(),l.render(i.element))}}}]),t}()}),require.register("base/Tag.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("./Bindable");t.Tag=function(){function t(e,n,i,a,s){return r(this,t),this.element=o.Bindable.makeBindable(e),this.parent=n,this.direct=s,this.ref=i,this.index=a,this.proxy=o.Bindable.makeBindable(this),this.cleanup=[],this.proxy}return i(t,[{key:"remove",value:function(){o.Bindable.clearBindings(this);for(var t;t=this.cleanup.shift();)t();if(this.clear(),!!this.element){var e=new Event("cvDomDetached");this.element.dispatchEvent(e),this.element.remove(),this.element=this.ref=this.parent=null}}},{key:"clear",value:function(){if(this.element)for(var t=new Event("cvDomDetached");this.element.firstChild;)this.element.firstChild.dispatchEvent(t),this.element.removeChild(this.element.firstChild)}},{key:"pause",value:function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}}]),t}()}),require.register("base/Theme.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(t,"__esModule",{value:!0});t.Theme=function(){function t(){r(this,t),this.views={"SeanMorris\\TheWhtRbt\\Location":{single:"twr9/LocationPreview",list:"twr9/LocationList"},"SeanMorris\\TheWhtRbt\\Image":{single:"DetailView",list:"DetailListView"}}}return i(t,[{key:"resolve",value:function(t){var e;if(Array.isArray(t)){for(var n in t){var r=t[n]["class"]||t[n].content_type;if(e&&e!==r)throw new Error("Model list mismatch!");e=r}return this.views[e]?this.views[e].list?this.views[e].list:this.views[e]:"DetailListView"}return!!t&&(e=t["class"]||t.content_type,this.views[e]?this.views[e].single?this.views[e].single:this.views[e]:"DetailView")}}]),t}()}),require.register("base/ViewList.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("./Bindable"),a=e("./View"),s=function(){function t(e,n,i){var s=this,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;r(this,t),this.args=o.Bindable.makeBindable({}),this.args.value=o.Bindable.makeBindable(i||{}),this.args.subArgs=o.Bindable.makeBindable({}),this.views={},this.cleanup=[],this.template=e,this.subProperty=n,this.keyProperty=u,this.tag=null,this.paused=!1,console.log(this.args.value.___before___),this.args.value.___before___.push(function(t){"bindTo"==t.___executing___||(s.paused=!0)}),this.args.value.___after___.push(function(){s.paused&&s.reRender(),s.paused=!1});var l=this.args.value.bindTo(function(t,e,n,r){if(!s.paused){if(r)return s.views[e].remove(),void delete s.views[e];if(!s.views[e]){var i=new a.View;s.views[e]=i,s.views[e].template=s.template,s.views[e].parent=s.parent,s.views[e].viewList=s;var o=s.args.subArgs.bindTo(function(t,e){i.args[e]=t});s.views[e].cleanup.push(o),s.views[e].args[s.subProperty]=t,s.keyProperty&&(s.views[e].args[s.keyProperty]=e),n[e]=t,s.reRender()}s.views[e].args[s.subProperty]=t}});this.cleanup.push(l)}return i(t,[{key:"render",value:function(t){for(var e in this.views)this.views[e].render(t);this.tag=t}},{key:"reRender",value:function(){var t=this;if(this.tag){var e=[];for(var n in this.views)e[n]=this.views[n];var r=[],i=function(n){var i=!1;for(var o in e)if(e[o]&&t.args.value[n]===e[o].args[t.subProperty]){i=!0,r[n]=e[o],delete e[o];break}if(!i){var s={};s[t.subProperty]=t.args.value[n],r[n]=new a.View(s),r[n].template=t.template,r[n].parent=t.parent,r[n].viewList=t,r[n].args[t.keyProperty]=n,t.args.subArgs.bindTo(function(t,e){r[n].args[e]=t})}};for(var i in this.args.value)i(i);for(var o in this.views){var s=!1;for(var u in r)if(this.views[o]===r[u]){s=!0;break}s||this.views[o].remove()}var l=!0;for(var c in this.views)this.views[c]!==r[c]&&(l=!1);if(l)for(var f=this.views.length||0;r[f];)r[f].render(this.tag),f++;else{for(var p in this.views)this.views[p].remove();for(;this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);for(var d in r)r[d].render(this.tag);
}this.views=r}}},{key:"pause",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];for(var e in this.views)this.views[e].pause(t)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();for(var e;e=this.cleanup.pop();)e();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);o.Bindable.clearBindings(this.args.subArgs),o.Bindable.clearBindings(this.args),this.args.value.isBound()||o.Bindable.clearBindings(this.args.value)}}]),t}();t.ViewList=s}),require.register("form/ButtonField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonField=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("./Field");t.ButtonField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.args.title=s.args.title||s.args.value,s.template='\n\t\t\t<label\n\t\t\t\tfor = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tcv-ref = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\tname   = "'+s.args.name+'"\n\t\t\t\t\ttype   = "'+s.args.attrs.type+'"\n\t\t\t\t\tvalue  = "[[title]]"\n\t\t\t\t\tcv-on  = "click:clicked(event)"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t',s}return o(e,t),a(e,[{key:"clicked",value:function(t){"submit"==this.args.attrs.type&&(t.preventDefault(),t.stopPropagation(),this.form.tags.formTag.element.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})))}}]),e}(s.Field)}),require.register("form/Field.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("../base/View");e("../base/Bindable"),t.Field=function(t){function e(t,n,o,a){r(this,e);var s=Object.assign(t),u=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));u.args.title=u.args.title||"",u.args.value=u.args.value||"",u.skeleton=s,u.disabled=null,u.args.valueString="",u.form=n,u.parent=o,u.key=a,u.ignore=u.args.attrs["data-cv-ignore"]||!1;var l=null;u.args.bindTo("value",function(t){l==a||(u.args.valueString=JSON.stringify(t||"",null,4),l=a,"file"==u.args.attrs.type?u.tags.input&&u.tags.input.element.files&&(console.log(u.tags.input.element.files[0]),u.parent.args.value[a]=u.tags.input.element.files[0]):(!u.parent.args.value&&(u.parent.args.value={}),u.parent.args.value[a]=t),l=null)}),u.parent.args.value.bindTo(a,function(t,e){l==e||(l=e,"file"==u.args.attrs.type?u.tags.input&&u.tags.input.element.files&&(u.args.value=u.tags.input.element.files[0]):u.args.value=t,l=null)});var c="";return"checkbox"==u.args.attrs.type&&(c='value = "1"'),u.template='\n\t\t\t<label\n\t\t\t\tfor           = "'+u.args.name+'"\n\t\t\t\tdata-type     = "'+u.args.attrs.type+'"\n\t\t\t\tcv-ref        = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<input\n\t\t\t\t\tname      = "'+u.args.name+'"\n\t\t\t\t\ttype      = "'+(u.args.attrs.type||"text")+'"\n\t\t\t\t\tcv-bind   = "value"\n\t\t\t\t\tcv-ref    = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand = "attrs"\n\t\t\t\t\t'+c+"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t",u}return o(e,t),a(e,[{key:"disable",value:function(){this.hasChildren(),this.disabled="disabled"}},{key:"enable",value:function(){this.hasChildren(),this.disabled=!1}},{key:"hasChildren",value:function(){return!1}},{key:"getName",value:function(){return this.tags.input?this.tags.input.element.getAttribute("name"):this.args.name}}]),e}(s.View)}),require.register("form/FieldSet.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSet=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("./Field"),u=e("./Form");t.FieldSet=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.args.value={},s.args.fields=u.Form.renderFields(t.children,s),s.template='\n\t\t\t<label\n\t\t\t\tfor        = "'+s.args.name+'"\n\t\t\t\tdata-type  = "'+s.args.attrs.type+'"\n\t\t\t\tdata-multi = "'+(s.args.attrs["data-multi"]?"true":"false")+'"\n\t\t\t\tcv-ref     = "label:curvature/base/Tag"\n\t\t\t>\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<fieldset\n\t\t\t\t\tname   = "'+s.args.name+'"\n\t\t\t\t\tcv-ref = "input:curvature/base/Tag"\n\t\t\t\t\tcv-expand="attrs"\n\t\t\t\t\tcv-each = "fields:field"\n\t\t\t\t>\n\t\t\t\t\t[[field]]\n\t\t\t\t</fieldset>\n\t\t\t</label>\n\t\t',s}return o(e,t),a(e,[{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}},{key:"wrapSubfield",value:function(t){return t}}]),e}(s.Field)}),require.register("form/FileField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FileField=void 0;var a=e("./Field");t.FileField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\t\tname    = "'+s.args.name+'"\n\t\t\t\t\t\ttype    = "'+s.args.attrs.type+'"\n\t\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t\t<span style = "display:none" cv-if = "value">[[[value]]]</span>\n\t\t\t</label>\n\t\t',s}return o(e,t),e}(a.Field)}),require.register("form/Form.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("../base/View"),u=e("./Field"),l=e("./FieldSet"),c=e("./SelectField"),f=e("./RadioField"),p=e("./HtmlField"),d=e("./HiddenField"),v=e("./ButtonField"),_=e("./TextareaField"),h=e("./multiField/View");t.Form=function(t){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{}));return o.args.flatValue=o.args.flatValue||{},o.args.value=o.args.value||{},o.args.method=t._method||"GET",o.args.classes=o.args.classes||[],o.args.bindTo("classes",function(t){o.args._classes=t.join(" ")}),o._onSubmit=[],o.action="",o.template='\n\t\t\t<form\n\t\t\t\tclass   = "[[_classes]]"\n\t\t\t\tmethod  = "[[method]]"\n\t\t\t\tenctype = "multipart/form-data"\n\t\t\t\tcv-on   = "submit:submit(event)"\n\t\t\t\tcv-ref  = "formTag:curvature/base/Tag"\n\t\t\t\tcv-each = "fields:field"\n\t\t\t>\n\t\t\t\t[[field]]\n\t\t\t</form>\n\t\t',o.args.fields=e.renderFields(t,o,n),o.args.bindTo("value",function(t){o.args.valueString=JSON.stringify(t,null,4)}),o}return o(e,t),a(e,[{key:"submitHandler",value:function(t){t.preventDefault(),t.stopPropagation()}},{key:"submit",value:function(t){for(var e in this.args.valueString=JSON.stringify(this.args.value,null,4),this._onSubmit)this._onSubmit[e](this,t)}},{key:"buttonClick",value:function(){}},{key:"onSubmit",value:function(t){this._onSubmit.push(t)}},{key:"formData",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];t||(t=new FormData),e||(e=this);for(var r in e.args.fields)if(!e.args.fields[r]||!e.args.fields[r].disabled){var i=n.slice(0);if(i.push(r),e.args.fields[r]&&e.args.fields[r].hasChildren())this.formData(t,e.args.fields[r],i);else if(e.args.fields[r]){var o=e.args.fields[r].getName();"file"==e.args.fields[r].args.type?t.append(o,e.args.fields[r].tags.input.element.files[0]):t.append(o,e.args.fields[r].args.value)}}return t}},{key:"queryString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=[];for(var n in this.args.flatValue)t[n]=t[n]||this.args.flatValue[n];for(var r in t)e.push(r+"="+encodeURIComponent(t[r]));return e.join("&")}},{key:"populate",value:function(t){for(var e in t)this.args.value[e]=t[e]}},{key:"hasChildren",value:function(){return!!Object.keys(this.args.fields).length}}],[{key:"renderFields",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i={},o=function(o){if(i[o])return"continue";if("_"==o.substr(0,1))return"continue";var a=null,s=null;if(n&&(s=n instanceof e?n:n.form),t[o].name in r)a=new r[t[o].name](t[o],s,n,o);else switch(t[o].type){case"fieldset":a=t[o].attrs["data-multi"]?new h.View(t[o],s,n,o):new l.FieldSet(t[o],s,n,o);break;case"select":a=new c.SelectField(t[o],s,n,o);break;case"radios":a=new f.RadioField(t[o],s,n,o);break;case"html":a=new p.HtmlField(t[o],s,n,o);break;case"submit":case"button":a=new v.ButtonField(t[o],s,n,o);break;case"hidden":a=new d.HiddenField(t[o],s,n,o);break;case"textarea":a=new _.TextareaField(t[o],s,n,o);break;default:a=new u.Field(t[o],s,n,o)}i[o]=a,a.args.bindTo("value",function(t,e,n){if(("html"!=n.type||n.contentEditable)&&"fieldset"!=n.type){var r=a.getName();return n.disabled?void delete s.args.flatValue[r]:void(s.args.flatValue[r]=t)}})};for(var o in t)var a=o(o);return i}}]),e}(s.View)}),require.register("form/HiddenField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenField=void 0;var a=e("./Field");t.HiddenField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.args.attrs.type=s.args.attrs.type||"hidden",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tstyle     = "display:none"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<input\n\t\t\t\t\t\tname    = "'+s.args.name+'"\n\t\t\t\t\t\ttype    = "'+s.args.attrs.type+'"\n\t\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t\t<span cv-if = "value">[[[value]]]</span>\n\t\t\t</label>\n\t\t',s}return o(e,t),e}(a.Field)}),require.register("form/HtmlField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlField=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("../base/View");t.HtmlField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.ignore=s.args.attrs["data-cv-ignore"]||!1,s.args.contentEditable=s.args.attrs.contenteditable||!1,s.template='<div\n\t\t\tname            = "'+s.args.name+'"\n\t\t\tcv-ref          = "input:curvature/base/Tag"\n\t\t\tcontenteditable = "[[contentEditable]]"\n\t\t>[[$value]]</div>',s}return o(e,t),a(e,[{key:"hasChildren",value:function(){return!1}},{key:"disable",value:function(){this.args.disabled="disabled"}},{key:"getName",value:function(){return this.tags.input?this.tags.input.element.getAttribute("name"):this.args.name}}]),e}(s.View)}),require.register("form/RadioField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.RadioField=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("./Field");t.RadioField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<span\n\t\t\t\t\tcv-each  = "options:option:optionText"\n\t\t\t\t\tcv-carry = "value"\n\t\t\t\t\t--cv-ref  = "input:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname    = "'+s.args.name+'"\n\t\t\t\t\t\t\ttype    = "radio"\n\t\t\t\t\t\t\tvalue   = "[[option]]"\n\t\t\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\t/>\n\t\t\t\t\t\t[[optionText]]\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t',s}return o(e,t),a(e,[{key:"getLabel",value:function(){for(var t in this.args.options)if(this.args.options[t]==this.args.value)return t}}]),e}(s.Field)}),require.register("form/SelectField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectField=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("./Field");t.SelectField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<span cv-if = "title">\n\t\t\t\t\t<span cv-ref = "title:curvature/base/Tag">[[title]]</span>\n\t\t\t\t</span>\n\t\t\t\t<select\n\t\t\t\t\tname    = "'+s.args.name+'"\n\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\tcv-each = "options:option:optionText"\n\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t/>\n\t\t\t\t\t<option value = "[[option]]">[[optionText]]</option>\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t',s}return o(e,t),a(e,[{key:"getLabel",value:function(){for(var t in this.args.options)if(this.args.options[t]==this.args.value)return t}}]),e}(s.Field)}),require.register("form/TextareaField.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaField=void 0;var a=e("./Field");t.TextareaField=function(t){function e(t,n,o,a){r(this,e);var s=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a));return s.args.attrs.type=s.args.attrs.type||"hidden",s.template='\n\t\t\t<label\n\t\t\t\tfor       = "'+s.args.name+'"\n\t\t\t\tdata-type = "'+s.args.attrs.type+'"\n\t\t\t\tcv-ref    = "label:curvature/base/Tag">\n\t\t\t\t<textarea\n\t\t\t\t\t\tname    = "'+s.args.name+'"\n\t\t\t\t\t\tcv-bind = "value"\n\t\t\t\t\t\tcv-ref  = "input:curvature/base/Tag"\n\t\t\t\t></textarea>\n\t\t\t</label>\n\t\t',s}return o(e,t),e}(a.Field)}),require.register("index.js",function(t,e,n){"use strict"}),require.register("input/Keyboard.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var i=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=e("../base/Bindable");t.Keyboard=function(){function t(){var e=this;r(this,t),this.maxDecay=120,this.listening=!0,this.keys=o.Bindable.makeBindable({}),this.codes=o.Bindable.makeBindable({}),document.addEventListener("keyup",function(t){e.keys[t.key]=-1,e.codes[t.code]=-1}),document.addEventListener("keydown",function(t){0<e.keys[t.key]||(e.keys[t.key]=1,e.codes[t.code]=1)}),window.addEventListener("blur",function(){for(var t in e.keys)e.keys[t]=-1;for(var n in e.codes)e.codes[n]=-1})}return i(t,[{key:"getKey",value:function(t){return this.keys[t]?this.keys[t]:0}},{key:"getKeyCode",value:function(t){return this.codes[t]?this.codes[t]:0}},{key:"update",value:function(){for(var t in this.keys)0<this.keys[t]?this.keys[t]++:(this.keys[t]--,this.keys[t]<-this.maxDecay&&delete this.keys[t]);for(var t in this.codes)0<this.codes[t]?this.codes[t]++:(this.codes[t]--,this.codes[t]<-this.maxDecay&&delete this.keys[t])}}]),t}()}),require.register("tag/LazyTag.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LazyTag=void 0;var a=e("./ScrollTag"),s=e("../base/Dom");t.LazyTag=function(t){function e(t,n,o,a,u){r(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a,u));return l.element.classList.remove("cv-visible"),l.element.classList.add("cv-not-visible"),l.bindTo("visible",function(t){t&&(l.afterScroll&&clearTimeout(l.afterScroll),l.afterScroll=setTimeout(function(){l.element&&(l.element.classList.add("cv-visible"),l.element.classList.remove("cv-not-visible"),s.Dom.mapTags(l.element,"[cv-lazy-style]",function(t){var e=t.getAttribute("cv-lazy-style"),n=t.getAttribute("style");t.setAttribute("style",n+";"+e),t.removeAttribute("cv-lazy-style")}))},.5*(l.offsetTop||l.element.offsetTop)+.5*l.element.offsetLeft))}),l}return o(e,t),e}(a.ScrollTag)}),require.register("tag/PopOutTag.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PopOutTag=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function c(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:c(i,e,n)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},u=(e("../base/Bindable"),e("../base/Dom")),l=e("../base/Tag");t.PopOutTag=function(t){function e(t,n,o,a,s){r(this,e);var u=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a,s));return u.poppedOut=!1,u.style=t.getAttribute("style"),u.moving=!1,u.leftDuration=0,u.topDuration=0,u.rightDuration=0,u.bottomDuration=0,u.verticalDuration=0,u.horizontalDuration=0,u.unpoppedStyle="",u.previousScroll=0,u.bodyStyle="",u.bodyScroll=0,u.element.classList.add("unpopped"),u.scrollStyle,u.popTimeout=null,u.rect,u.clickListener=function(e){var n=Math.sqrt,r=Math.pow;if(u.rect=u.element.getBoundingClientRect(),!u.poppedOut){u.distance=n(r(u.rect.top,2)+r(u.rect.left,2));var i=t.getAttribute("data-pop-speed")||1750,o=window.innerWidth-u.rect.right,a=window.innerHeight-u.rect.bottom,s=(u.rect.left+o)/2,l=(u.rect.top+a)/2;u.horizontalDuration=s/i,u.verticalDuration=l/i,.01>u.horizontalDuration&&(u.horizontalDuration=.01),.01>u.verticalDuration&&(u.verticalDuration=.01),.4<u.horizontalDuration&&(u.horizontalDuration=.4),.4<u.verticalDuration&&(u.verticalDuration=.4),console.log(u.horizontalDuration,u.verticalDuration)}u.element.contains(e.target)&&(e.stopPropagation(),e.preventDefault(),u.moving||(u.poppedOut?e.target.matches(".closeButton")&&u.poppedOut&&u.unpop():u.pop()))},u.element.___clickListener___||(Object.defineProperty(u.element,"___scrollListeners___",{enumerable:!1,writable:!0}),u.element.___clickListener___=u.clickListener,u.element.addEventListener("click",t.___clickListener___),u.cleanup.push(function(t){return function(){t.removeEventListener("click",t.___clickListener___)}}(t))),u}return o(e,t),a(e,[{key:"pause",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pause",this).call(this,t),t&&(document.body.setAttribute("style",this.bodyStyle),document.body.setAttribute("style",""))}},{key:"pop",value:function(){var t=this;e.popLevel(),this.previousScroll=window.scrollY,this.rect=this.element.getBoundingClientRect(),this.style=this.element.getAttribute("style"),window.requestAnimationFrame(function(){t.unpoppedStyle="\n\t\t\t\t;position:  fixed;\n\t\t\t\tleft:       "+t.rect.x+"px;\n\t\t\t\ttop:        "+t.rect.y+"px;\n\t\t\t\twidth:      "+t.rect.width+"px;\n\t\t\t\theight:     "+t.rect.height+"px;\n\t\t\t\tz-index:    99999;\n\t\t\t\ttransition: width "+t.horizontalDuration+"s  ease-out\n\t\t\t\t\t\t\t, top "+t.verticalDuration+"s    ease-out\n\t\t\t\t\t\t\t, left "+t.horizontalDuration+"s ease-out\n\t\t\t\t\t\t\t, height "+t.verticalDuration+"s ease-out\n\t\t\t\t\t\t\t, all "+t.horizontalDuration+"s  ease-out;\n\t\t\t\toverflow: hidden;\n\t\t\t";var e=t.style+t.unpoppedStyle;t.element.setAttribute("style",e),window.requestAnimationFrame(function(){e+="\n\t\t\t\t\t;top:   0px;\n\t\t\t\t\tleft:   0px;\n\t\t\t\t\twidth:  100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\ttransition: width "+t.horizontalDuration+"s ease-out\n\t\t\t\t\t\t, top "+t.verticalDuration+"s           ease-out\n\t\t\t\t\t\t, left "+t.horizontalDuration+"s        ease-out\n\t\t\t\t\t\t, height "+t.verticalDuration+"s        ease-out\n\t\t\t\t\t\t, all "+t.horizontalDuration+"s         ease-out;\n\t\t\t\t",t.moving=!0,t.element.setAttribute("style",e),t.element.classList.add("popped"),t.element.classList.remove("unpopped"),t.popTimeout=setTimeout(function(){if(t.element){t.bodyStyle=document.body.getAttribute("style"),document.body.setAttribute("style","height:100%;overflow:hidden;"),t.moving=!1,u.Dom.mapTags(t.element,!1,function(e){var n=new CustomEvent("cvPopped");e.dispatchEvent(n),t.scrollStyle=t.element.getAttribute("style")});var e=new CustomEvent("cvPop",{bubbles:!0,detail:{tag:t,view:t.parent,publicId:t.parent.args.publicId}});t.element.dispatchEvent(e)}},1e3*t.horizontalDuration)}),t.poppedOut=!0})}},{key:"unpop",value:function(){var t=this;this.element.classList.add("unpopping"),this.popTimeout&&clearTimeout(this.popTimeout),0==e.level?document.body.setAttribute("style",""):document.body.setAttribute("style",this.bodyStyle||""),e.unpopLevel(),this.rect||(this.rect=this.element.getBoundingClientRect()),window.scrollTo(0,this.previousScroll);var n=this.style+this.unpoppedStyle+(";transition: width "+this.horizontalDuration+"s ease-in\n\t\t\t\t\t, height "+this.verticalDuration+"s        ease-in\n\t\t\t\t\t, all "+this.horizontalDuration+"s         ease-in;");this.element.setAttribute("style",n),this.moving=!0,setTimeout(function(){t.element&&t.element.classList.remove("popped")},1e3*this.horizontalDuration),setTimeout(function(){if(t.element.classList.add("unpopped"),t.element.classList.remove("unpopping"),!!t.element){t.element.setAttribute("style",t.style),t.moving=!1,u.Dom.mapTags(t.element,!1,function(t){var e=new CustomEvent("cvUnpopped");t.dispatchEvent(e)});var e=new CustomEvent("cvUnpop",{bubbles:!0,detail:{tag:t,view:t.parent,publicId:t.parent.args.publicId}});t.element.dispatchEvent(e)}},1e3*this.horizontalDuration),this.poppedOut=!1}},{key:"remove",value:function(){document.body.setAttribute("style",this.bodyStyle),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}}],[{key:"popLevel",value:function(){return this.level||(this.level=0),this.level++,this.level}},{key:"unpopLevel",value:function(){return this.level||(this.level=0),this.level--,0>this.level&&(this.level=0),this.level}}]),e}(l.Tag)}),require.register("tag/ScrollTag.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollTag=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("../base/Tag"),u=e("../base/Dom");e("../base/Bindable"),t.ScrollTag=function(t){function e(t,n,o,a,s){r(this,e);var l=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o,a,s));return l.visible=!1,l.offsetTop=!1,l.offsetBottom=!1,l.attachListener=function(e){for(var n=e.target;n.parentNode;)n=n.parentNode;rootNode!==window&&rootNode!==document||e.target!==t||(l.addScrollListener(e.target),
l.addResizeListener(e.target),l.scrolled(e.target),e.target.removeEventListener("cvDomAttached",l.attachListener))},l.element.addEventListener("cvDomAttached",l.attachListener),l.cleanup.push(function(t){return function(){t.removeEventListener("cvDomAttached",l.attachListener)}}(l.element)),l.bindTo("visible",function(t){var e;e=t?new Event("cvScrolledIn"):new Event("cvScrolledOut"),u.Dom.mapTags(l.element,!1,function(t){t.dispatchEvent(e)}),l.element.dispatchEvent(e)}),l.bindTo("offsetTop",function(t){var e=new CustomEvent("cvScrolled",{detail:{offset:t}});u.Dom.mapTags(l.element,!1,function(t){t.dispatchEvent(e)}),l.element.dispatchEvent(e)}),l}return o(e,t),a(e,[{key:"scrolled",value:function(){var t=this.element;if(t){var e=!1,n=t.getBoundingClientRect();0<n.bottom&&n.top<window.innerHeight&&(e=!0),this.proxy.visible=e,this.proxy.offsetTop=n.top||0,this.proxy.offsetBottom=n.bottom||0}}},{key:"addScrollListener",value:function(t){var e=this;if(!t.___scrollListener___){Object.defineProperty(t,"___scrollListener___",{enumerable:!1,writable:!0}),t.___scrollListener___=function(t){e.scrolled(t.target)};for(var n=t,r={passive:!0,capture:!0};n.parentNode;)n=n.parentNode,n.addEventListener("scroll",t.___scrollListener___,r),this.direct.cleanup.push(function(t,e,n){return function(){t.removeEventListener("scroll",e.___scrollListener___,n),e=t=null}}(n,t,r))}}},{key:"addResizeListener",value:function(t){var e=this;t.___resizeListener___||(Object.defineProperty(t,"___resizeListener___",{enumerable:!1,writable:!0}),t.___resizeListener___=function(t){e.scrolled(t.target)},window.addEventListener("resize",this.resizeListener),this.direct.cleanup.push(function(e){return function(){window.removeEventListener("resize",e.___resizeListener___),t.___resizeListener___=null,t=null}}(t)))}}]),e}(s.Tag)}),require.register("toast/Toast.js",function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Toast=void 0;var a=function(){function t(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=e("../base/View"),u=e("./ToastAlert");t.Toast=function(t){function e(){r(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.template='\n\t\t\t<div id = "[[_id]]" cv-each = "alerts:alert" class = "toast">\n\t\t\t\t[[alert]]\n\t\t\t</div>\n\t\t',t.args.alerts=[],t.args.alerts.bindTo(function(t){console.log(t)}),t}return o(e,t),a(e,null,[{key:"instance",value:function(){return this.inst||(this.inst=new this),this.inst}}]),a(e,[{key:"pop",value:function(t){var e=this;this.args.alerts.length;this.args.alerts.push(t),t.decay(function(t){return function(){for(var n in e.args.alerts)if(e.args.alerts)return e.args.alerts[n]===t,void e.args.alerts.splice(n,1)}}(t))}},{key:"alert",value:function(t,e,n){return this.pop(new u.ToastAlert({title:t,body:e,time:n}))}}]),e}(s.View)}),require.register("___globals___",function(t,e,n){})}(),require("___globals___");